<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.8.6">
  <compounddef id="riscv__cfft__radix4__q15_8c" kind="file">
    <compoundname>riscv_cfft_radix4_q15.c</compoundname>
    <includes refid="riscv__math_8h" local="yes">riscv_math.h</includes>
    <includedby refid="TransformFunctions_8c" local="yes">TransformFunctions.c</includedby>
      <sectiondef kind="func">
      <memberdef kind="function" id="riscv__cfft__radix4__q15_8c_1a7e09f8638f5d96a81a11054307204ba0" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>void riscv_radix4_butterfly_q15</definition>
        <argsstring>(q15_t *pSrc16, uint32_t fftLen, const q15_t *pCoef16, uint32_t twidCoefModifier)</argsstring>
        <name>riscv_radix4_butterfly_q15</name>
        <param>
          <type>q15_t *</type>
          <declname>pSrc16</declname>
        </param>
        <param>
          <type>uint32_t</type>
          <declname>fftLen</declname>
        </param>
        <param>
          <type>const q15_t *</type>
          <declname>pCoef16</declname>
        </param>
        <param>
          <type>uint32_t</type>
          <declname>twidCoefModifier</declname>
        </param>
        <briefdescription>
<para>Core function for the Q15 CFFT butterfly process. </para>        </briefdescription>
        <detaileddescription>
<para>end of ComplexFFT group <parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername direction="inout">pSrc16</parametername>
</parameternamelist>
<parameterdescription>
<para>points to the in-place buffer of Q15 data type </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername direction="in">fftLen</parametername>
</parameternamelist>
<parameterdescription>
<para>length of the FFT </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername direction="in">pCoef16</parametername>
</parameternamelist>
<parameterdescription>
<para>points to twiddle coefficient buffer </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername direction="in">twidCoefModifier</parametername>
</parameternamelist>
<parameterdescription>
<para>twiddle coefficient modifier that supports different size FFTs with the same twiddle factor table </para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>none </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/home/travis/build/Nuclei-Software/NMSIS/NMSIS/DSP/Source/TransformFunctions/riscv_cfft_radix4_q15.c" line="34" column="1" bodyfile="/home/travis/build/Nuclei-Software/NMSIS/NMSIS/DSP/Source/TransformFunctions/riscv_cfft_radix4_q15.c" bodystart="148" bodyend="966"/>
      </memberdef>
      <memberdef kind="function" id="riscv__cfft__radix4__q15_8c_1acc3383a9da9de2f2ad9680ab0753be08" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>void riscv_radix4_butterfly_inverse_q15</definition>
        <argsstring>(q15_t *pSrc16, uint32_t fftLen, const q15_t *pCoef16, uint32_t twidCoefModifier)</argsstring>
        <name>riscv_radix4_butterfly_inverse_q15</name>
        <param>
          <type>q15_t *</type>
          <declname>pSrc16</declname>
        </param>
        <param>
          <type>uint32_t</type>
          <declname>fftLen</declname>
        </param>
        <param>
          <type>const q15_t *</type>
          <declname>pCoef16</declname>
        </param>
        <param>
          <type>uint32_t</type>
          <declname>twidCoefModifier</declname>
        </param>
        <briefdescription>
<para>Core function for the Q15 CIFFT butterfly process. </para>        </briefdescription>
        <detaileddescription>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername direction="inout">pSrc16</parametername>
</parameternamelist>
<parameterdescription>
<para>points to the in-place buffer of Q15 data type </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername direction="in">fftLen</parametername>
</parameternamelist>
<parameterdescription>
<para>length of the FFT </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername direction="in">pCoef16</parametername>
</parameternamelist>
<parameterdescription>
<para>points to twiddle coefficient buffer </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername direction="in">twidCoefModifier</parametername>
</parameternamelist>
<parameterdescription>
<para>twiddle coefficient modifier that supports different size FFTs with the same twiddle factor table. </para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>none </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/home/travis/build/Nuclei-Software/NMSIS/NMSIS/DSP/Source/TransformFunctions/riscv_cfft_radix4_q15.c" line="40" column="1" bodyfile="/home/travis/build/Nuclei-Software/NMSIS/NMSIS/DSP/Source/TransformFunctions/riscv_cfft_radix4_q15.c" bodystart="1018" bodyend="1810"/>
      </memberdef>
      <memberdef kind="function" id="riscv__cfft__radix4__q15_8c_1ad46c4c5657fecf5e7027045ac8b5d494" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>void riscv_bitreversal_q15</definition>
        <argsstring>(q15_t *pSrc, uint32_t fftLen, uint16_t bitRevFactor, const uint16_t *pBitRevTab)</argsstring>
        <name>riscv_bitreversal_q15</name>
        <param>
          <type>q15_t *</type>
          <declname>pSrc</declname>
          <defname>pSrc16</defname>
        </param>
        <param>
          <type>uint32_t</type>
          <declname>fftLen</declname>
        </param>
        <param>
          <type>uint16_t</type>
          <declname>bitRevFactor</declname>
        </param>
        <param>
          <type>const uint16_t *</type>
          <declname>pBitRevTab</declname>
        </param>
        <briefdescription>
<para>In-place Q15 bit reversal function. </para>        </briefdescription>
        <detaileddescription>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername direction="inout">pSrc16</parametername>
</parameternamelist>
<parameterdescription>
<para>points to in-place Q15 data buffer </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername direction="in">fftLen</parametername>
</parameternamelist>
<parameterdescription>
<para>length of FFT </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername direction="in">bitRevFactor</parametername>
</parameternamelist>
<parameterdescription>
<para>bit reversal modifier that supports different size FFTs with the same bit reversal table </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername direction="in">pBitRevTab</parametername>
</parameternamelist>
<parameterdescription>
<para>points to bit reversal table </para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>none </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/home/travis/build/Nuclei-Software/NMSIS/NMSIS/DSP/Source/TransformFunctions/riscv_cfft_radix4_q15.c" line="46" column="1" bodyfile="/home/travis/build/Nuclei-Software/NMSIS/NMSIS/DSP/Source/TransformFunctions/riscv_bitreversal.c" bodystart="184" bodyend="230"/>
      </memberdef>
      <memberdef kind="function" id="group__ComplexFFT_1ga47697317fa5f9f6bca6aa77813743a7d" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>void riscv_cfft_radix4_q15</definition>
        <argsstring>(const riscv_cfft_radix4_instance_q15 *S, q15_t *pSrc)</argsstring>
        <name>riscv_cfft_radix4_q15</name>
        <param>
          <type>const <ref refid="structriscv__cfft__radix4__instance__q15" kindref="compound">riscv_cfft_radix4_instance_q15</ref> *</type>
          <declname>S</declname>
        </param>
        <param>
          <type>q15_t *</type>
          <declname>pSrc</declname>
        </param>
        <briefdescription>
<para>Processing function for the Q15 CFFT/CIFFT. </para>        </briefdescription>
        <detaileddescription>
<para><xrefsect id="deprecated_1_deprecated000012"><xreftitle>Deprecated</xreftitle><xrefdescription><para>Do not use this function. It has been superseded by <ref refid="group__ComplexFFT_1ga264c98d1748ec1c5cfd561194df73059" kindref="member">riscv_cfft_q15</ref> and will be removed in the future. <parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername direction="in">S</parametername>
</parameternamelist>
<parameterdescription>
<para>points to an instance of the Q15 CFFT/CIFFT structure. </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername direction="inout">pSrc</parametername>
</parameternamelist>
<parameterdescription>
<para>points to the complex data buffer. Processing occurs in-place. </para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>none</para></simplesect>
</para></xrefdescription></xrefsect></para><para><simplesect kind="par"><title>Input and output formats:</title><para>Internally input is downscaled by 2 for every stage to avoid saturations inside CFFT/CIFFT process. Hence the output format is different for different FFT sizes. The input and output formats for different FFT sizes and number of bits to upscale are mentioned in the tables below for CFFT and CIFFT: </para></simplesect>
<simplesect kind="par"><title></title><para><image type="html" name="CFFTQ15.png">Input and Output Formats for Q15 CFFT</image>
 <image type="html" name="CIFFTQ15.png">Input and Output Formats for Q15 CIFFT</image>
</para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/home/travis/build/Nuclei-Software/NMSIS/NMSIS/DSP/Source/TransformFunctions/riscv_cfft_radix4_q15.c" line="78" column="1" bodyfile="/home/travis/build/Nuclei-Software/NMSIS/NMSIS/DSP/Source/TransformFunctions/riscv_cfft_radix4_q15.c" bodystart="78" bodyend="99"/>
      </memberdef>
      </sectiondef>
    <briefdescription>
    </briefdescription>
    <detaileddescription>
    </detaileddescription>
    <programlisting>
<codeline lineno="1"><highlight class="comment">/*<sp/>----------------------------------------------------------------------</highlight></codeline>
<codeline lineno="2"><highlight class="comment"><sp/>*<sp/>Project:<sp/><sp/><sp/><sp/><sp/><sp/>NMSIS<sp/>DSP<sp/>Library</highlight></codeline>
<codeline lineno="3"><highlight class="comment"><sp/>*<sp/>Title:<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>riscv_cfft_radix4_q15.c</highlight></codeline>
<codeline lineno="4"><highlight class="comment"><sp/>*<sp/>Description:<sp/><sp/>This<sp/>file<sp/>has<sp/>function<sp/>definition<sp/>of<sp/>Radix-4<sp/>FFT<sp/>&amp;<sp/>IFFT<sp/>function<sp/>and</highlight></codeline>
<codeline lineno="5"><highlight class="comment"><sp/>*<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>In-place<sp/>bit<sp/>reversal<sp/>using<sp/>bit<sp/>reversal<sp/>table</highlight></codeline>
<codeline lineno="6"><highlight class="comment"><sp/>*</highlight></codeline>
<codeline lineno="7"><highlight class="comment"><sp/>*<sp/>$Date:<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>18.<sp/>March<sp/>2019</highlight></codeline>
<codeline lineno="8"><highlight class="comment"><sp/>*<sp/>$Revision:<sp/><sp/><sp/><sp/>V1.6.0</highlight></codeline>
<codeline lineno="9"><highlight class="comment"><sp/>*</highlight></codeline>
<codeline lineno="10"><highlight class="comment"><sp/>*<sp/>Target<sp/>Processor:<sp/>RISC-V<sp/>Cores</highlight></codeline>
<codeline lineno="11"><highlight class="comment"><sp/>*<sp/>--------------------------------------------------------------------<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="12"><highlight class="normal"></highlight><highlight class="comment">/*</highlight></codeline>
<codeline lineno="13"><highlight class="comment"><sp/>*<sp/>Copyright<sp/>(C)<sp/>2010-2019<sp/>ARM<sp/>Limited<sp/>or<sp/>its<sp/>affiliates.<sp/>All<sp/>rights<sp/>reserved.</highlight></codeline>
<codeline lineno="14"><highlight class="comment"><sp/>*<sp/>Copyright<sp/>(c)<sp/>2019<sp/>Nuclei<sp/>Limited.<sp/>All<sp/>rights<sp/>reserved.</highlight></codeline>
<codeline lineno="15"><highlight class="comment"><sp/>*</highlight></codeline>
<codeline lineno="16"><highlight class="comment"><sp/>*<sp/>SPDX-License-Identifier:<sp/>Apache-2.0</highlight></codeline>
<codeline lineno="17"><highlight class="comment"><sp/>*</highlight></codeline>
<codeline lineno="18"><highlight class="comment"><sp/>*<sp/>Licensed<sp/>under<sp/>the<sp/>Apache<sp/>License,<sp/>Version<sp/>2.0<sp/>(the<sp/>License);<sp/>you<sp/>may</highlight></codeline>
<codeline lineno="19"><highlight class="comment"><sp/>*<sp/>not<sp/>use<sp/>this<sp/>file<sp/>except<sp/>in<sp/>compliance<sp/>with<sp/>the<sp/>License.</highlight></codeline>
<codeline lineno="20"><highlight class="comment"><sp/>*<sp/>You<sp/>may<sp/>obtain<sp/>a<sp/>copy<sp/>of<sp/>the<sp/>License<sp/>at</highlight></codeline>
<codeline lineno="21"><highlight class="comment"><sp/>*</highlight></codeline>
<codeline lineno="22"><highlight class="comment"><sp/>*<sp/>www.apache.org/licenses/LICENSE-2.0</highlight></codeline>
<codeline lineno="23"><highlight class="comment"><sp/>*</highlight></codeline>
<codeline lineno="24"><highlight class="comment"><sp/>*<sp/>Unless<sp/>required<sp/>by<sp/>applicable<sp/>law<sp/>or<sp/>agreed<sp/>to<sp/>in<sp/>writing,<sp/>software</highlight></codeline>
<codeline lineno="25"><highlight class="comment"><sp/>*<sp/>distributed<sp/>under<sp/>the<sp/>License<sp/>is<sp/>distributed<sp/>on<sp/>an<sp/>AS<sp/>IS<sp/>BASIS,<sp/>WITHOUT</highlight></codeline>
<codeline lineno="26"><highlight class="comment"><sp/>*<sp/>WARRANTIES<sp/>OR<sp/>CONDITIONS<sp/>OF<sp/>ANY<sp/>KIND,<sp/>either<sp/>express<sp/>or<sp/>implied.</highlight></codeline>
<codeline lineno="27"><highlight class="comment"><sp/>*<sp/>See<sp/>the<sp/>License<sp/>for<sp/>the<sp/>specific<sp/>language<sp/>governing<sp/>permissions<sp/>and</highlight></codeline>
<codeline lineno="28"><highlight class="comment"><sp/>*<sp/>limitations<sp/>under<sp/>the<sp/>License.</highlight></codeline>
<codeline lineno="29"><highlight class="comment"><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="30"><highlight class="normal"></highlight></codeline>
<codeline lineno="31"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;riscv_math.h&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="32"><highlight class="normal"></highlight></codeline>
<codeline lineno="33"><highlight class="normal"></highlight></codeline>
<codeline lineno="34"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>riscv_radix4_butterfly_q15(</highlight></codeline>
<codeline lineno="35"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>q15_t<sp/>*<sp/>pSrc16,</highlight></codeline>
<codeline lineno="36"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>uint32_t<sp/>fftLen,</highlight></codeline>
<codeline lineno="37"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>q15_t<sp/>*<sp/>pCoef16,</highlight></codeline>
<codeline lineno="38"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>uint32_t<sp/>twidCoefModifier);</highlight></codeline>
<codeline lineno="39"><highlight class="normal"></highlight></codeline>
<codeline lineno="40"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>riscv_radix4_butterfly_inverse_q15(</highlight></codeline>
<codeline lineno="41"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>q15_t<sp/>*<sp/>pSrc16,</highlight></codeline>
<codeline lineno="42"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>uint32_t<sp/>fftLen,</highlight></codeline>
<codeline lineno="43"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>q15_t<sp/>*<sp/>pCoef16,</highlight></codeline>
<codeline lineno="44"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>uint32_t<sp/>twidCoefModifier);</highlight></codeline>
<codeline lineno="45"><highlight class="normal"></highlight></codeline>
<codeline lineno="46"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>riscv_bitreversal_q15(</highlight></codeline>
<codeline lineno="47"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>q15_t<sp/>*<sp/>pSrc,</highlight></codeline>
<codeline lineno="48"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>uint32_t<sp/>fftLen,</highlight></codeline>
<codeline lineno="49"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>uint16_t<sp/>bitRevFactor,</highlight></codeline>
<codeline lineno="50"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>uint16_t<sp/>*<sp/>pBitRevTab);</highlight></codeline>
<codeline lineno="51"><highlight class="normal"></highlight></codeline>
<codeline lineno="78"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="group__ComplexFFT_1ga47697317fa5f9f6bca6aa77813743a7d" kindref="member">riscv_cfft_radix4_q15</ref>(</highlight></codeline>
<codeline lineno="79"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="structriscv__cfft__radix4__instance__q15" kindref="compound">riscv_cfft_radix4_instance_q15</ref><sp/>*<sp/>S,</highlight></codeline>
<codeline lineno="80"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>q15_t<sp/>*<sp/>pSrc)</highlight></codeline>
<codeline lineno="81"><highlight class="normal">{</highlight></codeline>
<codeline lineno="82"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(S-&gt;<ref refid="structriscv__cfft__radix4__instance__q15_1a23b68ebcbc42722f418bc87163dc7d19" kindref="member">ifftFlag</ref><sp/>==<sp/>1U)</highlight></codeline>
<codeline lineno="83"><highlight class="normal"><sp/><sp/>{</highlight></codeline>
<codeline lineno="84"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/><sp/>Complex<sp/>IFFT<sp/>radix-4<sp/><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="85"><highlight class="normal"><sp/><sp/><sp/><sp/>riscv_radix4_butterfly_inverse_q15(pSrc,<sp/>S-&gt;<ref refid="structriscv__cfft__radix4__instance__q15_1ac9eeb226d505c8ff399d405936b22a6a" kindref="member">fftLen</ref>,<sp/>S-&gt;<ref refid="structriscv__cfft__radix4__instance__q15_1a46d5e144cf3be72cac1a38a6523947be" kindref="member">pTwiddle</ref>,<sp/>S-&gt;<ref refid="structriscv__cfft__radix4__instance__q15_1ace4740c7ab376848cbd3d1e0cafce028" kindref="member">twidCoefModifier</ref>);</highlight></codeline>
<codeline lineno="86"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="87"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="88"><highlight class="normal"><sp/><sp/>{</highlight></codeline>
<codeline lineno="89"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/><sp/>Complex<sp/>FFT<sp/>radix-4<sp/><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="90"><highlight class="normal"><sp/><sp/><sp/><sp/>riscv_radix4_butterfly_q15(pSrc,<sp/>S-&gt;<ref refid="structriscv__cfft__radix4__instance__q15_1ac9eeb226d505c8ff399d405936b22a6a" kindref="member">fftLen</ref>,<sp/>S-&gt;<ref refid="structriscv__cfft__radix4__instance__q15_1a46d5e144cf3be72cac1a38a6523947be" kindref="member">pTwiddle</ref>,<sp/>S-&gt;<ref refid="structriscv__cfft__radix4__instance__q15_1ace4740c7ab376848cbd3d1e0cafce028" kindref="member">twidCoefModifier</ref>);</highlight></codeline>
<codeline lineno="91"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="92"><highlight class="normal"></highlight></codeline>
<codeline lineno="93"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(S-&gt;<ref refid="structriscv__cfft__radix4__instance__q15_1a090f14beb40efae62dccdc0fd0adc007" kindref="member">bitReverseFlag</ref><sp/>==<sp/>1U)</highlight></codeline>
<codeline lineno="94"><highlight class="normal"><sp/><sp/>{</highlight></codeline>
<codeline lineno="95"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/><sp/>Bit<sp/>Reversal<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="96"><highlight class="normal"><sp/><sp/><sp/><sp/>riscv_bitreversal_q15(pSrc,<sp/>S-&gt;<ref refid="structriscv__cfft__radix4__instance__q15_1ac9eeb226d505c8ff399d405936b22a6a" kindref="member">fftLen</ref>,<sp/>S-&gt;<ref refid="structriscv__cfft__radix4__instance__q15_1a2dbc0d4c498d1819f2f75a1fb8aad35d" kindref="member">bitRevFactor</ref>,<sp/>S-&gt;<ref refid="structriscv__cfft__radix4__instance__q15_1aaad66aabc4979f50ae96cf6cb48e42f4" kindref="member">pBitRevTable</ref>);</highlight></codeline>
<codeline lineno="97"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="98"><highlight class="normal"></highlight></codeline>
<codeline lineno="99"><highlight class="normal">}</highlight></codeline>
<codeline lineno="100"><highlight class="normal"></highlight></codeline>
<codeline lineno="105"><highlight class="comment">/*</highlight></codeline>
<codeline lineno="106"><highlight class="comment"><sp/>*<sp/>Radix-4<sp/>FFT<sp/>algorithm<sp/>used<sp/>is<sp/>:</highlight></codeline>
<codeline lineno="107"><highlight class="comment"><sp/>*</highlight></codeline>
<codeline lineno="108"><highlight class="comment"><sp/>*<sp/>Input<sp/>real<sp/>and<sp/>imaginary<sp/>data:</highlight></codeline>
<codeline lineno="109"><highlight class="comment"><sp/>*<sp/>x(n)<sp/>=<sp/>xa<sp/>+<sp/>j<sp/>*<sp/>ya</highlight></codeline>
<codeline lineno="110"><highlight class="comment"><sp/>*<sp/>x(n+N/4<sp/>)<sp/>=<sp/>xb<sp/>+<sp/>j<sp/>*<sp/>yb</highlight></codeline>
<codeline lineno="111"><highlight class="comment"><sp/>*<sp/>x(n+N/2<sp/>)<sp/>=<sp/>xc<sp/>+<sp/>j<sp/>*<sp/>yc</highlight></codeline>
<codeline lineno="112"><highlight class="comment"><sp/>*<sp/>x(n+3N<sp/>4)<sp/>=<sp/>xd<sp/>+<sp/>j<sp/>*<sp/>yd</highlight></codeline>
<codeline lineno="113"><highlight class="comment"><sp/>*</highlight></codeline>
<codeline lineno="114"><highlight class="comment"><sp/>*</highlight></codeline>
<codeline lineno="115"><highlight class="comment"><sp/>*<sp/>Output<sp/>real<sp/>and<sp/>imaginary<sp/>data:</highlight></codeline>
<codeline lineno="116"><highlight class="comment"><sp/>*<sp/>x(4r)<sp/>=<sp/>xa&apos;+<sp/>j<sp/>*<sp/>ya&apos;</highlight></codeline>
<codeline lineno="117"><highlight class="comment"><sp/>*<sp/>x(4r+1)<sp/>=<sp/>xb&apos;+<sp/>j<sp/>*<sp/>yb&apos;</highlight></codeline>
<codeline lineno="118"><highlight class="comment"><sp/>*<sp/>x(4r+2)<sp/>=<sp/>xc&apos;+<sp/>j<sp/>*<sp/>yc&apos;</highlight></codeline>
<codeline lineno="119"><highlight class="comment"><sp/>*<sp/>x(4r+3)<sp/>=<sp/>xd&apos;+<sp/>j<sp/>*<sp/>yd&apos;</highlight></codeline>
<codeline lineno="120"><highlight class="comment"><sp/>*</highlight></codeline>
<codeline lineno="121"><highlight class="comment"><sp/>*</highlight></codeline>
<codeline lineno="122"><highlight class="comment"><sp/>*<sp/>Twiddle<sp/>factors<sp/>for<sp/>radix-4<sp/>FFT:</highlight></codeline>
<codeline lineno="123"><highlight class="comment"><sp/>*<sp/>Wn<sp/>=<sp/>co1<sp/>+<sp/>j<sp/>*<sp/>(-<sp/>si1)</highlight></codeline>
<codeline lineno="124"><highlight class="comment"><sp/>*<sp/>W2n<sp/>=<sp/>co2<sp/>+<sp/>j<sp/>*<sp/>(-<sp/>si2)</highlight></codeline>
<codeline lineno="125"><highlight class="comment"><sp/>*<sp/>W3n<sp/>=<sp/>co3<sp/>+<sp/>j<sp/>*<sp/>(-<sp/>si3)</highlight></codeline>
<codeline lineno="126"><highlight class="comment"><sp/></highlight></codeline>
<codeline lineno="127"><highlight class="comment"><sp/>*<sp/>The<sp/>real<sp/>and<sp/>imaginary<sp/>output<sp/>values<sp/>for<sp/>the<sp/>radix-4<sp/>butterfly<sp/>are</highlight></codeline>
<codeline lineno="128"><highlight class="comment"><sp/>*<sp/>xa&apos;<sp/>=<sp/>xa<sp/>+<sp/>xb<sp/>+<sp/>xc<sp/>+<sp/>xd</highlight></codeline>
<codeline lineno="129"><highlight class="comment"><sp/>*<sp/>ya&apos;<sp/>=<sp/>ya<sp/>+<sp/>yb<sp/>+<sp/>yc<sp/>+<sp/>yd</highlight></codeline>
<codeline lineno="130"><highlight class="comment"><sp/>*<sp/>xb&apos;<sp/>=<sp/>(xa+yb-xc-yd)*<sp/>co1<sp/>+<sp/>(ya-xb-yc+xd)*<sp/>(si1)</highlight></codeline>
<codeline lineno="131"><highlight class="comment"><sp/>*<sp/>yb&apos;<sp/>=<sp/>(ya-xb-yc+xd)*<sp/>co1<sp/>-<sp/>(xa+yb-xc-yd)*<sp/>(si1)</highlight></codeline>
<codeline lineno="132"><highlight class="comment"><sp/>*<sp/>xc&apos;<sp/>=<sp/>(xa-xb+xc-xd)*<sp/>co2<sp/>+<sp/>(ya-yb+yc-yd)*<sp/>(si2)</highlight></codeline>
<codeline lineno="133"><highlight class="comment"><sp/>*<sp/>yc&apos;<sp/>=<sp/>(ya-yb+yc-yd)*<sp/>co2<sp/>-<sp/>(xa-xb+xc-xd)*<sp/>(si2)</highlight></codeline>
<codeline lineno="134"><highlight class="comment"><sp/>*<sp/>xd&apos;<sp/>=<sp/>(xa-yb-xc+yd)*<sp/>co3<sp/>+<sp/>(ya+xb-yc-xd)*<sp/>(si3)</highlight></codeline>
<codeline lineno="135"><highlight class="comment"><sp/>*<sp/>yd&apos;<sp/>=<sp/>(ya+xb-yc-xd)*<sp/>co3<sp/>-<sp/>(xa-yb-xc+yd)*<sp/>(si3)</highlight></codeline>
<codeline lineno="136"><highlight class="comment"><sp/>*</highlight></codeline>
<codeline lineno="137"><highlight class="comment"><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="138"><highlight class="normal"></highlight></codeline>
<codeline lineno="148"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>riscv_radix4_butterfly_q15(</highlight></codeline>
<codeline lineno="149"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>q15_t<sp/>*<sp/>pSrc16,</highlight></codeline>
<codeline lineno="150"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>uint32_t<sp/>fftLen,</highlight></codeline>
<codeline lineno="151"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>q15_t<sp/>*<sp/>pCoef16,</highlight></codeline>
<codeline lineno="152"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>uint32_t<sp/>twidCoefModifier)</highlight></codeline>
<codeline lineno="153"><highlight class="normal">{</highlight></codeline>
<codeline lineno="154"><highlight class="normal"></highlight></codeline>
<codeline lineno="155"><highlight class="normal"></highlight><highlight class="preprocessor">#if<sp/>defined<sp/>(RISCV_MATH_DSP)</highlight></codeline>
<codeline lineno="156"><highlight class="preprocessor"></highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="157"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>q31_t<sp/>R,<sp/>S,<sp/>T,<sp/>U;</highlight></codeline>
<codeline lineno="158"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>q31_t<sp/>C1,<sp/>C2,<sp/>C3,<sp/>out1,<sp/>out2;</highlight></codeline>
<codeline lineno="159"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>uint32_t<sp/>n1,<sp/>n2,<sp/>ic,<sp/>i0,<sp/>j,<sp/>k;</highlight></codeline>
<codeline lineno="160"><highlight class="normal"></highlight></codeline>
<codeline lineno="161"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>q15_t<sp/>*ptr1;</highlight></codeline>
<codeline lineno="162"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>q15_t<sp/>*pSi0;</highlight></codeline>
<codeline lineno="163"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>q15_t<sp/>*pSi1;</highlight></codeline>
<codeline lineno="164"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>q15_t<sp/>*pSi2;</highlight></codeline>
<codeline lineno="165"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>q15_t<sp/>*pSi3;</highlight></codeline>
<codeline lineno="166"><highlight class="normal"></highlight></codeline>
<codeline lineno="167"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>q31_t<sp/>xaya,<sp/>xbyb,<sp/>xcyc,<sp/>xdyd;</highlight></codeline>
<codeline lineno="168"><highlight class="normal"></highlight></codeline>
<codeline lineno="169"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>Total<sp/>process<sp/>is<sp/>divided<sp/>into<sp/>three<sp/>stages<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="170"><highlight class="normal"></highlight></codeline>
<codeline lineno="171"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>process<sp/>first<sp/>stage,<sp/>middle<sp/>stages,<sp/>&amp;<sp/>last<sp/>stage<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="172"><highlight class="normal"></highlight></codeline>
<codeline lineno="173"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/><sp/>Initializations<sp/>for<sp/>the<sp/>first<sp/>stage<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="174"><highlight class="normal"><sp/><sp/>n2<sp/>=<sp/>fftLen;</highlight></codeline>
<codeline lineno="175"><highlight class="normal"><sp/><sp/>n1<sp/>=<sp/>n2;</highlight></codeline>
<codeline lineno="176"><highlight class="normal"></highlight></codeline>
<codeline lineno="177"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>n2<sp/>=<sp/>fftLen/4<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="178"><highlight class="normal"><sp/><sp/>n2<sp/>&gt;&gt;=<sp/>2U;</highlight></codeline>
<codeline lineno="179"><highlight class="normal"></highlight></codeline>
<codeline lineno="180"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>Index<sp/>for<sp/>twiddle<sp/>coefficient<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="181"><highlight class="normal"><sp/><sp/>ic<sp/>=<sp/>0U;</highlight></codeline>
<codeline lineno="182"><highlight class="normal"></highlight></codeline>
<codeline lineno="183"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>Index<sp/>for<sp/>input<sp/>read<sp/>and<sp/>output<sp/>write<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="184"><highlight class="normal"><sp/><sp/>j<sp/>=<sp/>n2;</highlight></codeline>
<codeline lineno="185"><highlight class="normal"></highlight></codeline>
<codeline lineno="186"><highlight class="normal"><sp/><sp/>pSi0<sp/>=<sp/>pSrc16;</highlight></codeline>
<codeline lineno="187"><highlight class="normal"><sp/><sp/>pSi1<sp/>=<sp/>pSi0<sp/>+<sp/>2<sp/>*<sp/>n2;</highlight></codeline>
<codeline lineno="188"><highlight class="normal"><sp/><sp/>pSi2<sp/>=<sp/>pSi1<sp/>+<sp/>2<sp/>*<sp/>n2;</highlight></codeline>
<codeline lineno="189"><highlight class="normal"><sp/><sp/>pSi3<sp/>=<sp/>pSi2<sp/>+<sp/>2<sp/>*<sp/>n2;</highlight></codeline>
<codeline lineno="190"><highlight class="normal"></highlight></codeline>
<codeline lineno="191"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>Input<sp/>is<sp/>in<sp/>1.15(q15)<sp/>format<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="192"><highlight class="normal"></highlight></codeline>
<codeline lineno="193"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/><sp/>start<sp/>of<sp/>first<sp/>stage<sp/>process<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="194"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">do</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="195"><highlight class="normal"><sp/><sp/>{</highlight></codeline>
<codeline lineno="196"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/><sp/>Butterfly<sp/>implementation<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="197"><highlight class="normal"></highlight></codeline>
<codeline lineno="198"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Reading<sp/>i0,<sp/>i0+fftLen/2<sp/>inputs<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="199"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Read<sp/>ya<sp/>(real),<sp/>xa(imag)<sp/>input<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="200"><highlight class="normal"><sp/><sp/><sp/><sp/>T<sp/>=<sp/>read_q15x2<sp/>(pSi0);</highlight></codeline>
<codeline lineno="201"><highlight class="normal"><sp/><sp/><sp/><sp/>T<sp/>=<sp/>__SHADD16(T,<sp/>0);<sp/></highlight><highlight class="comment">/*<sp/>this<sp/>is<sp/>just<sp/>a<sp/>SIMD<sp/>arithmetic<sp/>shift<sp/>right<sp/>by<sp/>1<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="202"><highlight class="normal"><sp/><sp/><sp/><sp/>T<sp/>=<sp/>__SHADD16(T,<sp/>0);<sp/></highlight><highlight class="comment">/*<sp/>it<sp/>turns<sp/>out<sp/>doing<sp/>this<sp/>twice<sp/>is<sp/>2<sp/>cycles,<sp/>the<sp/>alternative<sp/>takes<sp/>3<sp/>cycles<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="203"><highlight class="normal"></highlight><highlight class="comment">/*</highlight></codeline>
<codeline lineno="204"><highlight class="comment"><sp/><sp/><sp/><sp/>in<sp/>=<sp/>((int16_t)<sp/>(T<sp/>&amp;<sp/>0xFFFF))<sp/>&gt;&gt;<sp/>2;<sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>alternative<sp/>code<sp/>that<sp/>takes<sp/>3<sp/>cycles</highlight></codeline>
<codeline lineno="205"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/>T<sp/>=<sp/>((T<sp/>&gt;&gt;<sp/>2)<sp/>&amp;<sp/>0xFFFF0000)<sp/>|<sp/>(in<sp/>&amp;<sp/>0xFFFF);</highlight></codeline>
<codeline lineno="206"><highlight class="comment">*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="207"><highlight class="normal"></highlight></codeline>
<codeline lineno="208"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Read<sp/>yc<sp/>(real),<sp/>xc(imag)<sp/>input<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="209"><highlight class="normal"><sp/><sp/><sp/><sp/>S<sp/>=<sp/>read_q15x2<sp/>(pSi2);</highlight></codeline>
<codeline lineno="210"><highlight class="normal"><sp/><sp/><sp/><sp/>S<sp/>=<sp/>__SHADD16(S,<sp/>0);</highlight></codeline>
<codeline lineno="211"><highlight class="normal"><sp/><sp/><sp/><sp/>S<sp/>=<sp/>__SHADD16(S,<sp/>0);</highlight></codeline>
<codeline lineno="212"><highlight class="normal"></highlight></codeline>
<codeline lineno="213"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>R<sp/>=<sp/>packed((ya<sp/>+<sp/>yc),<sp/>(xa<sp/>+<sp/>xc)<sp/>)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="214"><highlight class="normal"><sp/><sp/><sp/><sp/>R<sp/>=<sp/>__QADD16(T,<sp/>S);</highlight></codeline>
<codeline lineno="215"><highlight class="normal"></highlight></codeline>
<codeline lineno="216"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>S<sp/>=<sp/>packed((ya<sp/>-<sp/>yc),<sp/>(xa<sp/>-<sp/>xc)<sp/>)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="217"><highlight class="normal"><sp/><sp/><sp/><sp/>S<sp/>=<sp/>__QSUB16(T,<sp/>S);</highlight></codeline>
<codeline lineno="218"><highlight class="normal"></highlight></codeline>
<codeline lineno="219"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/><sp/>Reading<sp/>i0+fftLen/4<sp/>,<sp/>i0+3fftLen/4<sp/>inputs<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="220"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Read<sp/>yb<sp/>(real),<sp/>xb(imag)<sp/>input<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="221"><highlight class="normal"><sp/><sp/><sp/><sp/>T<sp/>=<sp/>read_q15x2<sp/>(pSi1);</highlight></codeline>
<codeline lineno="222"><highlight class="normal"><sp/><sp/><sp/><sp/>T<sp/>=<sp/>__SHADD16(T,<sp/>0);</highlight></codeline>
<codeline lineno="223"><highlight class="normal"><sp/><sp/><sp/><sp/>T<sp/>=<sp/>__SHADD16(T,<sp/>0);</highlight></codeline>
<codeline lineno="224"><highlight class="normal"></highlight></codeline>
<codeline lineno="225"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Read<sp/>yd<sp/>(real),<sp/>xd(imag)<sp/>input<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="226"><highlight class="normal"><sp/><sp/><sp/><sp/>U<sp/>=<sp/>read_q15x2<sp/>(pSi3);</highlight></codeline>
<codeline lineno="227"><highlight class="normal"><sp/><sp/><sp/><sp/>U<sp/>=<sp/>__SHADD16(U,<sp/>0);</highlight></codeline>
<codeline lineno="228"><highlight class="normal"><sp/><sp/><sp/><sp/>U<sp/>=<sp/>__SHADD16(U,<sp/>0);</highlight></codeline>
<codeline lineno="229"><highlight class="normal"></highlight></codeline>
<codeline lineno="230"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>T<sp/>=<sp/>packed((yb<sp/>+<sp/>yd),<sp/>(xb<sp/>+<sp/>xd)<sp/>)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="231"><highlight class="normal"><sp/><sp/><sp/><sp/>T<sp/>=<sp/>__QADD16(T,<sp/>U);</highlight></codeline>
<codeline lineno="232"><highlight class="normal"></highlight></codeline>
<codeline lineno="233"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/><sp/>writing<sp/>the<sp/>butterfly<sp/>processed<sp/>i0<sp/>sample<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="234"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>xa&apos;<sp/>=<sp/>xa<sp/>+<sp/>xb<sp/>+<sp/>xc<sp/>+<sp/>xd<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="235"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>ya&apos;<sp/>=<sp/>ya<sp/>+<sp/>yb<sp/>+<sp/>yc<sp/>+<sp/>yd<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="236"><highlight class="normal"><sp/><sp/><sp/><sp/>write_q15x2_ia<sp/>(&amp;pSi0,<sp/>__SHADD16(R,<sp/>T));</highlight></codeline>
<codeline lineno="237"><highlight class="normal"></highlight></codeline>
<codeline lineno="238"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>R<sp/>=<sp/>packed((ya<sp/>+<sp/>yc)<sp/>-<sp/>(yb<sp/>+<sp/>yd),<sp/>(xa<sp/>+<sp/>xc)-<sp/>(xb<sp/>+<sp/>xd))<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="239"><highlight class="normal"><sp/><sp/><sp/><sp/>R<sp/>=<sp/>__QSUB16(R,<sp/>T);</highlight></codeline>
<codeline lineno="240"><highlight class="normal"></highlight></codeline>
<codeline lineno="241"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>co2<sp/>&amp;<sp/>si2<sp/>are<sp/>read<sp/>from<sp/>SIMD<sp/>Coefficient<sp/>pointer<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="242"><highlight class="normal"><sp/><sp/><sp/><sp/>C2<sp/>=<sp/>read_q15x2<sp/>((q15_t<sp/>*)<sp/>pCoef16<sp/>+<sp/>(4U<sp/>*<sp/>ic));</highlight></codeline>
<codeline lineno="243"><highlight class="normal"></highlight></codeline>
<codeline lineno="244"><highlight class="normal"></highlight><highlight class="preprocessor">#ifndef<sp/>RISCV_MATH_BIG_ENDIAN</highlight></codeline>
<codeline lineno="245"><highlight class="preprocessor"></highlight><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>xc&apos;<sp/>=<sp/>(xa-xb+xc-xd)*<sp/>co2<sp/>+<sp/>(ya-yb+yc-yd)*<sp/>(si2)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="246"><highlight class="normal"><sp/><sp/><sp/><sp/>out1<sp/>=<sp/>__SMUAD(C2,<sp/>R)<sp/>&gt;&gt;<sp/>16U;</highlight></codeline>
<codeline lineno="247"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>yc&apos;<sp/>=<sp/>(ya-yb+yc-yd)*<sp/>co2<sp/>-<sp/>(xa-xb+xc-xd)*<sp/>(si2)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="248"><highlight class="normal"><sp/><sp/><sp/><sp/>out2<sp/>=<sp/>__SMUSDX(C2,<sp/>R);</highlight></codeline>
<codeline lineno="249"><highlight class="normal"></highlight><highlight class="preprocessor">#else</highlight></codeline>
<codeline lineno="250"><highlight class="preprocessor"></highlight><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>xc&apos;<sp/>=<sp/>(ya-yb+yc-yd)*<sp/>co2<sp/>-<sp/>(xa-xb+xc-xd)*<sp/>(si2)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="251"><highlight class="normal"><sp/><sp/><sp/><sp/>out1<sp/>=<sp/>__SMUSDX(R,<sp/>C2)<sp/>&gt;&gt;<sp/>16U;</highlight></codeline>
<codeline lineno="252"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>yc&apos;<sp/>=<sp/>(xa-xb+xc-xd)*<sp/>co2<sp/>+<sp/>(ya-yb+yc-yd)*<sp/>(si2)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="253"><highlight class="normal"><sp/><sp/><sp/><sp/>out2<sp/>=<sp/>__SMUAD(C2,<sp/>R);</highlight></codeline>
<codeline lineno="254"><highlight class="normal"></highlight><highlight class="preprocessor">#endif<sp/></highlight><highlight class="comment">/*<sp/>#ifndef<sp/>RISCV_MATH_BIG_ENDIAN<sp/>*/</highlight><highlight class="preprocessor"></highlight></codeline>
<codeline lineno="255"><highlight class="preprocessor"></highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="256"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/><sp/>Reading<sp/>i0+fftLen/4<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="257"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>T<sp/>=<sp/>packed(yb,<sp/>xb)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="258"><highlight class="normal"><sp/><sp/><sp/><sp/>T<sp/>=<sp/>read_q15x2<sp/>(pSi1);</highlight></codeline>
<codeline lineno="259"><highlight class="normal"><sp/><sp/><sp/><sp/>T<sp/>=<sp/>__SHADD16(T,<sp/>0);</highlight></codeline>
<codeline lineno="260"><highlight class="normal"><sp/><sp/><sp/><sp/>T<sp/>=<sp/>__SHADD16(T,<sp/>0);</highlight></codeline>
<codeline lineno="261"><highlight class="normal"></highlight></codeline>
<codeline lineno="262"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>writing<sp/>the<sp/>butterfly<sp/>processed<sp/>i0<sp/>+<sp/>fftLen/4<sp/>sample<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="263"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>writing<sp/>output(xc&apos;,<sp/>yc&apos;)<sp/>in<sp/>little<sp/>endian<sp/>format<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="264"><highlight class="normal"><sp/><sp/><sp/><sp/>write_q15x2_ia<sp/>(&amp;pSi1,<sp/>(q31_t)<sp/>((out2)<sp/>&amp;<sp/>0xFFFF0000)<sp/>|<sp/>(out1<sp/>&amp;<sp/>0x0000FFFF));</highlight></codeline>
<codeline lineno="265"><highlight class="normal"></highlight></codeline>
<codeline lineno="266"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/><sp/>Butterfly<sp/>calculations<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="267"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>U<sp/>=<sp/>packed(yd,<sp/>xd)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="268"><highlight class="normal"><sp/><sp/><sp/><sp/>U<sp/>=<sp/>read_q15x2<sp/>(pSi3);</highlight></codeline>
<codeline lineno="269"><highlight class="normal"><sp/><sp/><sp/><sp/>U<sp/>=<sp/>__SHADD16(U,<sp/>0);</highlight></codeline>
<codeline lineno="270"><highlight class="normal"><sp/><sp/><sp/><sp/>U<sp/>=<sp/>__SHADD16(U,<sp/>0);</highlight></codeline>
<codeline lineno="271"><highlight class="normal"></highlight></codeline>
<codeline lineno="272"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>T<sp/>=<sp/>packed(yb-yd,<sp/>xb-xd)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="273"><highlight class="normal"><sp/><sp/><sp/><sp/>T<sp/>=<sp/>__QSUB16(T,<sp/>U);</highlight></codeline>
<codeline lineno="274"><highlight class="normal"></highlight></codeline>
<codeline lineno="275"><highlight class="normal"></highlight><highlight class="preprocessor">#ifndef<sp/>RISCV_MATH_BIG_ENDIAN</highlight></codeline>
<codeline lineno="276"><highlight class="preprocessor"></highlight><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>R<sp/>=<sp/>packed((ya-yc)<sp/>+<sp/>(xb-<sp/>xd)<sp/>,<sp/>(xa-xc)<sp/>-<sp/>(yb-yd))<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="277"><highlight class="normal"><sp/><sp/><sp/><sp/>R<sp/>=<sp/>__QASX(S,<sp/>T);</highlight></codeline>
<codeline lineno="278"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>S<sp/>=<sp/>packed((ya-yc)<sp/>-<sp/>(xb-<sp/>xd),<sp/><sp/>(xa-xc)<sp/>+<sp/>(yb-yd))<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="279"><highlight class="normal"><sp/><sp/><sp/><sp/>S<sp/>=<sp/>__QSAX(S,<sp/>T);</highlight></codeline>
<codeline lineno="280"><highlight class="normal"></highlight><highlight class="preprocessor">#else</highlight></codeline>
<codeline lineno="281"><highlight class="preprocessor"></highlight><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>R<sp/>=<sp/>packed((ya-yc)<sp/>+<sp/>(xb-<sp/>xd)<sp/>,<sp/>(xa-xc)<sp/>-<sp/>(yb-yd))<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="282"><highlight class="normal"><sp/><sp/><sp/><sp/>R<sp/>=<sp/>__QSAX(S,<sp/>T);</highlight></codeline>
<codeline lineno="283"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>S<sp/>=<sp/>packed((ya-yc)<sp/>-<sp/>(xb-<sp/>xd),<sp/><sp/>(xa-xc)<sp/>+<sp/>(yb-yd))<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="284"><highlight class="normal"><sp/><sp/><sp/><sp/>S<sp/>=<sp/>__QASX(S,<sp/>T);</highlight></codeline>
<codeline lineno="285"><highlight class="normal"></highlight><highlight class="preprocessor">#endif<sp/></highlight><highlight class="comment">/*<sp/>#ifndef<sp/>RISCV_MATH_BIG_ENDIAN<sp/>*/</highlight><highlight class="preprocessor"></highlight></codeline>
<codeline lineno="286"><highlight class="preprocessor"></highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="287"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>co1<sp/>&amp;<sp/>si1<sp/>are<sp/>read<sp/>from<sp/>SIMD<sp/>Coefficient<sp/>pointer<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="288"><highlight class="normal"><sp/><sp/><sp/><sp/>C1<sp/>=<sp/>read_q15x2<sp/>((q15_t<sp/>*)<sp/>pCoef16<sp/>+<sp/>(2U<sp/>*<sp/>ic));</highlight></codeline>
<codeline lineno="289"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/><sp/>Butterfly<sp/>process<sp/>for<sp/>the<sp/>i0+fftLen/2<sp/>sample<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="290"><highlight class="normal"></highlight></codeline>
<codeline lineno="291"><highlight class="normal"></highlight><highlight class="preprocessor">#ifndef<sp/>RISCV_MATH_BIG_ENDIAN</highlight></codeline>
<codeline lineno="292"><highlight class="preprocessor"></highlight><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>xb&apos;<sp/>=<sp/>(xa+yb-xc-yd)*<sp/>co1<sp/>+<sp/>(ya-xb-yc+xd)*<sp/>(si1)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="293"><highlight class="normal"><sp/><sp/><sp/><sp/>out1<sp/>=<sp/>__SMUAD(C1,<sp/>S)<sp/>&gt;&gt;<sp/>16U;</highlight></codeline>
<codeline lineno="294"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>yb&apos;<sp/>=<sp/>(ya-xb-yc+xd)*<sp/>co1<sp/>-<sp/>(xa+yb-xc-yd)*<sp/>(si1)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="295"><highlight class="normal"><sp/><sp/><sp/><sp/>out2<sp/>=<sp/>__SMUSDX(C1,<sp/>S);</highlight></codeline>
<codeline lineno="296"><highlight class="normal"></highlight><highlight class="preprocessor">#else</highlight></codeline>
<codeline lineno="297"><highlight class="preprocessor"></highlight><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>xb&apos;<sp/>=<sp/>(ya-xb-yc+xd)*<sp/>co1<sp/>-<sp/>(xa+yb-xc-yd)*<sp/>(si1)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="298"><highlight class="normal"><sp/><sp/><sp/><sp/>out1<sp/>=<sp/>__SMUSDX(S,<sp/>C1)<sp/>&gt;&gt;<sp/>16U;</highlight></codeline>
<codeline lineno="299"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>yb&apos;<sp/>=<sp/>(xa+yb-xc-yd)*<sp/>co1<sp/>+<sp/>(ya-xb-yc+xd)*<sp/>(si1)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="300"><highlight class="normal"><sp/><sp/><sp/><sp/>out2<sp/>=<sp/>__SMUAD(C1,<sp/>S);</highlight></codeline>
<codeline lineno="301"><highlight class="normal"></highlight><highlight class="preprocessor">#endif<sp/></highlight><highlight class="comment">/*<sp/>#ifndef<sp/>RISCV_MATH_BIG_ENDIAN<sp/>*/</highlight><highlight class="preprocessor"></highlight></codeline>
<codeline lineno="302"><highlight class="preprocessor"></highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="303"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>writing<sp/>output(xb&apos;,<sp/>yb&apos;)<sp/>in<sp/>little<sp/>endian<sp/>format<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="304"><highlight class="normal"><sp/><sp/><sp/><sp/>write_q15x2_ia<sp/>(&amp;pSi2,<sp/>((out2)<sp/>&amp;<sp/>0xFFFF0000)<sp/>|<sp/>((out1)<sp/>&amp;<sp/>0x0000FFFF));</highlight></codeline>
<codeline lineno="305"><highlight class="normal"></highlight></codeline>
<codeline lineno="306"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>co3<sp/>&amp;<sp/>si3<sp/>are<sp/>read<sp/>from<sp/>SIMD<sp/>Coefficient<sp/>pointer<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="307"><highlight class="normal"><sp/><sp/><sp/><sp/>C3<sp/>=<sp/>read_q15x2<sp/>((q15_t<sp/>*)<sp/>pCoef16<sp/>+<sp/>(6U<sp/>*<sp/>ic));</highlight></codeline>
<codeline lineno="308"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/><sp/>Butterfly<sp/>process<sp/>for<sp/>the<sp/>i0+3fftLen/4<sp/>sample<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="309"><highlight class="normal"></highlight></codeline>
<codeline lineno="310"><highlight class="normal"></highlight><highlight class="preprocessor">#ifndef<sp/>RISCV_MATH_BIG_ENDIAN</highlight></codeline>
<codeline lineno="311"><highlight class="preprocessor"></highlight><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>xd&apos;<sp/>=<sp/>(xa-yb-xc+yd)*<sp/>co3<sp/>+<sp/>(ya+xb-yc-xd)*<sp/>(si3)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="312"><highlight class="normal"><sp/><sp/><sp/><sp/>out1<sp/>=<sp/>__SMUAD(C3,<sp/>R)<sp/>&gt;&gt;<sp/>16U;</highlight></codeline>
<codeline lineno="313"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>yd&apos;<sp/>=<sp/>(ya+xb-yc-xd)*<sp/>co3<sp/>-<sp/>(xa-yb-xc+yd)*<sp/>(si3)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="314"><highlight class="normal"><sp/><sp/><sp/><sp/>out2<sp/>=<sp/>__SMUSDX(C3,<sp/>R);</highlight></codeline>
<codeline lineno="315"><highlight class="normal"></highlight><highlight class="preprocessor">#else</highlight></codeline>
<codeline lineno="316"><highlight class="preprocessor"></highlight><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>xd&apos;<sp/>=<sp/>(ya+xb-yc-xd)*<sp/>co3<sp/>-<sp/>(xa-yb-xc+yd)*<sp/>(si3)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="317"><highlight class="normal"><sp/><sp/><sp/><sp/>out1<sp/>=<sp/>__SMUSDX(R,<sp/>C3)<sp/>&gt;&gt;<sp/>16U;</highlight></codeline>
<codeline lineno="318"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>yd&apos;<sp/>=<sp/>(xa-yb-xc+yd)*<sp/>co3<sp/>+<sp/>(ya+xb-yc-xd)*<sp/>(si3)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="319"><highlight class="normal"><sp/><sp/><sp/><sp/>out2<sp/>=<sp/>__SMUAD(C3,<sp/>R);</highlight></codeline>
<codeline lineno="320"><highlight class="normal"></highlight><highlight class="preprocessor">#endif<sp/></highlight><highlight class="comment">/*<sp/>#ifndef<sp/>RISCV_MATH_BIG_ENDIAN<sp/>*/</highlight><highlight class="preprocessor"></highlight></codeline>
<codeline lineno="321"><highlight class="preprocessor"></highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="322"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>writing<sp/>output(xd&apos;,<sp/>yd&apos;)<sp/>in<sp/>little<sp/>endian<sp/>format<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="323"><highlight class="normal"><sp/><sp/><sp/><sp/>write_q15x2_ia<sp/>(&amp;pSi3,<sp/>((out2)<sp/>&amp;<sp/>0xFFFF0000)<sp/>|<sp/>(out1<sp/>&amp;<sp/>0x0000FFFF));</highlight></codeline>
<codeline lineno="324"><highlight class="normal"></highlight></codeline>
<codeline lineno="325"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/><sp/>Twiddle<sp/>coefficients<sp/>index<sp/>modifier<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="326"><highlight class="normal"><sp/><sp/><sp/><sp/>ic<sp/>=<sp/>ic<sp/>+<sp/>twidCoefModifier;</highlight></codeline>
<codeline lineno="327"><highlight class="normal"></highlight></codeline>
<codeline lineno="328"><highlight class="normal"><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">while</highlight><highlight class="normal"><sp/>(--j);</highlight></codeline>
<codeline lineno="329"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>data<sp/>is<sp/>in<sp/>4.11(q11)<sp/>format<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="330"><highlight class="normal"></highlight></codeline>
<codeline lineno="331"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>end<sp/>of<sp/>first<sp/>stage<sp/>process<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="332"><highlight class="normal"></highlight></codeline>
<codeline lineno="333"><highlight class="normal"></highlight></codeline>
<codeline lineno="334"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>start<sp/>of<sp/>middle<sp/>stage<sp/>process<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="335"><highlight class="normal"></highlight></codeline>
<codeline lineno="336"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/><sp/>Twiddle<sp/>coefficients<sp/>index<sp/>modifier<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="337"><highlight class="normal"><sp/><sp/>twidCoefModifier<sp/>&lt;&lt;=<sp/>2U;</highlight></codeline>
<codeline lineno="338"><highlight class="normal"></highlight></codeline>
<codeline lineno="339"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/><sp/>Calculation<sp/>of<sp/>Middle<sp/>stage<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="340"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(k<sp/>=<sp/>fftLen<sp/>/<sp/>4U;<sp/>k<sp/>&gt;<sp/>4U;<sp/>k<sp/>&gt;&gt;=<sp/>2U)</highlight></codeline>
<codeline lineno="341"><highlight class="normal"><sp/><sp/>{</highlight></codeline>
<codeline lineno="342"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/><sp/>Initializations<sp/>for<sp/>the<sp/>middle<sp/>stage<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="343"><highlight class="normal"><sp/><sp/><sp/><sp/>n1<sp/>=<sp/>n2;</highlight></codeline>
<codeline lineno="344"><highlight class="normal"><sp/><sp/><sp/><sp/>n2<sp/>&gt;&gt;=<sp/>2U;</highlight></codeline>
<codeline lineno="345"><highlight class="normal"><sp/><sp/><sp/><sp/>ic<sp/>=<sp/>0U;</highlight></codeline>
<codeline lineno="346"><highlight class="normal"></highlight></codeline>
<codeline lineno="347"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(j<sp/>=<sp/>0U;<sp/>j<sp/>&lt;=<sp/>(n2<sp/>-<sp/>1U);<sp/>j++)</highlight></codeline>
<codeline lineno="348"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="349"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/><sp/>index<sp/>calculation<sp/>for<sp/>the<sp/>coefficients<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="350"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>C1<sp/>=<sp/>read_q15x2<sp/>((q15_t<sp/>*)<sp/>pCoef16<sp/>+<sp/>(2U<sp/>*<sp/>ic));</highlight></codeline>
<codeline lineno="351"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>C2<sp/>=<sp/>read_q15x2<sp/>((q15_t<sp/>*)<sp/>pCoef16<sp/>+<sp/>(4U<sp/>*<sp/>ic));</highlight></codeline>
<codeline lineno="352"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>C3<sp/>=<sp/>read_q15x2<sp/>((q15_t<sp/>*)<sp/>pCoef16<sp/>+<sp/>(6U<sp/>*<sp/>ic));</highlight></codeline>
<codeline lineno="353"><highlight class="normal"></highlight></codeline>
<codeline lineno="354"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/><sp/>Twiddle<sp/>coefficients<sp/>index<sp/>modifier<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="355"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>ic<sp/>=<sp/>ic<sp/>+<sp/>twidCoefModifier;</highlight></codeline>
<codeline lineno="356"><highlight class="normal"></highlight></codeline>
<codeline lineno="357"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>pSi0<sp/>=<sp/>pSrc16<sp/>+<sp/>2<sp/>*<sp/>j;</highlight></codeline>
<codeline lineno="358"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>pSi1<sp/>=<sp/>pSi0<sp/>+<sp/>2<sp/>*<sp/>n2;</highlight></codeline>
<codeline lineno="359"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>pSi2<sp/>=<sp/>pSi1<sp/>+<sp/>2<sp/>*<sp/>n2;</highlight></codeline>
<codeline lineno="360"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>pSi3<sp/>=<sp/>pSi2<sp/>+<sp/>2<sp/>*<sp/>n2;</highlight></codeline>
<codeline lineno="361"><highlight class="normal"></highlight></codeline>
<codeline lineno="362"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/><sp/>Butterfly<sp/>implementation<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="363"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(i0<sp/>=<sp/>j;<sp/>i0<sp/>&lt;<sp/>fftLen;<sp/>i0<sp/>+=<sp/>n1)</highlight></codeline>
<codeline lineno="364"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="365"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/><sp/>Reading<sp/>i0,<sp/>i0+fftLen/2<sp/>inputs<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="366"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Read<sp/>ya<sp/>(real),<sp/>xa(imag)<sp/>input<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="367"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>T<sp/>=<sp/>read_q15x2<sp/>(pSi0);</highlight></codeline>
<codeline lineno="368"><highlight class="normal"></highlight></codeline>
<codeline lineno="369"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Read<sp/>yc<sp/>(real),<sp/>xc(imag)<sp/>input<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="370"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>S<sp/>=<sp/>read_q15x2<sp/>(pSi2);</highlight></codeline>
<codeline lineno="371"><highlight class="normal"></highlight></codeline>
<codeline lineno="372"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>R<sp/>=<sp/>packed(<sp/>(ya<sp/>+<sp/>yc),<sp/>(xa<sp/>+<sp/>xc))<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="373"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>R<sp/>=<sp/>__QADD16(T,<sp/>S);</highlight></codeline>
<codeline lineno="374"><highlight class="normal"></highlight></codeline>
<codeline lineno="375"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>S<sp/>=<sp/>packed((ya<sp/>-<sp/>yc),<sp/>(xa<sp/>-<sp/>xc))<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="376"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>S<sp/>=<sp/>__QSUB16(T,<sp/>S);</highlight></codeline>
<codeline lineno="377"><highlight class="normal"></highlight></codeline>
<codeline lineno="378"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/><sp/>Reading<sp/>i0+fftLen/4<sp/>,<sp/>i0+3fftLen/4<sp/>inputs<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="379"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Read<sp/>yb<sp/>(real),<sp/>xb(imag)<sp/>input<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="380"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>T<sp/>=<sp/>read_q15x2<sp/>(pSi1);</highlight></codeline>
<codeline lineno="381"><highlight class="normal"></highlight></codeline>
<codeline lineno="382"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Read<sp/>yd<sp/>(real),<sp/>xd(imag)<sp/>input<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="383"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>U<sp/>=<sp/>read_q15x2<sp/>(pSi3);</highlight></codeline>
<codeline lineno="384"><highlight class="normal"></highlight></codeline>
<codeline lineno="385"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>T<sp/>=<sp/>packed(<sp/>(yb<sp/>+<sp/>yd),<sp/>(xb<sp/>+<sp/>xd))<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="386"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>T<sp/>=<sp/>__QADD16(T,<sp/>U);</highlight></codeline>
<codeline lineno="387"><highlight class="normal"></highlight></codeline>
<codeline lineno="388"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/><sp/>writing<sp/>the<sp/>butterfly<sp/>processed<sp/>i0<sp/>sample<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="389"><highlight class="normal"></highlight></codeline>
<codeline lineno="390"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>xa&apos;<sp/>=<sp/>xa<sp/>+<sp/>xb<sp/>+<sp/>xc<sp/>+<sp/>xd<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="391"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>ya&apos;<sp/>=<sp/>ya<sp/>+<sp/>yb<sp/>+<sp/>yc<sp/>+<sp/>yd<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="392"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>out1<sp/>=<sp/>__SHADD16(R,<sp/>T);</highlight></codeline>
<codeline lineno="393"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>out1<sp/>=<sp/>__SHADD16(out1,<sp/>0);</highlight></codeline>
<codeline lineno="394"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>write_q15x2<sp/>(pSi0,<sp/>out1);</highlight></codeline>
<codeline lineno="395"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pSi0<sp/>+=<sp/>2<sp/>*<sp/>n1;</highlight></codeline>
<codeline lineno="396"><highlight class="normal"></highlight></codeline>
<codeline lineno="397"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>R<sp/>=<sp/>packed(<sp/>(ya<sp/>+<sp/>yc)<sp/>-<sp/>(yb<sp/>+<sp/>yd),<sp/>(xa<sp/>+<sp/>xc)<sp/>-<sp/>(xb<sp/>+<sp/>xd))<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="398"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>R<sp/>=<sp/>__SHSUB16(R,<sp/>T);</highlight></codeline>
<codeline lineno="399"><highlight class="normal"></highlight></codeline>
<codeline lineno="400"><highlight class="normal"></highlight><highlight class="preprocessor">#ifndef<sp/>RISCV_MATH_BIG_ENDIAN</highlight></codeline>
<codeline lineno="401"><highlight class="preprocessor"></highlight><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>(ya-yb+yc-yd)*<sp/>(si2)<sp/>+<sp/>(xa-xb+xc-xd)*<sp/>co2<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="402"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>out1<sp/>=<sp/>__SMUAD(C2,<sp/>R)<sp/>&gt;&gt;<sp/>16U;</highlight></codeline>
<codeline lineno="403"><highlight class="normal"></highlight></codeline>
<codeline lineno="404"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>(ya-yb+yc-yd)*<sp/>co2<sp/>-<sp/>(xa-xb+xc-xd)*<sp/>(si2)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="405"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>out2<sp/>=<sp/>__SMUSDX(C2,<sp/>R);</highlight></codeline>
<codeline lineno="406"><highlight class="normal"></highlight><highlight class="preprocessor">#else</highlight></codeline>
<codeline lineno="407"><highlight class="preprocessor"></highlight><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>(ya-yb+yc-yd)*<sp/>co2<sp/>-<sp/>(xa-xb+xc-xd)*<sp/>(si2)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="408"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>out1<sp/>=<sp/>__SMUSDX(R,<sp/>C2)<sp/>&gt;&gt;<sp/>16U;</highlight></codeline>
<codeline lineno="409"><highlight class="normal"></highlight></codeline>
<codeline lineno="410"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>(ya-yb+yc-yd)*<sp/>(si2)<sp/>+<sp/>(xa-xb+xc-xd)*<sp/>co2<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="411"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>out2<sp/>=<sp/>__SMUAD(C2,<sp/>R);</highlight></codeline>
<codeline lineno="412"><highlight class="normal"></highlight><highlight class="preprocessor">#endif<sp/></highlight><highlight class="comment">/*<sp/>#ifndef<sp/>RISCV_MATH_BIG_ENDIAN<sp/>*/</highlight><highlight class="preprocessor"></highlight></codeline>
<codeline lineno="413"><highlight class="preprocessor"></highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="414"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/><sp/>Reading<sp/>i0+3fftLen/4<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="415"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Read<sp/>yb<sp/>(real),<sp/>xb(imag)<sp/>input<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="416"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>T<sp/>=<sp/>read_q15x2<sp/>(pSi1);</highlight></codeline>
<codeline lineno="417"><highlight class="normal"></highlight></codeline>
<codeline lineno="418"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/><sp/>writing<sp/>the<sp/>butterfly<sp/>processed<sp/>i0<sp/>+<sp/>fftLen/4<sp/>sample<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="419"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>xc&apos;<sp/>=<sp/>(xa-xb+xc-xd)*<sp/>co2<sp/>+<sp/>(ya-yb+yc-yd)*<sp/>(si2)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="420"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>yc&apos;<sp/>=<sp/>(ya-yb+yc-yd)*<sp/>co2<sp/>-<sp/>(xa-xb+xc-xd)*<sp/>(si2)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="421"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>write_q15x2<sp/>(pSi1,<sp/>((out2)<sp/>&amp;<sp/>0xFFFF0000)<sp/>|<sp/>(out1<sp/>&amp;<sp/>0x0000FFFF));</highlight></codeline>
<codeline lineno="422"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pSi1<sp/>+=<sp/>2<sp/>*<sp/>n1;</highlight></codeline>
<codeline lineno="423"><highlight class="normal"></highlight></codeline>
<codeline lineno="424"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/><sp/>Butterfly<sp/>calculations<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="425"><highlight class="normal"></highlight></codeline>
<codeline lineno="426"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Read<sp/>yd<sp/>(real),<sp/>xd(imag)<sp/>input<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="427"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>U<sp/>=<sp/>read_q15x2<sp/>(pSi3);</highlight></codeline>
<codeline lineno="428"><highlight class="normal"></highlight></codeline>
<codeline lineno="429"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>T<sp/>=<sp/>packed(yb-yd,<sp/>xb-xd)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="430"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>T<sp/>=<sp/>__QSUB16(T,<sp/>U);</highlight></codeline>
<codeline lineno="431"><highlight class="normal"></highlight></codeline>
<codeline lineno="432"><highlight class="normal"></highlight><highlight class="preprocessor">#ifndef<sp/>RISCV_MATH_BIG_ENDIAN</highlight></codeline>
<codeline lineno="433"><highlight class="preprocessor"></highlight><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>R<sp/>=<sp/>packed((ya-yc)<sp/>+<sp/>(xb-<sp/>xd)<sp/>,<sp/>(xa-xc)<sp/>-<sp/>(yb-yd))<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="434"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>R<sp/>=<sp/>__SHASX(S,<sp/>T);</highlight></codeline>
<codeline lineno="435"><highlight class="normal"></highlight></codeline>
<codeline lineno="436"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>S<sp/>=<sp/>packed((ya-yc)<sp/>-<sp/>(xb-<sp/>xd),<sp/><sp/>(xa-xc)<sp/>+<sp/>(yb-yd))<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="437"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>S<sp/>=<sp/>__SHSAX(S,<sp/>T);</highlight></codeline>
<codeline lineno="438"><highlight class="normal"></highlight></codeline>
<codeline lineno="439"><highlight class="normal"></highlight></codeline>
<codeline lineno="440"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/><sp/>Butterfly<sp/>process<sp/>for<sp/>the<sp/>i0+fftLen/2<sp/>sample<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="441"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>out1<sp/>=<sp/>__SMUAD(C1,<sp/>S)<sp/>&gt;&gt;<sp/>16U;</highlight></codeline>
<codeline lineno="442"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>out2<sp/>=<sp/>__SMUSDX(C1,<sp/>S);</highlight></codeline>
<codeline lineno="443"><highlight class="normal"></highlight><highlight class="preprocessor">#else</highlight></codeline>
<codeline lineno="444"><highlight class="preprocessor"></highlight><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>R<sp/>=<sp/>packed((ya-yc)<sp/>+<sp/>(xb-<sp/>xd)<sp/>,<sp/>(xa-xc)<sp/>-<sp/>(yb-yd))<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="445"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>R<sp/>=<sp/>__SHSAX(S,<sp/>T);</highlight></codeline>
<codeline lineno="446"><highlight class="normal"></highlight></codeline>
<codeline lineno="447"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>S<sp/>=<sp/>packed((ya-yc)<sp/>-<sp/>(xb-<sp/>xd),<sp/><sp/>(xa-xc)<sp/>+<sp/>(yb-yd))<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="448"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>S<sp/>=<sp/>__SHASX(S,<sp/>T);</highlight></codeline>
<codeline lineno="449"><highlight class="normal"></highlight></codeline>
<codeline lineno="450"><highlight class="normal"></highlight></codeline>
<codeline lineno="451"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/><sp/>Butterfly<sp/>process<sp/>for<sp/>the<sp/>i0+fftLen/2<sp/>sample<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="452"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>out1<sp/>=<sp/>__SMUSDX(S,<sp/>C1)<sp/>&gt;&gt;<sp/>16U;</highlight></codeline>
<codeline lineno="453"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>out2<sp/>=<sp/>__SMUAD(C1,<sp/>S);</highlight></codeline>
<codeline lineno="454"><highlight class="normal"></highlight><highlight class="preprocessor">#endif<sp/></highlight><highlight class="comment">/*<sp/>#ifndef<sp/>RISCV_MATH_BIG_ENDIAN<sp/>*/</highlight><highlight class="preprocessor"></highlight></codeline>
<codeline lineno="455"><highlight class="preprocessor"></highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="456"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>xb&apos;<sp/>=<sp/>(xa+yb-xc-yd)*<sp/>co1<sp/>+<sp/>(ya-xb-yc+xd)*<sp/>(si1)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="457"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>yb&apos;<sp/>=<sp/>(ya-xb-yc+xd)*<sp/>co1<sp/>-<sp/>(xa+yb-xc-yd)*<sp/>(si1)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="458"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>write_q15x2<sp/>(pSi2,<sp/>((out2)<sp/>&amp;<sp/>0xFFFF0000)<sp/>|<sp/>(out1<sp/>&amp;<sp/>0x0000FFFF));</highlight></codeline>
<codeline lineno="459"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pSi2<sp/>+=<sp/>2<sp/>*<sp/>n1;</highlight></codeline>
<codeline lineno="460"><highlight class="normal"></highlight></codeline>
<codeline lineno="461"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/><sp/>Butterfly<sp/>process<sp/>for<sp/>the<sp/>i0+3fftLen/4<sp/>sample<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="462"><highlight class="normal"></highlight></codeline>
<codeline lineno="463"><highlight class="normal"></highlight><highlight class="preprocessor">#ifndef<sp/>RISCV_MATH_BIG_ENDIAN</highlight></codeline>
<codeline lineno="464"><highlight class="preprocessor"></highlight><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>out1<sp/>=<sp/>__SMUAD(C3,<sp/>R)<sp/>&gt;&gt;<sp/>16U;</highlight></codeline>
<codeline lineno="465"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>out2<sp/>=<sp/>__SMUSDX(C3,<sp/>R);</highlight></codeline>
<codeline lineno="466"><highlight class="normal"></highlight><highlight class="preprocessor">#else</highlight></codeline>
<codeline lineno="467"><highlight class="preprocessor"></highlight><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>out1<sp/>=<sp/>__SMUSDX(R,<sp/>C3)<sp/>&gt;&gt;<sp/>16U;</highlight></codeline>
<codeline lineno="468"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>out2<sp/>=<sp/>__SMUAD(C3,<sp/>R);</highlight></codeline>
<codeline lineno="469"><highlight class="normal"></highlight><highlight class="preprocessor">#endif<sp/></highlight><highlight class="comment">/*<sp/>#ifndef<sp/>RISCV_MATH_BIG_ENDIAN<sp/>*/</highlight><highlight class="preprocessor"></highlight></codeline>
<codeline lineno="470"><highlight class="preprocessor"></highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="471"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>xd&apos;<sp/>=<sp/>(xa-yb-xc+yd)*<sp/>co3<sp/>+<sp/>(ya+xb-yc-xd)*<sp/>(si3)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="472"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>yd&apos;<sp/>=<sp/>(ya+xb-yc-xd)*<sp/>co3<sp/>-<sp/>(xa-yb-xc+yd)*<sp/>(si3)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="473"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>write_q15x2<sp/>(pSi3,<sp/>((out2)<sp/>&amp;<sp/>0xFFFF0000)<sp/>|<sp/>(out1<sp/>&amp;<sp/>0x0000FFFF));</highlight></codeline>
<codeline lineno="474"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pSi3<sp/>+=<sp/>2<sp/>*<sp/>n1;</highlight></codeline>
<codeline lineno="475"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="476"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="477"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/><sp/>Twiddle<sp/>coefficients<sp/>index<sp/>modifier<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="478"><highlight class="normal"><sp/><sp/><sp/><sp/>twidCoefModifier<sp/>&lt;&lt;=<sp/>2U;</highlight></codeline>
<codeline lineno="479"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="480"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>end<sp/>of<sp/>middle<sp/>stage<sp/>process<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="481"><highlight class="normal"></highlight></codeline>
<codeline lineno="482"><highlight class="normal"></highlight></codeline>
<codeline lineno="483"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>data<sp/>is<sp/>in<sp/>10.6(q6)<sp/>format<sp/>for<sp/>the<sp/>1024<sp/>point<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="484"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>data<sp/>is<sp/>in<sp/>8.8(q8)<sp/>format<sp/>for<sp/>the<sp/>256<sp/>point<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="485"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>data<sp/>is<sp/>in<sp/>6.10(q10)<sp/>format<sp/>for<sp/>the<sp/>64<sp/>point<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="486"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>data<sp/>is<sp/>in<sp/>4.12(q12)<sp/>format<sp/>for<sp/>the<sp/>16<sp/>point<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="487"><highlight class="normal"></highlight></codeline>
<codeline lineno="488"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/><sp/>Initializations<sp/>for<sp/>the<sp/>last<sp/>stage<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="489"><highlight class="normal"><sp/><sp/>j<sp/>=<sp/>fftLen<sp/>&gt;&gt;<sp/>2;</highlight></codeline>
<codeline lineno="490"><highlight class="normal"></highlight></codeline>
<codeline lineno="491"><highlight class="normal"><sp/><sp/>ptr1<sp/>=<sp/>&amp;pSrc16[0];</highlight></codeline>
<codeline lineno="492"><highlight class="normal"></highlight></codeline>
<codeline lineno="493"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>start<sp/>of<sp/>last<sp/>stage<sp/>process<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="494"><highlight class="normal"></highlight></codeline>
<codeline lineno="495"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/><sp/>Butterfly<sp/>implementation<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="496"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">do</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="497"><highlight class="normal"><sp/><sp/>{</highlight></codeline>
<codeline lineno="498"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Read<sp/>xa<sp/>(real),<sp/>ya(imag)<sp/>input<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="499"><highlight class="normal"><sp/><sp/><sp/><sp/>xaya<sp/>=<sp/>read_q15x2_ia<sp/>((q15_t<sp/>**)<sp/>&amp;ptr1);</highlight></codeline>
<codeline lineno="500"><highlight class="normal"></highlight></codeline>
<codeline lineno="501"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Read<sp/>xb<sp/>(real),<sp/>yb(imag)<sp/>input<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="502"><highlight class="normal"><sp/><sp/><sp/><sp/>xbyb<sp/>=<sp/>read_q15x2_ia<sp/>((q15_t<sp/>**)<sp/>&amp;ptr1);</highlight></codeline>
<codeline lineno="503"><highlight class="normal"></highlight></codeline>
<codeline lineno="504"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Read<sp/>xc<sp/>(real),<sp/>yc(imag)<sp/>input<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="505"><highlight class="normal"><sp/><sp/><sp/><sp/>xcyc<sp/>=<sp/>read_q15x2_ia<sp/>((q15_t<sp/>**)<sp/>&amp;ptr1);</highlight></codeline>
<codeline lineno="506"><highlight class="normal"></highlight></codeline>
<codeline lineno="507"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Read<sp/>xd<sp/>(real),<sp/>yd(imag)<sp/>input<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="508"><highlight class="normal"><sp/><sp/><sp/><sp/>xdyd<sp/>=<sp/>read_q15x2_ia<sp/>((q15_t<sp/>**)<sp/>&amp;ptr1);</highlight></codeline>
<codeline lineno="509"><highlight class="normal"></highlight></codeline>
<codeline lineno="510"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>R<sp/>=<sp/>packed((ya<sp/>+<sp/>yc),<sp/>(xa<sp/>+<sp/>xc))<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="511"><highlight class="normal"><sp/><sp/><sp/><sp/>R<sp/>=<sp/>__QADD16(xaya,<sp/>xcyc);</highlight></codeline>
<codeline lineno="512"><highlight class="normal"></highlight></codeline>
<codeline lineno="513"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>T<sp/>=<sp/>packed((yb<sp/>+<sp/>yd),<sp/>(xb<sp/>+<sp/>xd))<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="514"><highlight class="normal"><sp/><sp/><sp/><sp/>T<sp/>=<sp/>__QADD16(xbyb,<sp/>xdyd);</highlight></codeline>
<codeline lineno="515"><highlight class="normal"></highlight></codeline>
<codeline lineno="516"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>pointer<sp/>updation<sp/>for<sp/>writing<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="517"><highlight class="normal"><sp/><sp/><sp/><sp/>ptr1<sp/>=<sp/>ptr1<sp/>-<sp/>8U;</highlight></codeline>
<codeline lineno="518"><highlight class="normal"></highlight></codeline>
<codeline lineno="519"><highlight class="normal"></highlight></codeline>
<codeline lineno="520"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>xa&apos;<sp/>=<sp/>xa<sp/>+<sp/>xb<sp/>+<sp/>xc<sp/>+<sp/>xd<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="521"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>ya&apos;<sp/>=<sp/>ya<sp/>+<sp/>yb<sp/>+<sp/>yc<sp/>+<sp/>yd<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="522"><highlight class="normal"><sp/><sp/><sp/><sp/>write_q15x2_ia<sp/>(&amp;ptr1,<sp/>__SHADD16(R,<sp/>T));</highlight></codeline>
<codeline lineno="523"><highlight class="normal"></highlight></codeline>
<codeline lineno="524"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>T<sp/>=<sp/>packed((yb<sp/>+<sp/>yd),<sp/>(xb<sp/>+<sp/>xd))<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="525"><highlight class="normal"><sp/><sp/><sp/><sp/>T<sp/>=<sp/>__QADD16(xbyb,<sp/>xdyd);</highlight></codeline>
<codeline lineno="526"><highlight class="normal"></highlight></codeline>
<codeline lineno="527"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>xc&apos;<sp/>=<sp/>(xa-xb+xc-xd)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="528"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>yc&apos;<sp/>=<sp/>(ya-yb+yc-yd)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="529"><highlight class="normal"><sp/><sp/><sp/><sp/>write_q15x2_ia<sp/>(&amp;ptr1,<sp/>__SHSUB16(R,<sp/>T));</highlight></codeline>
<codeline lineno="530"><highlight class="normal"></highlight></codeline>
<codeline lineno="531"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>S<sp/>=<sp/>packed((ya<sp/>-<sp/>yc),<sp/>(xa<sp/>-<sp/>xc))<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="532"><highlight class="normal"><sp/><sp/><sp/><sp/>S<sp/>=<sp/>__QSUB16(xaya,<sp/>xcyc);</highlight></codeline>
<codeline lineno="533"><highlight class="normal"></highlight></codeline>
<codeline lineno="534"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Read<sp/>yd<sp/>(real),<sp/>xd(imag)<sp/>input<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="535"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>T<sp/>=<sp/>packed(<sp/>(yb<sp/>-<sp/>yd),<sp/>(xb<sp/>-<sp/>xd))<sp/><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="536"><highlight class="normal"><sp/><sp/><sp/><sp/>U<sp/>=<sp/>__QSUB16(xbyb,<sp/>xdyd);</highlight></codeline>
<codeline lineno="537"><highlight class="normal"></highlight></codeline>
<codeline lineno="538"><highlight class="normal"></highlight><highlight class="preprocessor">#ifndef<sp/>RISCV_MATH_BIG_ENDIAN</highlight></codeline>
<codeline lineno="539"><highlight class="preprocessor"></highlight><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>xb&apos;<sp/>=<sp/>(xa+yb-xc-yd)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="540"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>yb&apos;<sp/>=<sp/>(ya-xb-yc+xd)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="541"><highlight class="normal"><sp/><sp/><sp/><sp/>write_q15x2_ia<sp/>(&amp;ptr1,<sp/>__SHSAX(S,<sp/>U));</highlight></codeline>
<codeline lineno="542"><highlight class="normal"></highlight></codeline>
<codeline lineno="543"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>xd&apos;<sp/>=<sp/>(xa-yb-xc+yd)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="544"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>yd&apos;<sp/>=<sp/>(ya+xb-yc-xd)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="545"><highlight class="normal"><sp/><sp/><sp/><sp/>write_q15x2_ia<sp/>(&amp;ptr1,<sp/>__SHASX(S,<sp/>U));</highlight></codeline>
<codeline lineno="546"><highlight class="normal"></highlight><highlight class="preprocessor">#else</highlight></codeline>
<codeline lineno="547"><highlight class="preprocessor"></highlight><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>xb&apos;<sp/>=<sp/>(xa+yb-xc-yd)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="548"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>yb&apos;<sp/>=<sp/>(ya-xb-yc+xd)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="549"><highlight class="normal"><sp/><sp/><sp/><sp/>write_q15x2_ia<sp/>(&amp;ptr1,<sp/>__SHASX(S,<sp/>U));</highlight></codeline>
<codeline lineno="550"><highlight class="normal"></highlight></codeline>
<codeline lineno="551"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>xd&apos;<sp/>=<sp/>(xa-yb-xc+yd)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="552"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>yd&apos;<sp/>=<sp/>(ya+xb-yc-xd)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="553"><highlight class="normal"><sp/><sp/><sp/><sp/>write_q15x2_ia<sp/>(&amp;ptr1,<sp/>__SHSAX(S,<sp/>U));</highlight></codeline>
<codeline lineno="554"><highlight class="normal"></highlight><highlight class="preprocessor">#endif<sp/></highlight><highlight class="comment">/*<sp/>#ifndef<sp/>RISCV_MATH_BIG_ENDIAN<sp/>*/</highlight><highlight class="preprocessor"></highlight></codeline>
<codeline lineno="555"><highlight class="preprocessor"></highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="556"><highlight class="normal"><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">while</highlight><highlight class="normal"><sp/>(--j);</highlight></codeline>
<codeline lineno="557"><highlight class="normal"></highlight></codeline>
<codeline lineno="558"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>end<sp/>of<sp/>last<sp/>stage<sp/>process<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="559"><highlight class="normal"></highlight></codeline>
<codeline lineno="560"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>output<sp/>is<sp/>in<sp/>11.5(q5)<sp/>format<sp/>for<sp/>the<sp/>1024<sp/>point<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="561"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>output<sp/>is<sp/>in<sp/>9.7(q7)<sp/>format<sp/>for<sp/>the<sp/>256<sp/>point<sp/><sp/><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="562"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>output<sp/>is<sp/>in<sp/>7.9(q9)<sp/>format<sp/>for<sp/>the<sp/>64<sp/>point<sp/><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="563"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>output<sp/>is<sp/>in<sp/>5.11(q11)<sp/>format<sp/>for<sp/>the<sp/>16<sp/>point<sp/><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="564"><highlight class="normal"></highlight></codeline>
<codeline lineno="565"><highlight class="normal"></highlight></codeline>
<codeline lineno="566"><highlight class="normal"></highlight><highlight class="preprocessor">#else<sp/></highlight><highlight class="comment">/*<sp/>#if<sp/>defined<sp/>(RISCV_MATH_DSP)<sp/>*/</highlight><highlight class="preprocessor"></highlight></codeline>
<codeline lineno="567"><highlight class="preprocessor"></highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="568"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>q15_t<sp/>R0,<sp/>R1,<sp/>S0,<sp/>S1,<sp/>T0,<sp/>T1,<sp/>U0,<sp/>U1;</highlight></codeline>
<codeline lineno="569"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>q15_t<sp/>Co1,<sp/>Si1,<sp/>Co2,<sp/>Si2,<sp/>Co3,<sp/>Si3,<sp/>out1,<sp/>out2;</highlight></codeline>
<codeline lineno="570"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>uint32_t<sp/>n1,<sp/>n2,<sp/>ic,<sp/>i0,<sp/>i1,<sp/>i2,<sp/>i3,<sp/>j,<sp/>k;</highlight></codeline>
<codeline lineno="571"><highlight class="normal"></highlight></codeline>
<codeline lineno="572"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>Total<sp/>process<sp/>is<sp/>divided<sp/>into<sp/>three<sp/>stages<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="573"><highlight class="normal"></highlight></codeline>
<codeline lineno="574"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>process<sp/>first<sp/>stage,<sp/>middle<sp/>stages,<sp/>&amp;<sp/>last<sp/>stage<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="575"><highlight class="normal"></highlight></codeline>
<codeline lineno="576"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/><sp/>Initializations<sp/>for<sp/>the<sp/>first<sp/>stage<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="577"><highlight class="normal"><sp/><sp/>n2<sp/>=<sp/>fftLen;</highlight></codeline>
<codeline lineno="578"><highlight class="normal"><sp/><sp/>n1<sp/>=<sp/>n2;</highlight></codeline>
<codeline lineno="579"><highlight class="normal"></highlight></codeline>
<codeline lineno="580"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>n2<sp/>=<sp/>fftLen/4<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="581"><highlight class="normal"><sp/><sp/>n2<sp/>&gt;&gt;=<sp/>2U;</highlight></codeline>
<codeline lineno="582"><highlight class="normal"></highlight></codeline>
<codeline lineno="583"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>Index<sp/>for<sp/>twiddle<sp/>coefficient<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="584"><highlight class="normal"><sp/><sp/>ic<sp/>=<sp/>0U;</highlight></codeline>
<codeline lineno="585"><highlight class="normal"></highlight></codeline>
<codeline lineno="586"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>Index<sp/>for<sp/>input<sp/>read<sp/>and<sp/>output<sp/>write<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="587"><highlight class="normal"><sp/><sp/>i0<sp/>=<sp/>0U;</highlight></codeline>
<codeline lineno="588"><highlight class="normal"><sp/><sp/>j<sp/>=<sp/>n2;</highlight></codeline>
<codeline lineno="589"><highlight class="normal"></highlight></codeline>
<codeline lineno="590"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>Input<sp/>is<sp/>in<sp/>1.15(q15)<sp/>format<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="591"><highlight class="normal"></highlight></codeline>
<codeline lineno="592"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/><sp/>start<sp/>of<sp/>first<sp/>stage<sp/>process<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="593"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">do</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="594"><highlight class="normal"><sp/><sp/>{</highlight></codeline>
<codeline lineno="595"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/><sp/>Butterfly<sp/>implementation<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="596"><highlight class="normal"></highlight></codeline>
<codeline lineno="597"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/><sp/>index<sp/>calculation<sp/>for<sp/>the<sp/>input<sp/>as,<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="598"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/><sp/>pSrc16[i0<sp/>+<sp/>0],<sp/>pSrc16[i0<sp/>+<sp/>fftLen/4],<sp/>pSrc16[i0<sp/>+<sp/>fftLen/2],<sp/>pSrc16[i0<sp/>+<sp/>3fftLen/4]<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="599"><highlight class="normal"><sp/><sp/><sp/><sp/>i1<sp/>=<sp/>i0<sp/>+<sp/>n2;</highlight></codeline>
<codeline lineno="600"><highlight class="normal"><sp/><sp/><sp/><sp/>i2<sp/>=<sp/>i1<sp/>+<sp/>n2;</highlight></codeline>
<codeline lineno="601"><highlight class="normal"><sp/><sp/><sp/><sp/>i3<sp/>=<sp/>i2<sp/>+<sp/>n2;</highlight></codeline>
<codeline lineno="602"><highlight class="normal"></highlight></codeline>
<codeline lineno="603"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/><sp/>Reading<sp/>i0,<sp/>i0+fftLen/2<sp/>inputs<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="604"><highlight class="normal"></highlight></codeline>
<codeline lineno="605"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>input<sp/>is<sp/>down<sp/>scale<sp/>by<sp/>4<sp/>to<sp/>avoid<sp/>overflow<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="606"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Read<sp/>ya<sp/>(real),<sp/>xa(imag)<sp/>input<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="607"><highlight class="normal"><sp/><sp/><sp/><sp/>T0<sp/>=<sp/>pSrc16[i0<sp/>*<sp/>2U]<sp/>&gt;&gt;<sp/>2U;</highlight></codeline>
<codeline lineno="608"><highlight class="normal"><sp/><sp/><sp/><sp/>T1<sp/>=<sp/>pSrc16[(i0<sp/>*<sp/>2U)<sp/>+<sp/>1U]<sp/>&gt;&gt;<sp/>2U;</highlight></codeline>
<codeline lineno="609"><highlight class="normal"></highlight></codeline>
<codeline lineno="610"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>input<sp/>is<sp/>down<sp/>scale<sp/>by<sp/>4<sp/>to<sp/>avoid<sp/>overflow<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="611"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Read<sp/>yc<sp/>(real),<sp/>xc(imag)<sp/>input<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="612"><highlight class="normal"><sp/><sp/><sp/><sp/>S0<sp/>=<sp/>pSrc16[i2<sp/>*<sp/>2U]<sp/>&gt;&gt;<sp/>2U;</highlight></codeline>
<codeline lineno="613"><highlight class="normal"><sp/><sp/><sp/><sp/>S1<sp/>=<sp/>pSrc16[(i2<sp/>*<sp/>2U)<sp/>+<sp/>1U]<sp/>&gt;&gt;<sp/>2U;</highlight></codeline>
<codeline lineno="614"><highlight class="normal"></highlight></codeline>
<codeline lineno="615"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>R0<sp/>=<sp/>(ya<sp/>+<sp/>yc)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="616"><highlight class="normal"><sp/><sp/><sp/><sp/>R0<sp/>=<sp/>__SSAT(T0<sp/>+<sp/>S0,<sp/>16U);</highlight></codeline>
<codeline lineno="617"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>R1<sp/>=<sp/>(xa<sp/>+<sp/>xc)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="618"><highlight class="normal"><sp/><sp/><sp/><sp/>R1<sp/>=<sp/>__SSAT(T1<sp/>+<sp/>S1,<sp/>16U);</highlight></codeline>
<codeline lineno="619"><highlight class="normal"></highlight></codeline>
<codeline lineno="620"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>S0<sp/>=<sp/>(ya<sp/>-<sp/>yc)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="621"><highlight class="normal"><sp/><sp/><sp/><sp/>S0<sp/>=<sp/>__SSAT(T0<sp/>-<sp/>S0,<sp/>16);</highlight></codeline>
<codeline lineno="622"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>S1<sp/>=<sp/>(xa<sp/>-<sp/>xc)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="623"><highlight class="normal"><sp/><sp/><sp/><sp/>S1<sp/>=<sp/>__SSAT(T1<sp/>-<sp/>S1,<sp/>16);</highlight></codeline>
<codeline lineno="624"><highlight class="normal"></highlight></codeline>
<codeline lineno="625"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/><sp/>Reading<sp/>i0+fftLen/4<sp/>,<sp/>i0+3fftLen/4<sp/>inputs<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="626"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>input<sp/>is<sp/>down<sp/>scale<sp/>by<sp/>4<sp/>to<sp/>avoid<sp/>overflow<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="627"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Read<sp/>yb<sp/>(real),<sp/>xb(imag)<sp/>input<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="628"><highlight class="normal"><sp/><sp/><sp/><sp/>T0<sp/>=<sp/>pSrc16[i1<sp/>*<sp/>2U]<sp/>&gt;&gt;<sp/>2U;</highlight></codeline>
<codeline lineno="629"><highlight class="normal"><sp/><sp/><sp/><sp/>T1<sp/>=<sp/>pSrc16[(i1<sp/>*<sp/>2U)<sp/>+<sp/>1U]<sp/>&gt;&gt;<sp/>2U;</highlight></codeline>
<codeline lineno="630"><highlight class="normal"></highlight></codeline>
<codeline lineno="631"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>input<sp/>is<sp/>down<sp/>scale<sp/>by<sp/>4<sp/>to<sp/>avoid<sp/>overflow<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="632"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Read<sp/>yd<sp/>(real),<sp/>xd(imag)<sp/>input<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="633"><highlight class="normal"><sp/><sp/><sp/><sp/>U0<sp/>=<sp/>pSrc16[i3<sp/>*<sp/>2U]<sp/>&gt;&gt;<sp/>2U;</highlight></codeline>
<codeline lineno="634"><highlight class="normal"><sp/><sp/><sp/><sp/>U1<sp/>=<sp/>pSrc16[(i3<sp/>*<sp/>2U)<sp/>+<sp/>1]<sp/>&gt;&gt;<sp/>2U;</highlight></codeline>
<codeline lineno="635"><highlight class="normal"></highlight></codeline>
<codeline lineno="636"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>T0<sp/>=<sp/>(yb<sp/>+<sp/>yd)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="637"><highlight class="normal"><sp/><sp/><sp/><sp/>T0<sp/>=<sp/>__SSAT(T0<sp/>+<sp/>U0,<sp/>16U);</highlight></codeline>
<codeline lineno="638"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>T1<sp/>=<sp/>(xb<sp/>+<sp/>xd)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="639"><highlight class="normal"><sp/><sp/><sp/><sp/>T1<sp/>=<sp/>__SSAT(T1<sp/>+<sp/>U1,<sp/>16U);</highlight></codeline>
<codeline lineno="640"><highlight class="normal"></highlight></codeline>
<codeline lineno="641"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/><sp/>writing<sp/>the<sp/>butterfly<sp/>processed<sp/>i0<sp/>sample<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="642"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>ya&apos;<sp/>=<sp/>ya<sp/>+<sp/>yb<sp/>+<sp/>yc<sp/>+<sp/>yd<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="643"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>xa&apos;<sp/>=<sp/>xa<sp/>+<sp/>xb<sp/>+<sp/>xc<sp/>+<sp/>xd<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="644"><highlight class="normal"><sp/><sp/><sp/><sp/>pSrc16[i0<sp/>*<sp/>2U]<sp/>=<sp/>(R0<sp/>&gt;&gt;<sp/>1U)<sp/>+<sp/>(T0<sp/>&gt;&gt;<sp/>1U);</highlight></codeline>
<codeline lineno="645"><highlight class="normal"><sp/><sp/><sp/><sp/>pSrc16[(i0<sp/>*<sp/>2U)<sp/>+<sp/>1U]<sp/>=<sp/>(R1<sp/>&gt;&gt;<sp/>1U)<sp/>+<sp/>(T1<sp/>&gt;&gt;<sp/>1U);</highlight></codeline>
<codeline lineno="646"><highlight class="normal"></highlight></codeline>
<codeline lineno="647"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>R0<sp/>=<sp/>(ya<sp/>+<sp/>yc)<sp/>-<sp/>(yb<sp/>+<sp/>yd)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="648"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>R1<sp/>=<sp/>(xa<sp/>+<sp/>xc)<sp/>-<sp/>(xb<sp/>+<sp/>xd)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="649"><highlight class="normal"><sp/><sp/><sp/><sp/>R0<sp/>=<sp/>__SSAT(R0<sp/>-<sp/>T0,<sp/>16U);</highlight></codeline>
<codeline lineno="650"><highlight class="normal"><sp/><sp/><sp/><sp/>R1<sp/>=<sp/>__SSAT(R1<sp/>-<sp/>T1,<sp/>16U);</highlight></codeline>
<codeline lineno="651"><highlight class="normal"></highlight></codeline>
<codeline lineno="652"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>co2<sp/>&amp;<sp/>si2<sp/>are<sp/>read<sp/>from<sp/>Coefficient<sp/>pointer<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="653"><highlight class="normal"><sp/><sp/><sp/><sp/>Co2<sp/>=<sp/>pCoef16[2U<sp/>*<sp/>ic<sp/>*<sp/>2U];</highlight></codeline>
<codeline lineno="654"><highlight class="normal"><sp/><sp/><sp/><sp/>Si2<sp/>=<sp/>pCoef16[(2U<sp/>*<sp/>ic<sp/>*<sp/>2U)<sp/>+<sp/>1];</highlight></codeline>
<codeline lineno="655"><highlight class="normal"></highlight></codeline>
<codeline lineno="656"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>xc&apos;<sp/>=<sp/>(xa-xb+xc-xd)*<sp/>co2<sp/>+<sp/>(ya-yb+yc-yd)*<sp/>(si2)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="657"><highlight class="normal"><sp/><sp/><sp/><sp/>out1<sp/>=<sp/>(q15_t)<sp/>((Co2<sp/>*<sp/>R0<sp/>+<sp/>Si2<sp/>*<sp/>R1)<sp/>&gt;&gt;<sp/>16U);</highlight></codeline>
<codeline lineno="658"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>yc&apos;<sp/>=<sp/>(ya-yb+yc-yd)*<sp/>co2<sp/>-<sp/>(xa-xb+xc-xd)*<sp/>(si2)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="659"><highlight class="normal"><sp/><sp/><sp/><sp/>out2<sp/>=<sp/>(q15_t)<sp/>((-Si2<sp/>*<sp/>R0<sp/>+<sp/>Co2<sp/>*<sp/>R1)<sp/>&gt;&gt;<sp/>16U);</highlight></codeline>
<codeline lineno="660"><highlight class="normal"></highlight></codeline>
<codeline lineno="661"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/><sp/>Reading<sp/>i0+fftLen/4<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="662"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>input<sp/>is<sp/>down<sp/>scale<sp/>by<sp/>4<sp/>to<sp/>avoid<sp/>overflow<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="663"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>T0<sp/>=<sp/>yb,<sp/>T1<sp/>=<sp/><sp/>xb<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="664"><highlight class="normal"><sp/><sp/><sp/><sp/>T0<sp/>=<sp/>pSrc16[i1<sp/>*<sp/>2U]<sp/>&gt;&gt;<sp/>2;</highlight></codeline>
<codeline lineno="665"><highlight class="normal"><sp/><sp/><sp/><sp/>T1<sp/>=<sp/>pSrc16[(i1<sp/>*<sp/>2U)<sp/>+<sp/>1]<sp/>&gt;&gt;<sp/>2;</highlight></codeline>
<codeline lineno="666"><highlight class="normal"></highlight></codeline>
<codeline lineno="667"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>writing<sp/>the<sp/>butterfly<sp/>processed<sp/>i0<sp/>+<sp/>fftLen/4<sp/>sample<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="668"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>writing<sp/>output(xc&apos;,<sp/>yc&apos;)<sp/>in<sp/>little<sp/>endian<sp/>format<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="669"><highlight class="normal"><sp/><sp/><sp/><sp/>pSrc16[i1<sp/>*<sp/>2U]<sp/>=<sp/>out1;</highlight></codeline>
<codeline lineno="670"><highlight class="normal"><sp/><sp/><sp/><sp/>pSrc16[(i1<sp/>*<sp/>2U)<sp/>+<sp/>1]<sp/>=<sp/>out2;</highlight></codeline>
<codeline lineno="671"><highlight class="normal"></highlight></codeline>
<codeline lineno="672"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/><sp/>Butterfly<sp/>calculations<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="673"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>input<sp/>is<sp/>down<sp/>scale<sp/>by<sp/>4<sp/>to<sp/>avoid<sp/>overflow<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="674"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>U0<sp/>=<sp/>yd,<sp/>U1<sp/>=<sp/>xd<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="675"><highlight class="normal"><sp/><sp/><sp/><sp/>U0<sp/>=<sp/>pSrc16[i3<sp/>*<sp/>2U]<sp/>&gt;&gt;<sp/>2;</highlight></codeline>
<codeline lineno="676"><highlight class="normal"><sp/><sp/><sp/><sp/>U1<sp/>=<sp/>pSrc16[(i3<sp/>*<sp/>2U)<sp/>+<sp/>1]<sp/>&gt;&gt;<sp/>2;</highlight></codeline>
<codeline lineno="677"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>T0<sp/>=<sp/>yb-yd<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="678"><highlight class="normal"><sp/><sp/><sp/><sp/>T0<sp/>=<sp/>__SSAT(T0<sp/>-<sp/>U0,<sp/>16);</highlight></codeline>
<codeline lineno="679"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>T1<sp/>=<sp/>xb-xd<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="680"><highlight class="normal"><sp/><sp/><sp/><sp/>T1<sp/>=<sp/>__SSAT(T1<sp/>-<sp/>U1,<sp/>16);</highlight></codeline>
<codeline lineno="681"><highlight class="normal"></highlight></codeline>
<codeline lineno="682"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>R1<sp/>=<sp/>(ya-yc)<sp/>+<sp/>(xb-<sp/>xd),<sp/><sp/>R0<sp/>=<sp/>(xa-xc)<sp/>-<sp/>(yb-yd))<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="683"><highlight class="normal"><sp/><sp/><sp/><sp/>R0<sp/>=<sp/>(q15_t)<sp/>__SSAT((q31_t)<sp/>(S0<sp/>-<sp/>T1),<sp/>16);</highlight></codeline>
<codeline lineno="684"><highlight class="normal"><sp/><sp/><sp/><sp/>R1<sp/>=<sp/>(q15_t)<sp/>__SSAT((q31_t)<sp/>(S1<sp/>+<sp/>T0),<sp/>16);</highlight></codeline>
<codeline lineno="685"><highlight class="normal"></highlight></codeline>
<codeline lineno="686"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>S1<sp/>=<sp/>(ya-yc)<sp/>-<sp/>(xb-<sp/>xd),<sp/>S0<sp/>=<sp/>(xa-xc)<sp/>+<sp/>(yb-yd))<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="687"><highlight class="normal"><sp/><sp/><sp/><sp/>S0<sp/>=<sp/>(q15_t)<sp/>__SSAT(((q31_t)<sp/>S0<sp/>+<sp/>T1),<sp/>16U);</highlight></codeline>
<codeline lineno="688"><highlight class="normal"><sp/><sp/><sp/><sp/>S1<sp/>=<sp/>(q15_t)<sp/>__SSAT(((q31_t)<sp/>S1<sp/>-<sp/>T0),<sp/>16U);</highlight></codeline>
<codeline lineno="689"><highlight class="normal"></highlight></codeline>
<codeline lineno="690"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>co1<sp/>&amp;<sp/>si1<sp/>are<sp/>read<sp/>from<sp/>Coefficient<sp/>pointer<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="691"><highlight class="normal"><sp/><sp/><sp/><sp/>Co1<sp/>=<sp/>pCoef16[ic<sp/>*<sp/>2U];</highlight></codeline>
<codeline lineno="692"><highlight class="normal"><sp/><sp/><sp/><sp/>Si1<sp/>=<sp/>pCoef16[(ic<sp/>*<sp/>2U)<sp/>+<sp/>1];</highlight></codeline>
<codeline lineno="693"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/><sp/>Butterfly<sp/>process<sp/>for<sp/>the<sp/>i0+fftLen/2<sp/>sample<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="694"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>xb&apos;<sp/>=<sp/>(xa+yb-xc-yd)*<sp/>co1<sp/>+<sp/>(ya-xb-yc+xd)*<sp/>(si1)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="695"><highlight class="normal"><sp/><sp/><sp/><sp/>out1<sp/>=<sp/>(q15_t)<sp/>((Si1<sp/>*<sp/>S1<sp/>+<sp/>Co1<sp/>*<sp/>S0)<sp/>&gt;&gt;<sp/>16);</highlight></codeline>
<codeline lineno="696"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>yb&apos;<sp/>=<sp/>(ya-xb-yc+xd)*<sp/>co1<sp/>-<sp/>(xa+yb-xc-yd)*<sp/>(si1)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="697"><highlight class="normal"><sp/><sp/><sp/><sp/>out2<sp/>=<sp/>(q15_t)<sp/>((-Si1<sp/>*<sp/>S0<sp/>+<sp/>Co1<sp/>*<sp/>S1)<sp/>&gt;&gt;<sp/>16);</highlight></codeline>
<codeline lineno="698"><highlight class="normal"></highlight></codeline>
<codeline lineno="699"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>writing<sp/>output(xb&apos;,<sp/>yb&apos;)<sp/>in<sp/>little<sp/>endian<sp/>format<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="700"><highlight class="normal"><sp/><sp/><sp/><sp/>pSrc16[i2<sp/>*<sp/>2U]<sp/>=<sp/>out1;</highlight></codeline>
<codeline lineno="701"><highlight class="normal"><sp/><sp/><sp/><sp/>pSrc16[(i2<sp/>*<sp/>2U)<sp/>+<sp/>1]<sp/>=<sp/>out2;</highlight></codeline>
<codeline lineno="702"><highlight class="normal"></highlight></codeline>
<codeline lineno="703"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Co3<sp/>&amp;<sp/>si3<sp/>are<sp/>read<sp/>from<sp/>Coefficient<sp/>pointer<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="704"><highlight class="normal"><sp/><sp/><sp/><sp/>Co3<sp/>=<sp/>pCoef16[3U<sp/>*<sp/>(ic<sp/>*<sp/>2U)];</highlight></codeline>
<codeline lineno="705"><highlight class="normal"><sp/><sp/><sp/><sp/>Si3<sp/>=<sp/>pCoef16[(3U<sp/>*<sp/>(ic<sp/>*<sp/>2U))<sp/>+<sp/>1];</highlight></codeline>
<codeline lineno="706"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/><sp/>Butterfly<sp/>process<sp/>for<sp/>the<sp/>i0+3fftLen/4<sp/>sample<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="707"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>xd&apos;<sp/>=<sp/>(xa-yb-xc+yd)*<sp/>Co3<sp/>+<sp/>(ya+xb-yc-xd)*<sp/>(si3)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="708"><highlight class="normal"><sp/><sp/><sp/><sp/>out1<sp/>=<sp/>(q15_t)<sp/>((Si3<sp/>*<sp/>R1<sp/>+<sp/>Co3<sp/>*<sp/>R0)<sp/>&gt;&gt;<sp/>16U);</highlight></codeline>
<codeline lineno="709"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>yd&apos;<sp/>=<sp/>(ya+xb-yc-xd)*<sp/>Co3<sp/>-<sp/>(xa-yb-xc+yd)*<sp/>(si3)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="710"><highlight class="normal"><sp/><sp/><sp/><sp/>out2<sp/>=<sp/>(q15_t)<sp/>((-Si3<sp/>*<sp/>R0<sp/>+<sp/>Co3<sp/>*<sp/>R1)<sp/>&gt;&gt;<sp/>16U);</highlight></codeline>
<codeline lineno="711"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>writing<sp/>output(xd&apos;,<sp/>yd&apos;)<sp/>in<sp/>little<sp/>endian<sp/>format<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="712"><highlight class="normal"><sp/><sp/><sp/><sp/>pSrc16[i3<sp/>*<sp/>2U]<sp/>=<sp/>out1;</highlight></codeline>
<codeline lineno="713"><highlight class="normal"><sp/><sp/><sp/><sp/>pSrc16[(i3<sp/>*<sp/>2U)<sp/>+<sp/>1]<sp/>=<sp/>out2;</highlight></codeline>
<codeline lineno="714"><highlight class="normal"></highlight></codeline>
<codeline lineno="715"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/><sp/>Twiddle<sp/>coefficients<sp/>index<sp/>modifier<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="716"><highlight class="normal"><sp/><sp/><sp/><sp/>ic<sp/>=<sp/>ic<sp/>+<sp/>twidCoefModifier;</highlight></codeline>
<codeline lineno="717"><highlight class="normal"></highlight></codeline>
<codeline lineno="718"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/><sp/>Updating<sp/>input<sp/>index<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="719"><highlight class="normal"><sp/><sp/><sp/><sp/>i0<sp/>=<sp/>i0<sp/>+<sp/>1U;</highlight></codeline>
<codeline lineno="720"><highlight class="normal"></highlight></codeline>
<codeline lineno="721"><highlight class="normal"><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">while</highlight><highlight class="normal"><sp/>(--j);</highlight></codeline>
<codeline lineno="722"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>data<sp/>is<sp/>in<sp/>4.11(q11)<sp/>format<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="723"><highlight class="normal"></highlight></codeline>
<codeline lineno="724"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>end<sp/>of<sp/>first<sp/>stage<sp/>process<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="725"><highlight class="normal"></highlight></codeline>
<codeline lineno="726"><highlight class="normal"></highlight></codeline>
<codeline lineno="727"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>start<sp/>of<sp/>middle<sp/>stage<sp/>process<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="728"><highlight class="normal"></highlight></codeline>
<codeline lineno="729"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/><sp/>Twiddle<sp/>coefficients<sp/>index<sp/>modifier<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="730"><highlight class="normal"><sp/><sp/>twidCoefModifier<sp/>&lt;&lt;=<sp/>2U;</highlight></codeline>
<codeline lineno="731"><highlight class="normal"></highlight></codeline>
<codeline lineno="732"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/><sp/>Calculation<sp/>of<sp/>Middle<sp/>stage<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="733"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(k<sp/>=<sp/>fftLen<sp/>/<sp/>4U;<sp/>k<sp/>&gt;<sp/>4U;<sp/>k<sp/>&gt;&gt;=<sp/>2U)</highlight></codeline>
<codeline lineno="734"><highlight class="normal"><sp/><sp/>{</highlight></codeline>
<codeline lineno="735"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/><sp/>Initializations<sp/>for<sp/>the<sp/>middle<sp/>stage<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="736"><highlight class="normal"><sp/><sp/><sp/><sp/>n1<sp/>=<sp/>n2;</highlight></codeline>
<codeline lineno="737"><highlight class="normal"><sp/><sp/><sp/><sp/>n2<sp/>&gt;&gt;=<sp/>2U;</highlight></codeline>
<codeline lineno="738"><highlight class="normal"><sp/><sp/><sp/><sp/>ic<sp/>=<sp/>0U;</highlight></codeline>
<codeline lineno="739"><highlight class="normal"></highlight></codeline>
<codeline lineno="740"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(j<sp/>=<sp/>0U;<sp/>j<sp/>&lt;=<sp/>(n2<sp/>-<sp/>1U);<sp/>j++)</highlight></codeline>
<codeline lineno="741"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="742"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/><sp/>index<sp/>calculation<sp/>for<sp/>the<sp/>coefficients<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="743"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>Co1<sp/>=<sp/>pCoef16[ic<sp/>*<sp/>2U];</highlight></codeline>
<codeline lineno="744"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>Si1<sp/>=<sp/>pCoef16[(ic<sp/>*<sp/>2U)<sp/>+<sp/>1U];</highlight></codeline>
<codeline lineno="745"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>Co2<sp/>=<sp/>pCoef16[2U<sp/>*<sp/>(ic<sp/>*<sp/>2U)];</highlight></codeline>
<codeline lineno="746"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>Si2<sp/>=<sp/>pCoef16[(2U<sp/>*<sp/>(ic<sp/>*<sp/>2U))<sp/>+<sp/>1U];</highlight></codeline>
<codeline lineno="747"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>Co3<sp/>=<sp/>pCoef16[3U<sp/>*<sp/>(ic<sp/>*<sp/>2U)];</highlight></codeline>
<codeline lineno="748"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>Si3<sp/>=<sp/>pCoef16[(3U<sp/>*<sp/>(ic<sp/>*<sp/>2U))<sp/>+<sp/>1U];</highlight></codeline>
<codeline lineno="749"><highlight class="normal"></highlight></codeline>
<codeline lineno="750"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/><sp/>Twiddle<sp/>coefficients<sp/>index<sp/>modifier<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="751"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>ic<sp/>=<sp/>ic<sp/>+<sp/>twidCoefModifier;</highlight></codeline>
<codeline lineno="752"><highlight class="normal"></highlight></codeline>
<codeline lineno="753"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/><sp/>Butterfly<sp/>implementation<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="754"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(i0<sp/>=<sp/>j;<sp/>i0<sp/>&lt;<sp/>fftLen;<sp/>i0<sp/>+=<sp/>n1)</highlight></codeline>
<codeline lineno="755"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="756"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/><sp/>index<sp/>calculation<sp/>for<sp/>the<sp/>input<sp/>as,<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="757"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/><sp/>pSrc16[i0<sp/>+<sp/>0],<sp/>pSrc16[i0<sp/>+<sp/>fftLen/4],<sp/>pSrc16[i0<sp/>+<sp/>fftLen/2],<sp/>pSrc16[i0<sp/>+<sp/>3fftLen/4]<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="758"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>i1<sp/>=<sp/>i0<sp/>+<sp/>n2;</highlight></codeline>
<codeline lineno="759"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>i2<sp/>=<sp/>i1<sp/>+<sp/>n2;</highlight></codeline>
<codeline lineno="760"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>i3<sp/>=<sp/>i2<sp/>+<sp/>n2;</highlight></codeline>
<codeline lineno="761"><highlight class="normal"></highlight></codeline>
<codeline lineno="762"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/><sp/>Reading<sp/>i0,<sp/>i0+fftLen/2<sp/>inputs<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="763"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Read<sp/>ya<sp/>(real),<sp/>xa(imag)<sp/>input<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="764"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>T0<sp/>=<sp/>pSrc16[i0<sp/>*<sp/>2U];</highlight></codeline>
<codeline lineno="765"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>T1<sp/>=<sp/>pSrc16[(i0<sp/>*<sp/>2U)<sp/>+<sp/>1U];</highlight></codeline>
<codeline lineno="766"><highlight class="normal"></highlight></codeline>
<codeline lineno="767"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Read<sp/>yc<sp/>(real),<sp/>xc(imag)<sp/>input<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="768"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>S0<sp/>=<sp/>pSrc16[i2<sp/>*<sp/>2U];</highlight></codeline>
<codeline lineno="769"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>S1<sp/>=<sp/>pSrc16[(i2<sp/>*<sp/>2U)<sp/>+<sp/>1U];</highlight></codeline>
<codeline lineno="770"><highlight class="normal"></highlight></codeline>
<codeline lineno="771"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>R0<sp/>=<sp/>(ya<sp/>+<sp/>yc),<sp/>R1<sp/>=<sp/>(xa<sp/>+<sp/>xc)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="772"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>R0<sp/>=<sp/>__SSAT(T0<sp/>+<sp/>S0,<sp/>16);</highlight></codeline>
<codeline lineno="773"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>R1<sp/>=<sp/>__SSAT(T1<sp/>+<sp/>S1,<sp/>16);</highlight></codeline>
<codeline lineno="774"><highlight class="normal"></highlight></codeline>
<codeline lineno="775"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>S0<sp/>=<sp/>(ya<sp/>-<sp/>yc),<sp/>S1<sp/>=(xa<sp/>-<sp/>xc)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="776"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>S0<sp/>=<sp/>__SSAT(T0<sp/>-<sp/>S0,<sp/>16);</highlight></codeline>
<codeline lineno="777"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>S1<sp/>=<sp/>__SSAT(T1<sp/>-<sp/>S1,<sp/>16);</highlight></codeline>
<codeline lineno="778"><highlight class="normal"></highlight></codeline>
<codeline lineno="779"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/><sp/>Reading<sp/>i0+fftLen/4<sp/>,<sp/>i0+3fftLen/4<sp/>inputs<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="780"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Read<sp/>yb<sp/>(real),<sp/>xb(imag)<sp/>input<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="781"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>T0<sp/>=<sp/>pSrc16[i1<sp/>*<sp/>2U];</highlight></codeline>
<codeline lineno="782"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>T1<sp/>=<sp/>pSrc16[(i1<sp/>*<sp/>2U)<sp/>+<sp/>1U];</highlight></codeline>
<codeline lineno="783"><highlight class="normal"></highlight></codeline>
<codeline lineno="784"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Read<sp/>yd<sp/>(real),<sp/>xd(imag)<sp/>input<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="785"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>U0<sp/>=<sp/>pSrc16[i3<sp/>*<sp/>2U];</highlight></codeline>
<codeline lineno="786"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>U1<sp/>=<sp/>pSrc16[(i3<sp/>*<sp/>2U)<sp/>+<sp/>1U];</highlight></codeline>
<codeline lineno="787"><highlight class="normal"></highlight></codeline>
<codeline lineno="788"><highlight class="normal"></highlight></codeline>
<codeline lineno="789"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>T0<sp/>=<sp/>(yb<sp/>+<sp/>yd),<sp/>T1<sp/>=<sp/>(xb<sp/>+<sp/>xd)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="790"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>T0<sp/>=<sp/>__SSAT(T0<sp/>+<sp/>U0,<sp/>16);</highlight></codeline>
<codeline lineno="791"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>T1<sp/>=<sp/>__SSAT(T1<sp/>+<sp/>U1,<sp/>16);</highlight></codeline>
<codeline lineno="792"><highlight class="normal"></highlight></codeline>
<codeline lineno="793"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/><sp/>writing<sp/>the<sp/>butterfly<sp/>processed<sp/>i0<sp/>sample<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="794"><highlight class="normal"></highlight></codeline>
<codeline lineno="795"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>xa&apos;<sp/>=<sp/>xa<sp/>+<sp/>xb<sp/>+<sp/>xc<sp/>+<sp/>xd<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="796"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>ya&apos;<sp/>=<sp/>ya<sp/>+<sp/>yb<sp/>+<sp/>yc<sp/>+<sp/>yd<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="797"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>out1<sp/>=<sp/>((R0<sp/>&gt;&gt;<sp/>1U)<sp/>+<sp/>(T0<sp/>&gt;&gt;<sp/>1U))<sp/>&gt;&gt;<sp/>1U;</highlight></codeline>
<codeline lineno="798"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>out2<sp/>=<sp/>((R1<sp/>&gt;&gt;<sp/>1U)<sp/>+<sp/>(T1<sp/>&gt;&gt;<sp/>1U))<sp/>&gt;&gt;<sp/>1U;</highlight></codeline>
<codeline lineno="799"><highlight class="normal"></highlight></codeline>
<codeline lineno="800"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pSrc16[i0<sp/>*<sp/>2U]<sp/>=<sp/>out1;</highlight></codeline>
<codeline lineno="801"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pSrc16[(2U<sp/>*<sp/>i0)<sp/>+<sp/>1U]<sp/>=<sp/>out2;</highlight></codeline>
<codeline lineno="802"><highlight class="normal"></highlight></codeline>
<codeline lineno="803"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>R0<sp/>=<sp/>(ya<sp/>+<sp/>yc)<sp/>-<sp/>(yb<sp/>+<sp/>yd),<sp/>R1<sp/>=<sp/>(xa<sp/>+<sp/>xc)<sp/>-<sp/>(xb<sp/>+<sp/>xd)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="804"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>R0<sp/>=<sp/>(R0<sp/>&gt;&gt;<sp/>1U)<sp/>-<sp/>(T0<sp/>&gt;&gt;<sp/>1U);</highlight></codeline>
<codeline lineno="805"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>R1<sp/>=<sp/>(R1<sp/>&gt;&gt;<sp/>1U)<sp/>-<sp/>(T1<sp/>&gt;&gt;<sp/>1U);</highlight></codeline>
<codeline lineno="806"><highlight class="normal"></highlight></codeline>
<codeline lineno="807"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>(ya-yb+yc-yd)*<sp/>(si2)<sp/>+<sp/>(xa-xb+xc-xd)*<sp/>co2<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="808"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>out1<sp/>=<sp/>(q15_t)<sp/>((Co2<sp/>*<sp/>R0<sp/>+<sp/>Si2<sp/>*<sp/>R1)<sp/>&gt;&gt;<sp/>16U);</highlight></codeline>
<codeline lineno="809"><highlight class="normal"></highlight></codeline>
<codeline lineno="810"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>(ya-yb+yc-yd)*<sp/>co2<sp/>-<sp/>(xa-xb+xc-xd)*<sp/>(si2)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="811"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>out2<sp/>=<sp/>(q15_t)<sp/>((-Si2<sp/>*<sp/>R0<sp/>+<sp/>Co2<sp/>*<sp/>R1)<sp/>&gt;&gt;<sp/>16U);</highlight></codeline>
<codeline lineno="812"><highlight class="normal"></highlight></codeline>
<codeline lineno="813"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/><sp/>Reading<sp/>i0+3fftLen/4<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="814"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Read<sp/>yb<sp/>(real),<sp/>xb(imag)<sp/>input<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="815"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>T0<sp/>=<sp/>pSrc16[i1<sp/>*<sp/>2U];</highlight></codeline>
<codeline lineno="816"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>T1<sp/>=<sp/>pSrc16[(i1<sp/>*<sp/>2U)<sp/>+<sp/>1U];</highlight></codeline>
<codeline lineno="817"><highlight class="normal"></highlight></codeline>
<codeline lineno="818"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/><sp/>writing<sp/>the<sp/>butterfly<sp/>processed<sp/>i0<sp/>+<sp/>fftLen/4<sp/>sample<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="819"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>xc&apos;<sp/>=<sp/>(xa-xb+xc-xd)*<sp/>co2<sp/>+<sp/>(ya-yb+yc-yd)*<sp/>(si2)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="820"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>yc&apos;<sp/>=<sp/>(ya-yb+yc-yd)*<sp/>co2<sp/>-<sp/>(xa-xb+xc-xd)*<sp/>(si2)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="821"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pSrc16[i1<sp/>*<sp/>2U]<sp/>=<sp/>out1;</highlight></codeline>
<codeline lineno="822"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pSrc16[(i1<sp/>*<sp/>2U)<sp/>+<sp/>1U]<sp/>=<sp/>out2;</highlight></codeline>
<codeline lineno="823"><highlight class="normal"></highlight></codeline>
<codeline lineno="824"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/><sp/>Butterfly<sp/>calculations<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="825"><highlight class="normal"></highlight></codeline>
<codeline lineno="826"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Read<sp/>yd<sp/>(real),<sp/>xd(imag)<sp/>input<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="827"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>U0<sp/>=<sp/>pSrc16[i3<sp/>*<sp/>2U];</highlight></codeline>
<codeline lineno="828"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>U1<sp/>=<sp/>pSrc16[(i3<sp/>*<sp/>2U)<sp/>+<sp/>1U];</highlight></codeline>
<codeline lineno="829"><highlight class="normal"></highlight></codeline>
<codeline lineno="830"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>T0<sp/>=<sp/>yb-yd,<sp/>T1<sp/>=<sp/>xb-xd<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="831"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>T0<sp/>=<sp/>__SSAT(T0<sp/>-<sp/>U0,<sp/>16);</highlight></codeline>
<codeline lineno="832"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>T1<sp/>=<sp/>__SSAT(T1<sp/>-<sp/>U1,<sp/>16);</highlight></codeline>
<codeline lineno="833"><highlight class="normal"></highlight></codeline>
<codeline lineno="834"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>R0<sp/>=<sp/>(ya-yc)<sp/>+<sp/>(xb-<sp/>xd),<sp/>R1<sp/>=<sp/>(xa-xc)<sp/>-<sp/>(yb-yd))<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="835"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>R0<sp/>=<sp/>(S0<sp/>&gt;&gt;<sp/>1U)<sp/>-<sp/>(T1<sp/>&gt;&gt;<sp/>1U);</highlight></codeline>
<codeline lineno="836"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>R1<sp/>=<sp/>(S1<sp/>&gt;&gt;<sp/>1U)<sp/>+<sp/>(T0<sp/>&gt;&gt;<sp/>1U);</highlight></codeline>
<codeline lineno="837"><highlight class="normal"></highlight></codeline>
<codeline lineno="838"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>S0<sp/>=<sp/>(ya-yc)<sp/>-<sp/>(xb-<sp/>xd),<sp/>S1<sp/>=<sp/>(xa-xc)<sp/>+<sp/>(yb-yd))<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="839"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>S0<sp/>=<sp/>(S0<sp/>&gt;&gt;<sp/>1U)<sp/>+<sp/>(T1<sp/>&gt;&gt;<sp/>1U);</highlight></codeline>
<codeline lineno="840"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>S1<sp/>=<sp/>(S1<sp/>&gt;&gt;<sp/>1U)<sp/>-<sp/>(T0<sp/>&gt;&gt;<sp/>1U);</highlight></codeline>
<codeline lineno="841"><highlight class="normal"></highlight></codeline>
<codeline lineno="842"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/><sp/>Butterfly<sp/>process<sp/>for<sp/>the<sp/>i0+fftLen/2<sp/>sample<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="843"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>out1<sp/>=<sp/>(q15_t)<sp/>((Co1<sp/>*<sp/>S0<sp/>+<sp/>Si1<sp/>*<sp/>S1)<sp/>&gt;&gt;<sp/>16U);</highlight></codeline>
<codeline lineno="844"><highlight class="normal"></highlight></codeline>
<codeline lineno="845"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>out2<sp/>=<sp/>(q15_t)<sp/>((-Si1<sp/>*<sp/>S0<sp/>+<sp/>Co1<sp/>*<sp/>S1)<sp/>&gt;&gt;<sp/>16U);</highlight></codeline>
<codeline lineno="846"><highlight class="normal"></highlight></codeline>
<codeline lineno="847"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>xb&apos;<sp/>=<sp/>(xa+yb-xc-yd)*<sp/>co1<sp/>+<sp/>(ya-xb-yc+xd)*<sp/>(si1)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="848"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>yb&apos;<sp/>=<sp/>(ya-xb-yc+xd)*<sp/>co1<sp/>-<sp/>(xa+yb-xc-yd)*<sp/>(si1)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="849"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pSrc16[i2<sp/>*<sp/>2U]<sp/>=<sp/>out1;</highlight></codeline>
<codeline lineno="850"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pSrc16[(i2<sp/>*<sp/>2U)<sp/>+<sp/>1U]<sp/>=<sp/>out2;</highlight></codeline>
<codeline lineno="851"><highlight class="normal"></highlight></codeline>
<codeline lineno="852"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/><sp/>Butterfly<sp/>process<sp/>for<sp/>the<sp/>i0+3fftLen/4<sp/>sample<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="853"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>out1<sp/>=<sp/>(q15_t)<sp/>((Si3<sp/>*<sp/>R1<sp/>+<sp/>Co3<sp/>*<sp/>R0)<sp/>&gt;&gt;<sp/>16U);</highlight></codeline>
<codeline lineno="854"><highlight class="normal"></highlight></codeline>
<codeline lineno="855"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>out2<sp/>=<sp/>(q15_t)<sp/>((-Si3<sp/>*<sp/>R0<sp/>+<sp/>Co3<sp/>*<sp/>R1)<sp/>&gt;&gt;<sp/>16U);</highlight></codeline>
<codeline lineno="856"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>xd&apos;<sp/>=<sp/>(xa-yb-xc+yd)*<sp/>Co3<sp/>+<sp/>(ya+xb-yc-xd)*<sp/>(si3)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="857"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>yd&apos;<sp/>=<sp/>(ya+xb-yc-xd)*<sp/>Co3<sp/>-<sp/>(xa-yb-xc+yd)*<sp/>(si3)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="858"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pSrc16[i3<sp/>*<sp/>2U]<sp/>=<sp/>out1;</highlight></codeline>
<codeline lineno="859"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pSrc16[(i3<sp/>*<sp/>2U)<sp/>+<sp/>1U]<sp/>=<sp/>out2;</highlight></codeline>
<codeline lineno="860"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="861"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="862"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/><sp/>Twiddle<sp/>coefficients<sp/>index<sp/>modifier<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="863"><highlight class="normal"><sp/><sp/><sp/><sp/>twidCoefModifier<sp/>&lt;&lt;=<sp/>2U;</highlight></codeline>
<codeline lineno="864"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="865"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>end<sp/>of<sp/>middle<sp/>stage<sp/>process<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="866"><highlight class="normal"></highlight></codeline>
<codeline lineno="867"><highlight class="normal"></highlight></codeline>
<codeline lineno="868"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>data<sp/>is<sp/>in<sp/>10.6(q6)<sp/>format<sp/>for<sp/>the<sp/>1024<sp/>point<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="869"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>data<sp/>is<sp/>in<sp/>8.8(q8)<sp/>format<sp/>for<sp/>the<sp/>256<sp/>point<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="870"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>data<sp/>is<sp/>in<sp/>6.10(q10)<sp/>format<sp/>for<sp/>the<sp/>64<sp/>point<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="871"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>data<sp/>is<sp/>in<sp/>4.12(q12)<sp/>format<sp/>for<sp/>the<sp/>16<sp/>point<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="872"><highlight class="normal"></highlight></codeline>
<codeline lineno="873"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/><sp/>Initializations<sp/>for<sp/>the<sp/>last<sp/>stage<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="874"><highlight class="normal"><sp/><sp/>n1<sp/>=<sp/>n2;</highlight></codeline>
<codeline lineno="875"><highlight class="normal"><sp/><sp/>n2<sp/>&gt;&gt;=<sp/>2U;</highlight></codeline>
<codeline lineno="876"><highlight class="normal"></highlight></codeline>
<codeline lineno="877"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>start<sp/>of<sp/>last<sp/>stage<sp/>process<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="878"><highlight class="normal"></highlight></codeline>
<codeline lineno="879"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/><sp/>Butterfly<sp/>implementation<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="880"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(i0<sp/>=<sp/>0U;<sp/>i0<sp/>&lt;=<sp/>(fftLen<sp/>-<sp/>n1);<sp/>i0<sp/>+=<sp/>n1)</highlight></codeline>
<codeline lineno="881"><highlight class="normal"><sp/><sp/>{</highlight></codeline>
<codeline lineno="882"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/><sp/>index<sp/>calculation<sp/>for<sp/>the<sp/>input<sp/>as,<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="883"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/><sp/>pSrc16[i0<sp/>+<sp/>0],<sp/>pSrc16[i0<sp/>+<sp/>fftLen/4],<sp/>pSrc16[i0<sp/>+<sp/>fftLen/2],<sp/>pSrc16[i0<sp/>+<sp/>3fftLen/4]<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="884"><highlight class="normal"><sp/><sp/><sp/><sp/>i1<sp/>=<sp/>i0<sp/>+<sp/>n2;</highlight></codeline>
<codeline lineno="885"><highlight class="normal"><sp/><sp/><sp/><sp/>i2<sp/>=<sp/>i1<sp/>+<sp/>n2;</highlight></codeline>
<codeline lineno="886"><highlight class="normal"><sp/><sp/><sp/><sp/>i3<sp/>=<sp/>i2<sp/>+<sp/>n2;</highlight></codeline>
<codeline lineno="887"><highlight class="normal"></highlight></codeline>
<codeline lineno="888"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/><sp/>Reading<sp/>i0,<sp/>i0+fftLen/2<sp/>inputs<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="889"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Read<sp/>ya<sp/>(real),<sp/>xa(imag)<sp/>input<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="890"><highlight class="normal"><sp/><sp/><sp/><sp/>T0<sp/>=<sp/>pSrc16[i0<sp/>*<sp/>2U];</highlight></codeline>
<codeline lineno="891"><highlight class="normal"><sp/><sp/><sp/><sp/>T1<sp/>=<sp/>pSrc16[(i0<sp/>*<sp/>2U)<sp/>+<sp/>1U];</highlight></codeline>
<codeline lineno="892"><highlight class="normal"></highlight></codeline>
<codeline lineno="893"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Read<sp/>yc<sp/>(real),<sp/>xc(imag)<sp/>input<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="894"><highlight class="normal"><sp/><sp/><sp/><sp/>S0<sp/>=<sp/>pSrc16[i2<sp/>*<sp/>2U];</highlight></codeline>
<codeline lineno="895"><highlight class="normal"><sp/><sp/><sp/><sp/>S1<sp/>=<sp/>pSrc16[(i2<sp/>*<sp/>2U)<sp/>+<sp/>1U];</highlight></codeline>
<codeline lineno="896"><highlight class="normal"></highlight></codeline>
<codeline lineno="897"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>R0<sp/>=<sp/>(ya<sp/>+<sp/>yc),<sp/>R1<sp/>=<sp/>(xa<sp/>+<sp/>xc)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="898"><highlight class="normal"><sp/><sp/><sp/><sp/>R0<sp/>=<sp/>__SSAT(T0<sp/>+<sp/>S0,<sp/>16U);</highlight></codeline>
<codeline lineno="899"><highlight class="normal"><sp/><sp/><sp/><sp/>R1<sp/>=<sp/>__SSAT(T1<sp/>+<sp/>S1,<sp/>16U);</highlight></codeline>
<codeline lineno="900"><highlight class="normal"></highlight></codeline>
<codeline lineno="901"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>S0<sp/>=<sp/>(ya<sp/>-<sp/>yc),<sp/>S1<sp/>=<sp/>(xa<sp/>-<sp/>xc)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="902"><highlight class="normal"><sp/><sp/><sp/><sp/>S0<sp/>=<sp/>__SSAT(T0<sp/>-<sp/>S0,<sp/>16U);</highlight></codeline>
<codeline lineno="903"><highlight class="normal"><sp/><sp/><sp/><sp/>S1<sp/>=<sp/>__SSAT(T1<sp/>-<sp/>S1,<sp/>16U);</highlight></codeline>
<codeline lineno="904"><highlight class="normal"></highlight></codeline>
<codeline lineno="905"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/><sp/>Reading<sp/>i0+fftLen/4<sp/>,<sp/>i0+3fftLen/4<sp/>inputs<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="906"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Read<sp/>yb<sp/>(real),<sp/>xb(imag)<sp/>input<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="907"><highlight class="normal"><sp/><sp/><sp/><sp/>T0<sp/>=<sp/>pSrc16[i1<sp/>*<sp/>2U];</highlight></codeline>
<codeline lineno="908"><highlight class="normal"><sp/><sp/><sp/><sp/>T1<sp/>=<sp/>pSrc16[(i1<sp/>*<sp/>2U)<sp/>+<sp/>1U];</highlight></codeline>
<codeline lineno="909"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Read<sp/>yd<sp/>(real),<sp/>xd(imag)<sp/>input<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="910"><highlight class="normal"><sp/><sp/><sp/><sp/>U0<sp/>=<sp/>pSrc16[i3<sp/>*<sp/>2U];</highlight></codeline>
<codeline lineno="911"><highlight class="normal"><sp/><sp/><sp/><sp/>U1<sp/>=<sp/>pSrc16[(i3<sp/>*<sp/>2U)<sp/>+<sp/>1U];</highlight></codeline>
<codeline lineno="912"><highlight class="normal"></highlight></codeline>
<codeline lineno="913"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>T0<sp/>=<sp/>(yb<sp/>+<sp/>yd),<sp/>T1<sp/>=<sp/>(xb<sp/>+<sp/>xd))<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="914"><highlight class="normal"><sp/><sp/><sp/><sp/>T0<sp/>=<sp/>__SSAT(T0<sp/>+<sp/>U0,<sp/>16U);</highlight></codeline>
<codeline lineno="915"><highlight class="normal"><sp/><sp/><sp/><sp/>T1<sp/>=<sp/>__SSAT(T1<sp/>+<sp/>U1,<sp/>16U);</highlight></codeline>
<codeline lineno="916"><highlight class="normal"></highlight></codeline>
<codeline lineno="917"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/><sp/>writing<sp/>the<sp/>butterfly<sp/>processed<sp/>i0<sp/>sample<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="918"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>xa&apos;<sp/>=<sp/>xa<sp/>+<sp/>xb<sp/>+<sp/>xc<sp/>+<sp/>xd<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="919"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>ya&apos;<sp/>=<sp/>ya<sp/>+<sp/>yb<sp/>+<sp/>yc<sp/>+<sp/>yd<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="920"><highlight class="normal"><sp/><sp/><sp/><sp/>pSrc16[i0<sp/>*<sp/>2U]<sp/>=<sp/>(R0<sp/>&gt;&gt;<sp/>1U)<sp/>+<sp/>(T0<sp/>&gt;&gt;<sp/>1U);</highlight></codeline>
<codeline lineno="921"><highlight class="normal"><sp/><sp/><sp/><sp/>pSrc16[(i0<sp/>*<sp/>2U)<sp/>+<sp/>1U]<sp/>=<sp/>(R1<sp/>&gt;&gt;<sp/>1U)<sp/>+<sp/>(T1<sp/>&gt;&gt;<sp/>1U);</highlight></codeline>
<codeline lineno="922"><highlight class="normal"></highlight></codeline>
<codeline lineno="923"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>R0<sp/>=<sp/>(ya<sp/>+<sp/>yc)<sp/>-<sp/>(yb<sp/>+<sp/>yd),<sp/>R1<sp/>=<sp/>(xa<sp/>+<sp/>xc)<sp/>-<sp/>(xb<sp/>+<sp/>xd)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="924"><highlight class="normal"><sp/><sp/><sp/><sp/>R0<sp/>=<sp/>(R0<sp/>&gt;&gt;<sp/>1U)<sp/>-<sp/>(T0<sp/>&gt;&gt;<sp/>1U);</highlight></codeline>
<codeline lineno="925"><highlight class="normal"><sp/><sp/><sp/><sp/>R1<sp/>=<sp/>(R1<sp/>&gt;&gt;<sp/>1U)<sp/>-<sp/>(T1<sp/>&gt;&gt;<sp/>1U);</highlight></codeline>
<codeline lineno="926"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Read<sp/>yb<sp/>(real),<sp/>xb(imag)<sp/>input<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="927"><highlight class="normal"><sp/><sp/><sp/><sp/>T0<sp/>=<sp/>pSrc16[i1<sp/>*<sp/>2U];</highlight></codeline>
<codeline lineno="928"><highlight class="normal"><sp/><sp/><sp/><sp/>T1<sp/>=<sp/>pSrc16[(i1<sp/>*<sp/>2U)<sp/>+<sp/>1U];</highlight></codeline>
<codeline lineno="929"><highlight class="normal"></highlight></codeline>
<codeline lineno="930"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/><sp/>writing<sp/>the<sp/>butterfly<sp/>processed<sp/>i0<sp/>+<sp/>fftLen/4<sp/>sample<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="931"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>xc&apos;<sp/>=<sp/>(xa-xb+xc-xd)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="932"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>yc&apos;<sp/>=<sp/>(ya-yb+yc-yd)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="933"><highlight class="normal"><sp/><sp/><sp/><sp/>pSrc16[i1<sp/>*<sp/>2U]<sp/>=<sp/>R0;</highlight></codeline>
<codeline lineno="934"><highlight class="normal"><sp/><sp/><sp/><sp/>pSrc16[(i1<sp/>*<sp/>2U)<sp/>+<sp/>1U]<sp/>=<sp/>R1;</highlight></codeline>
<codeline lineno="935"><highlight class="normal"></highlight></codeline>
<codeline lineno="936"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Read<sp/>yd<sp/>(real),<sp/>xd(imag)<sp/>input<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="937"><highlight class="normal"><sp/><sp/><sp/><sp/>U0<sp/>=<sp/>pSrc16[i3<sp/>*<sp/>2U];</highlight></codeline>
<codeline lineno="938"><highlight class="normal"><sp/><sp/><sp/><sp/>U1<sp/>=<sp/>pSrc16[(i3<sp/>*<sp/>2U)<sp/>+<sp/>1U];</highlight></codeline>
<codeline lineno="939"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>T0<sp/>=<sp/>(yb<sp/>-<sp/>yd),<sp/>T1<sp/>=<sp/>(xb<sp/>-<sp/>xd)<sp/><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="940"><highlight class="normal"><sp/><sp/><sp/><sp/>T0<sp/>=<sp/>__SSAT(T0<sp/>-<sp/>U0,<sp/>16U);</highlight></codeline>
<codeline lineno="941"><highlight class="normal"><sp/><sp/><sp/><sp/>T1<sp/>=<sp/>__SSAT(T1<sp/>-<sp/>U1,<sp/>16U);</highlight></codeline>
<codeline lineno="942"><highlight class="normal"></highlight></codeline>
<codeline lineno="943"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/><sp/>writing<sp/>the<sp/>butterfly<sp/>processed<sp/>i0<sp/>+<sp/>fftLen/2<sp/>sample<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="944"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>xb&apos;<sp/>=<sp/>(xa+yb-xc-yd)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="945"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>yb&apos;<sp/>=<sp/>(ya-xb-yc+xd)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="946"><highlight class="normal"><sp/><sp/><sp/><sp/>pSrc16[i2<sp/>*<sp/>2U]<sp/>=<sp/>(S0<sp/>&gt;&gt;<sp/>1U)<sp/>+<sp/>(T1<sp/>&gt;&gt;<sp/>1U);</highlight></codeline>
<codeline lineno="947"><highlight class="normal"><sp/><sp/><sp/><sp/>pSrc16[(i2<sp/>*<sp/>2U)<sp/>+<sp/>1U]<sp/>=<sp/>(S1<sp/>&gt;&gt;<sp/>1U)<sp/>-<sp/>(T0<sp/>&gt;&gt;<sp/>1U);</highlight></codeline>
<codeline lineno="948"><highlight class="normal"></highlight></codeline>
<codeline lineno="949"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/><sp/>writing<sp/>the<sp/>butterfly<sp/>processed<sp/>i0<sp/>+<sp/>3fftLen/4<sp/>sample<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="950"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>xd&apos;<sp/>=<sp/>(xa-yb-xc+yd)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="951"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>yd&apos;<sp/>=<sp/>(ya+xb-yc-xd)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="952"><highlight class="normal"><sp/><sp/><sp/><sp/>pSrc16[i3<sp/>*<sp/>2U]<sp/>=<sp/>(S0<sp/>&gt;&gt;<sp/>1U)<sp/>-<sp/>(T1<sp/>&gt;&gt;<sp/>1U);</highlight></codeline>
<codeline lineno="953"><highlight class="normal"><sp/><sp/><sp/><sp/>pSrc16[(i3<sp/>*<sp/>2U)<sp/>+<sp/>1U]<sp/>=<sp/>(S1<sp/>&gt;&gt;<sp/>1U)<sp/>+<sp/>(T0<sp/>&gt;&gt;<sp/>1U);</highlight></codeline>
<codeline lineno="954"><highlight class="normal"></highlight></codeline>
<codeline lineno="955"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="956"><highlight class="normal"></highlight></codeline>
<codeline lineno="957"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>end<sp/>of<sp/>last<sp/>stage<sp/>process<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="958"><highlight class="normal"></highlight></codeline>
<codeline lineno="959"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>output<sp/>is<sp/>in<sp/>11.5(q5)<sp/>format<sp/>for<sp/>the<sp/>1024<sp/>point<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="960"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>output<sp/>is<sp/>in<sp/>9.7(q7)<sp/>format<sp/>for<sp/>the<sp/>256<sp/>point<sp/><sp/><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="961"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>output<sp/>is<sp/>in<sp/>7.9(q9)<sp/>format<sp/>for<sp/>the<sp/>64<sp/>point<sp/><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="962"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>output<sp/>is<sp/>in<sp/>5.11(q11)<sp/>format<sp/>for<sp/>the<sp/>16<sp/>point<sp/><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="963"><highlight class="normal"></highlight></codeline>
<codeline lineno="964"><highlight class="normal"></highlight><highlight class="preprocessor">#endif<sp/></highlight><highlight class="comment">/*<sp/>#if<sp/>defined<sp/>(RISCV_MATH_DSP)<sp/>*/</highlight><highlight class="preprocessor"></highlight></codeline>
<codeline lineno="965"><highlight class="preprocessor"></highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="966"><highlight class="normal">}</highlight></codeline>
<codeline lineno="967"><highlight class="normal"></highlight></codeline>
<codeline lineno="968"><highlight class="normal"></highlight></codeline>
<codeline lineno="978"><highlight class="comment">/*</highlight></codeline>
<codeline lineno="979"><highlight class="comment"><sp/>*<sp/>Radix-4<sp/>IFFT<sp/>algorithm<sp/>used<sp/>is<sp/>:</highlight></codeline>
<codeline lineno="980"><highlight class="comment"><sp/>*</highlight></codeline>
<codeline lineno="981"><highlight class="comment"><sp/>*<sp/>CIFFT<sp/>uses<sp/>same<sp/>twiddle<sp/>coefficients<sp/>as<sp/>CFFT<sp/>function</highlight></codeline>
<codeline lineno="982"><highlight class="comment"><sp/>*<sp/><sp/>x[k]<sp/>=<sp/>x[n]<sp/>+<sp/>(j)k<sp/>*<sp/>x[n<sp/>+<sp/>fftLen/4]<sp/>+<sp/>(-1)k<sp/>*<sp/>x[n+fftLen/2]<sp/>+<sp/>(-j)k<sp/>*<sp/>x[n+3*fftLen/4]</highlight></codeline>
<codeline lineno="983"><highlight class="comment"><sp/>*</highlight></codeline>
<codeline lineno="984"><highlight class="comment"><sp/>*</highlight></codeline>
<codeline lineno="985"><highlight class="comment"><sp/>*<sp/>IFFT<sp/>is<sp/>implemented<sp/>with<sp/>following<sp/>changes<sp/>in<sp/>equations<sp/>from<sp/>FFT</highlight></codeline>
<codeline lineno="986"><highlight class="comment"><sp/>*</highlight></codeline>
<codeline lineno="987"><highlight class="comment"><sp/>*<sp/>Input<sp/>real<sp/>and<sp/>imaginary<sp/>data:</highlight></codeline>
<codeline lineno="988"><highlight class="comment"><sp/>*<sp/>x(n)<sp/>=<sp/>xa<sp/>+<sp/>j<sp/>*<sp/>ya</highlight></codeline>
<codeline lineno="989"><highlight class="comment"><sp/>*<sp/>x(n+N/4<sp/>)<sp/>=<sp/>xb<sp/>+<sp/>j<sp/>*<sp/>yb</highlight></codeline>
<codeline lineno="990"><highlight class="comment"><sp/>*<sp/>x(n+N/2<sp/>)<sp/>=<sp/>xc<sp/>+<sp/>j<sp/>*<sp/>yc</highlight></codeline>
<codeline lineno="991"><highlight class="comment"><sp/>*<sp/>x(n+3N<sp/>4)<sp/>=<sp/>xd<sp/>+<sp/>j<sp/>*<sp/>yd</highlight></codeline>
<codeline lineno="992"><highlight class="comment"><sp/>*</highlight></codeline>
<codeline lineno="993"><highlight class="comment"><sp/>*</highlight></codeline>
<codeline lineno="994"><highlight class="comment"><sp/>*<sp/>Output<sp/>real<sp/>and<sp/>imaginary<sp/>data:</highlight></codeline>
<codeline lineno="995"><highlight class="comment"><sp/>*<sp/>x(4r)<sp/>=<sp/>xa&apos;+<sp/>j<sp/>*<sp/>ya&apos;</highlight></codeline>
<codeline lineno="996"><highlight class="comment"><sp/>*<sp/>x(4r+1)<sp/>=<sp/>xb&apos;+<sp/>j<sp/>*<sp/>yb&apos;</highlight></codeline>
<codeline lineno="997"><highlight class="comment"><sp/>*<sp/>x(4r+2)<sp/>=<sp/>xc&apos;+<sp/>j<sp/>*<sp/>yc&apos;</highlight></codeline>
<codeline lineno="998"><highlight class="comment"><sp/>*<sp/>x(4r+3)<sp/>=<sp/>xd&apos;+<sp/>j<sp/>*<sp/>yd&apos;</highlight></codeline>
<codeline lineno="999"><highlight class="comment"><sp/>*</highlight></codeline>
<codeline lineno="1000"><highlight class="comment"><sp/>*</highlight></codeline>
<codeline lineno="1001"><highlight class="comment"><sp/>*<sp/>Twiddle<sp/>factors<sp/>for<sp/>radix-4<sp/>IFFT:</highlight></codeline>
<codeline lineno="1002"><highlight class="comment"><sp/>*<sp/>Wn<sp/>=<sp/>co1<sp/>+<sp/>j<sp/>*<sp/>(si1)</highlight></codeline>
<codeline lineno="1003"><highlight class="comment"><sp/>*<sp/>W2n<sp/>=<sp/>co2<sp/>+<sp/>j<sp/>*<sp/>(si2)</highlight></codeline>
<codeline lineno="1004"><highlight class="comment"><sp/>*<sp/>W3n<sp/>=<sp/>co3<sp/>+<sp/>j<sp/>*<sp/>(si3)</highlight></codeline>
<codeline lineno="1005"><highlight class="comment"><sp/></highlight></codeline>
<codeline lineno="1006"><highlight class="comment"><sp/>*<sp/>The<sp/>real<sp/>and<sp/>imaginary<sp/>output<sp/>values<sp/>for<sp/>the<sp/>radix-4<sp/>butterfly<sp/>are</highlight></codeline>
<codeline lineno="1007"><highlight class="comment"><sp/>*<sp/>xa&apos;<sp/>=<sp/>xa<sp/>+<sp/>xb<sp/>+<sp/>xc<sp/>+<sp/>xd</highlight></codeline>
<codeline lineno="1008"><highlight class="comment"><sp/>*<sp/>ya&apos;<sp/>=<sp/>ya<sp/>+<sp/>yb<sp/>+<sp/>yc<sp/>+<sp/>yd</highlight></codeline>
<codeline lineno="1009"><highlight class="comment"><sp/>*<sp/>xb&apos;<sp/>=<sp/>(xa-yb-xc+yd)*<sp/>co1<sp/>-<sp/>(ya+xb-yc-xd)*<sp/>(si1)</highlight></codeline>
<codeline lineno="1010"><highlight class="comment"><sp/>*<sp/>yb&apos;<sp/>=<sp/>(ya+xb-yc-xd)*<sp/>co1<sp/>+<sp/>(xa-yb-xc+yd)*<sp/>(si1)</highlight></codeline>
<codeline lineno="1011"><highlight class="comment"><sp/>*<sp/>xc&apos;<sp/>=<sp/>(xa-xb+xc-xd)*<sp/>co2<sp/>-<sp/>(ya-yb+yc-yd)*<sp/>(si2)</highlight></codeline>
<codeline lineno="1012"><highlight class="comment"><sp/>*<sp/>yc&apos;<sp/>=<sp/>(ya-yb+yc-yd)*<sp/>co2<sp/>+<sp/>(xa-xb+xc-xd)*<sp/>(si2)</highlight></codeline>
<codeline lineno="1013"><highlight class="comment"><sp/>*<sp/>xd&apos;<sp/>=<sp/>(xa+yb-xc-yd)*<sp/>co3<sp/>-<sp/>(ya-xb-yc+xd)*<sp/>(si3)</highlight></codeline>
<codeline lineno="1014"><highlight class="comment"><sp/>*<sp/>yd&apos;<sp/>=<sp/>(ya-xb-yc+xd)*<sp/>co3<sp/>+<sp/>(xa+yb-xc-yd)*<sp/>(si3)</highlight></codeline>
<codeline lineno="1015"><highlight class="comment"><sp/>*</highlight></codeline>
<codeline lineno="1016"><highlight class="comment"><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1017"><highlight class="normal"></highlight></codeline>
<codeline lineno="1018"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>riscv_radix4_butterfly_inverse_q15(</highlight></codeline>
<codeline lineno="1019"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>q15_t<sp/>*<sp/>pSrc16,</highlight></codeline>
<codeline lineno="1020"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>uint32_t<sp/>fftLen,</highlight></codeline>
<codeline lineno="1021"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>q15_t<sp/>*<sp/>pCoef16,</highlight></codeline>
<codeline lineno="1022"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>uint32_t<sp/>twidCoefModifier)</highlight></codeline>
<codeline lineno="1023"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1024"><highlight class="normal"></highlight></codeline>
<codeline lineno="1025"><highlight class="normal"></highlight><highlight class="preprocessor">#if<sp/>defined<sp/>(RISCV_MATH_DSP)</highlight></codeline>
<codeline lineno="1026"><highlight class="preprocessor"></highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1027"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>q31_t<sp/>R,<sp/>S,<sp/>T,<sp/>U;</highlight></codeline>
<codeline lineno="1028"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>q31_t<sp/>C1,<sp/>C2,<sp/>C3,<sp/>out1,<sp/>out2;</highlight></codeline>
<codeline lineno="1029"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>uint32_t<sp/>n1,<sp/>n2,<sp/>ic,<sp/>i0,<sp/>j,<sp/>k;</highlight></codeline>
<codeline lineno="1030"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="1031"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>q15_t<sp/>*ptr1;</highlight></codeline>
<codeline lineno="1032"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>q15_t<sp/>*pSi0;</highlight></codeline>
<codeline lineno="1033"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>q15_t<sp/>*pSi1;</highlight></codeline>
<codeline lineno="1034"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>q15_t<sp/>*pSi2;</highlight></codeline>
<codeline lineno="1035"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>q15_t<sp/>*pSi3;</highlight></codeline>
<codeline lineno="1036"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="1037"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>q31_t<sp/>xaya,<sp/>xbyb,<sp/>xcyc,<sp/>xdyd;</highlight></codeline>
<codeline lineno="1038"><highlight class="normal"></highlight></codeline>
<codeline lineno="1039"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>Total<sp/>process<sp/>is<sp/>divided<sp/>into<sp/>three<sp/>stages<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1040"><highlight class="normal"></highlight></codeline>
<codeline lineno="1041"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>process<sp/>first<sp/>stage,<sp/>middle<sp/>stages,<sp/>&amp;<sp/>last<sp/>stage<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1042"><highlight class="normal"></highlight></codeline>
<codeline lineno="1043"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/><sp/>Initializations<sp/>for<sp/>the<sp/>first<sp/>stage<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1044"><highlight class="normal"><sp/><sp/>n2<sp/>=<sp/>fftLen;</highlight></codeline>
<codeline lineno="1045"><highlight class="normal"><sp/><sp/>n1<sp/>=<sp/>n2;</highlight></codeline>
<codeline lineno="1046"><highlight class="normal"></highlight></codeline>
<codeline lineno="1047"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>n2<sp/>=<sp/>fftLen/4<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1048"><highlight class="normal"><sp/><sp/>n2<sp/>&gt;&gt;=<sp/>2U;</highlight></codeline>
<codeline lineno="1049"><highlight class="normal"></highlight></codeline>
<codeline lineno="1050"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>Index<sp/>for<sp/>twiddle<sp/>coefficient<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1051"><highlight class="normal"><sp/><sp/>ic<sp/>=<sp/>0U;</highlight></codeline>
<codeline lineno="1052"><highlight class="normal"></highlight></codeline>
<codeline lineno="1053"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>Index<sp/>for<sp/>input<sp/>read<sp/>and<sp/>output<sp/>write<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1054"><highlight class="normal"><sp/><sp/>j<sp/>=<sp/>n2;</highlight></codeline>
<codeline lineno="1055"><highlight class="normal"></highlight></codeline>
<codeline lineno="1056"><highlight class="normal"><sp/><sp/>pSi0<sp/>=<sp/>pSrc16;</highlight></codeline>
<codeline lineno="1057"><highlight class="normal"><sp/><sp/>pSi1<sp/>=<sp/>pSi0<sp/>+<sp/>2<sp/>*<sp/>n2;</highlight></codeline>
<codeline lineno="1058"><highlight class="normal"><sp/><sp/>pSi2<sp/>=<sp/>pSi1<sp/>+<sp/>2<sp/>*<sp/>n2;</highlight></codeline>
<codeline lineno="1059"><highlight class="normal"><sp/><sp/>pSi3<sp/>=<sp/>pSi2<sp/>+<sp/>2<sp/>*<sp/>n2;</highlight></codeline>
<codeline lineno="1060"><highlight class="normal"></highlight></codeline>
<codeline lineno="1061"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>Input<sp/>is<sp/>in<sp/>1.15(q15)<sp/>format<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1062"><highlight class="normal"></highlight></codeline>
<codeline lineno="1063"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/><sp/>start<sp/>of<sp/>first<sp/>stage<sp/>process<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1064"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">do</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1065"><highlight class="normal"><sp/><sp/>{</highlight></codeline>
<codeline lineno="1066"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/><sp/>Butterfly<sp/>implementation<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1067"><highlight class="normal"></highlight></codeline>
<codeline lineno="1068"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/><sp/>Reading<sp/>i0,<sp/>i0+fftLen/2<sp/>inputs<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1069"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Read<sp/>ya<sp/>(real),<sp/>xa(imag)<sp/>input<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1070"><highlight class="normal"><sp/><sp/><sp/><sp/>T<sp/>=<sp/>read_q15x2<sp/>(pSi0);</highlight></codeline>
<codeline lineno="1071"><highlight class="normal"><sp/><sp/><sp/><sp/>T<sp/>=<sp/>__SHADD16(T,<sp/>0);</highlight></codeline>
<codeline lineno="1072"><highlight class="normal"><sp/><sp/><sp/><sp/>T<sp/>=<sp/>__SHADD16(T,<sp/>0);</highlight></codeline>
<codeline lineno="1073"><highlight class="normal"></highlight></codeline>
<codeline lineno="1074"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Read<sp/>yc<sp/>(real),<sp/>xc(imag)<sp/>input<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1075"><highlight class="normal"><sp/><sp/><sp/><sp/>S<sp/>=<sp/>read_q15x2<sp/>(pSi2);</highlight></codeline>
<codeline lineno="1076"><highlight class="normal"><sp/><sp/><sp/><sp/>S<sp/>=<sp/>__SHADD16(S,<sp/>0);</highlight></codeline>
<codeline lineno="1077"><highlight class="normal"><sp/><sp/><sp/><sp/>S<sp/>=<sp/>__SHADD16(S,<sp/>0);</highlight></codeline>
<codeline lineno="1078"><highlight class="normal"></highlight></codeline>
<codeline lineno="1079"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>R<sp/>=<sp/>packed((ya<sp/>+<sp/>yc),<sp/>(xa<sp/>+<sp/>xc)<sp/>)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1080"><highlight class="normal"><sp/><sp/><sp/><sp/>R<sp/>=<sp/>__QADD16(T,<sp/>S);</highlight></codeline>
<codeline lineno="1081"><highlight class="normal"></highlight></codeline>
<codeline lineno="1082"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>S<sp/>=<sp/>packed((ya<sp/>-<sp/>yc),<sp/>(xa<sp/>-<sp/>xc)<sp/>)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1083"><highlight class="normal"><sp/><sp/><sp/><sp/>S<sp/>=<sp/>__QSUB16(T,<sp/>S);</highlight></codeline>
<codeline lineno="1084"><highlight class="normal"></highlight></codeline>
<codeline lineno="1085"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/><sp/>Reading<sp/>i0+fftLen/4<sp/>,<sp/>i0+3fftLen/4<sp/>inputs<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1086"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Read<sp/>yb<sp/>(real),<sp/>xb(imag)<sp/>input<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1087"><highlight class="normal"><sp/><sp/><sp/><sp/>T<sp/>=<sp/>read_q15x2<sp/>(pSi1);</highlight></codeline>
<codeline lineno="1088"><highlight class="normal"><sp/><sp/><sp/><sp/>T<sp/>=<sp/>__SHADD16(T,<sp/>0);</highlight></codeline>
<codeline lineno="1089"><highlight class="normal"><sp/><sp/><sp/><sp/>T<sp/>=<sp/>__SHADD16(T,<sp/>0);</highlight></codeline>
<codeline lineno="1090"><highlight class="normal"></highlight></codeline>
<codeline lineno="1091"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Read<sp/>yd<sp/>(real),<sp/>xd(imag)<sp/>input<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1092"><highlight class="normal"><sp/><sp/><sp/><sp/>U<sp/>=<sp/>read_q15x2<sp/>(pSi3);</highlight></codeline>
<codeline lineno="1093"><highlight class="normal"><sp/><sp/><sp/><sp/>U<sp/>=<sp/>__SHADD16(U,<sp/>0);</highlight></codeline>
<codeline lineno="1094"><highlight class="normal"><sp/><sp/><sp/><sp/>U<sp/>=<sp/>__SHADD16(U,<sp/>0);</highlight></codeline>
<codeline lineno="1095"><highlight class="normal"></highlight></codeline>
<codeline lineno="1096"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>T<sp/>=<sp/>packed((yb<sp/>+<sp/>yd),<sp/>(xb<sp/>+<sp/>xd)<sp/>)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1097"><highlight class="normal"><sp/><sp/><sp/><sp/>T<sp/>=<sp/>__QADD16(T,<sp/>U);</highlight></codeline>
<codeline lineno="1098"><highlight class="normal"></highlight></codeline>
<codeline lineno="1099"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/><sp/>writing<sp/>the<sp/>butterfly<sp/>processed<sp/>i0<sp/>sample<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1100"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>xa&apos;<sp/>=<sp/>xa<sp/>+<sp/>xb<sp/>+<sp/>xc<sp/>+<sp/>xd<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1101"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>ya&apos;<sp/>=<sp/>ya<sp/>+<sp/>yb<sp/>+<sp/>yc<sp/>+<sp/>yd<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1102"><highlight class="normal"><sp/><sp/><sp/><sp/>write_q15x2_ia<sp/>(&amp;pSi0,<sp/>__SHADD16(R,<sp/>T));</highlight></codeline>
<codeline lineno="1103"><highlight class="normal"></highlight></codeline>
<codeline lineno="1104"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>R<sp/>=<sp/>packed((ya<sp/>+<sp/>yc)<sp/>-<sp/>(yb<sp/>+<sp/>yd),<sp/>(xa<sp/>+<sp/>xc)-<sp/>(xb<sp/>+<sp/>xd))<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1105"><highlight class="normal"><sp/><sp/><sp/><sp/>R<sp/>=<sp/>__QSUB16(R,<sp/>T);</highlight></codeline>
<codeline lineno="1106"><highlight class="normal"></highlight></codeline>
<codeline lineno="1107"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>co2<sp/>&amp;<sp/>si2<sp/>are<sp/>read<sp/>from<sp/>SIMD<sp/>Coefficient<sp/>pointer<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1108"><highlight class="normal"><sp/><sp/><sp/><sp/>C2<sp/>=<sp/>read_q15x2<sp/>((q15_t<sp/>*)<sp/>pCoef16<sp/>+<sp/>(4U<sp/>*<sp/>ic));</highlight></codeline>
<codeline lineno="1109"><highlight class="normal"></highlight></codeline>
<codeline lineno="1110"><highlight class="normal"></highlight><highlight class="preprocessor">#ifndef<sp/>RISCV_MATH_BIG_ENDIAN</highlight></codeline>
<codeline lineno="1111"><highlight class="preprocessor"></highlight><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>xc&apos;<sp/>=<sp/>(xa-xb+xc-xd)*<sp/>co2<sp/>+<sp/>(ya-yb+yc-yd)*<sp/>(si2)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1112"><highlight class="normal"><sp/><sp/><sp/><sp/>out1<sp/>=<sp/>__SMUSD(C2,<sp/>R)<sp/>&gt;&gt;<sp/>16U;</highlight></codeline>
<codeline lineno="1113"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>yc&apos;<sp/>=<sp/>(ya-yb+yc-yd)*<sp/>co2<sp/>-<sp/>(xa-xb+xc-xd)*<sp/>(si2)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1114"><highlight class="normal"><sp/><sp/><sp/><sp/>out2<sp/>=<sp/>__SMUADX(C2,<sp/>R);</highlight></codeline>
<codeline lineno="1115"><highlight class="normal"></highlight><highlight class="preprocessor">#else</highlight></codeline>
<codeline lineno="1116"><highlight class="preprocessor"></highlight><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>xc&apos;<sp/>=<sp/>(ya-yb+yc-yd)*<sp/>co2<sp/>-<sp/>(xa-xb+xc-xd)*<sp/>(si2)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1117"><highlight class="normal"><sp/><sp/><sp/><sp/>out1<sp/>=<sp/>__SMUADX(C2,<sp/>R)<sp/>&gt;&gt;<sp/>16U;</highlight></codeline>
<codeline lineno="1118"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>yc&apos;<sp/>=<sp/>(xa-xb+xc-xd)*<sp/>co2<sp/>+<sp/>(ya-yb+yc-yd)*<sp/>(si2)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1119"><highlight class="normal"><sp/><sp/><sp/><sp/>out2<sp/>=<sp/>__SMUSD(__QSUB16(0,<sp/>C2),<sp/>R);</highlight></codeline>
<codeline lineno="1120"><highlight class="normal"></highlight><highlight class="preprocessor">#endif<sp/></highlight><highlight class="comment">/*<sp/>#ifndef<sp/>RISCV_MATH_BIG_ENDIAN<sp/>*/</highlight><highlight class="preprocessor"></highlight></codeline>
<codeline lineno="1121"><highlight class="preprocessor"></highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1122"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/><sp/>Reading<sp/>i0+fftLen/4<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1123"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>T<sp/>=<sp/>packed(yb,<sp/>xb)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1124"><highlight class="normal"><sp/><sp/><sp/><sp/>T<sp/>=<sp/>read_q15x2<sp/>(pSi1);</highlight></codeline>
<codeline lineno="1125"><highlight class="normal"><sp/><sp/><sp/><sp/>T<sp/>=<sp/>__SHADD16(T,<sp/>0);</highlight></codeline>
<codeline lineno="1126"><highlight class="normal"><sp/><sp/><sp/><sp/>T<sp/>=<sp/>__SHADD16(T,<sp/>0);</highlight></codeline>
<codeline lineno="1127"><highlight class="normal"></highlight></codeline>
<codeline lineno="1128"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>writing<sp/>the<sp/>butterfly<sp/>processed<sp/>i0<sp/>+<sp/>fftLen/4<sp/>sample<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1129"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>writing<sp/>output(xc&apos;,<sp/>yc&apos;)<sp/>in<sp/>little<sp/>endian<sp/>format<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1130"><highlight class="normal"><sp/><sp/><sp/><sp/>write_q15x2_ia<sp/>(&amp;pSi1,<sp/>(q31_t)<sp/>((out2)<sp/>&amp;<sp/>0xFFFF0000)<sp/>|<sp/>(out1<sp/>&amp;<sp/>0x0000FFFF));</highlight></codeline>
<codeline lineno="1131"><highlight class="normal"></highlight></codeline>
<codeline lineno="1132"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/><sp/>Butterfly<sp/>calculations<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1133"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>U<sp/>=<sp/>packed(yd,<sp/>xd)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1134"><highlight class="normal"><sp/><sp/><sp/><sp/>U<sp/>=<sp/>read_q15x2<sp/>(pSi3);</highlight></codeline>
<codeline lineno="1135"><highlight class="normal"><sp/><sp/><sp/><sp/>U<sp/>=<sp/>__SHADD16(U,<sp/>0);</highlight></codeline>
<codeline lineno="1136"><highlight class="normal"><sp/><sp/><sp/><sp/>U<sp/>=<sp/>__SHADD16(U,<sp/>0);</highlight></codeline>
<codeline lineno="1137"><highlight class="normal"></highlight></codeline>
<codeline lineno="1138"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>T<sp/>=<sp/>packed(yb-yd,<sp/>xb-xd)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1139"><highlight class="normal"><sp/><sp/><sp/><sp/>T<sp/>=<sp/>__QSUB16(T,<sp/>U);</highlight></codeline>
<codeline lineno="1140"><highlight class="normal"></highlight></codeline>
<codeline lineno="1141"><highlight class="normal"></highlight><highlight class="preprocessor">#ifndef<sp/>RISCV_MATH_BIG_ENDIAN</highlight></codeline>
<codeline lineno="1142"><highlight class="preprocessor"></highlight><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>R<sp/>=<sp/>packed((ya-yc)<sp/>+<sp/>(xb-<sp/>xd)<sp/>,<sp/>(xa-xc)<sp/>-<sp/>(yb-yd))<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1143"><highlight class="normal"><sp/><sp/><sp/><sp/>R<sp/>=<sp/>__QSAX(S,<sp/>T);</highlight></codeline>
<codeline lineno="1144"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>S<sp/>=<sp/>packed((ya-yc)<sp/>+<sp/>(xb-<sp/>xd),<sp/><sp/>(xa-xc)<sp/>-<sp/>(yb-yd))<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1145"><highlight class="normal"><sp/><sp/><sp/><sp/>S<sp/>=<sp/>__QASX(S,<sp/>T);</highlight></codeline>
<codeline lineno="1146"><highlight class="normal"></highlight><highlight class="preprocessor">#else</highlight></codeline>
<codeline lineno="1147"><highlight class="preprocessor"></highlight><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>R<sp/>=<sp/>packed((ya-yc)<sp/>+<sp/>(xb-<sp/>xd)<sp/>,<sp/>(xa-xc)<sp/>-<sp/>(yb-yd))<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1148"><highlight class="normal"><sp/><sp/><sp/><sp/>R<sp/>=<sp/>__QASX(S,<sp/>T);</highlight></codeline>
<codeline lineno="1149"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>S<sp/>=<sp/>packed((ya-yc)<sp/>-<sp/>(xb-<sp/>xd),<sp/><sp/>(xa-xc)<sp/>+<sp/>(yb-yd))<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1150"><highlight class="normal"><sp/><sp/><sp/><sp/>S<sp/>=<sp/>__QSAX(S,<sp/>T);</highlight></codeline>
<codeline lineno="1151"><highlight class="normal"></highlight><highlight class="preprocessor">#endif<sp/></highlight><highlight class="comment">/*<sp/>#ifndef<sp/>RISCV_MATH_BIG_ENDIAN<sp/>*/</highlight><highlight class="preprocessor"></highlight></codeline>
<codeline lineno="1152"><highlight class="preprocessor"></highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1153"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>co1<sp/>&amp;<sp/>si1<sp/>are<sp/>read<sp/>from<sp/>SIMD<sp/>Coefficient<sp/>pointer<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1154"><highlight class="normal"><sp/><sp/><sp/><sp/>C1<sp/>=<sp/>read_q15x2<sp/>((q15_t<sp/>*)<sp/>pCoef16<sp/>+<sp/>(2U<sp/>*<sp/>ic));</highlight></codeline>
<codeline lineno="1155"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/><sp/>Butterfly<sp/>process<sp/>for<sp/>the<sp/>i0+fftLen/2<sp/>sample<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1156"><highlight class="normal"></highlight></codeline>
<codeline lineno="1157"><highlight class="normal"></highlight><highlight class="preprocessor">#ifndef<sp/>RISCV_MATH_BIG_ENDIAN</highlight></codeline>
<codeline lineno="1158"><highlight class="preprocessor"></highlight><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>xb&apos;<sp/>=<sp/>(xa+yb-xc-yd)*<sp/>co1<sp/>+<sp/>(ya-xb-yc+xd)*<sp/>(si1)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1159"><highlight class="normal"><sp/><sp/><sp/><sp/>out1<sp/>=<sp/>__SMUSD(C1,<sp/>S)<sp/>&gt;&gt;<sp/>16U;</highlight></codeline>
<codeline lineno="1160"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>yb&apos;<sp/>=<sp/>(ya-xb-yc+xd)*<sp/>co1<sp/>-<sp/>(xa+yb-xc-yd)*<sp/>(si1)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1161"><highlight class="normal"><sp/><sp/><sp/><sp/>out2<sp/>=<sp/>__SMUADX(C1,<sp/>S);</highlight></codeline>
<codeline lineno="1162"><highlight class="normal"></highlight><highlight class="preprocessor">#else</highlight></codeline>
<codeline lineno="1163"><highlight class="preprocessor"></highlight><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>xb&apos;<sp/>=<sp/>(ya-xb-yc+xd)*<sp/>co1<sp/>-<sp/>(xa+yb-xc-yd)*<sp/>(si1)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1164"><highlight class="normal"><sp/><sp/><sp/><sp/>out1<sp/>=<sp/>__SMUADX(C1,<sp/>S)<sp/>&gt;&gt;<sp/>16U;</highlight></codeline>
<codeline lineno="1165"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>yb&apos;<sp/>=<sp/>(xa+yb-xc-yd)*<sp/>co1<sp/>+<sp/>(ya-xb-yc+xd)*<sp/>(si1)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1166"><highlight class="normal"><sp/><sp/><sp/><sp/>out2<sp/>=<sp/>__SMUSD(__QSUB16(0,<sp/>C1),<sp/>S);</highlight></codeline>
<codeline lineno="1167"><highlight class="normal"></highlight><highlight class="preprocessor">#endif<sp/></highlight><highlight class="comment">/*<sp/>#ifndef<sp/>RISCV_MATH_BIG_ENDIAN<sp/>*/</highlight><highlight class="preprocessor"></highlight></codeline>
<codeline lineno="1168"><highlight class="preprocessor"></highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1169"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>writing<sp/>output(xb&apos;,<sp/>yb&apos;)<sp/>in<sp/>little<sp/>endian<sp/>format<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1170"><highlight class="normal"><sp/><sp/><sp/><sp/>write_q15x2_ia<sp/>(&amp;pSi2,<sp/>((out2)<sp/>&amp;<sp/>0xFFFF0000)<sp/>|<sp/>((out1)<sp/>&amp;<sp/>0x0000FFFF));</highlight></codeline>
<codeline lineno="1171"><highlight class="normal"></highlight></codeline>
<codeline lineno="1172"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>co3<sp/>&amp;<sp/>si3<sp/>are<sp/>read<sp/>from<sp/>SIMD<sp/>Coefficient<sp/>pointer<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1173"><highlight class="normal"><sp/><sp/><sp/><sp/>C3<sp/>=<sp/>read_q15x2<sp/>((q15_t<sp/>*)<sp/>pCoef16<sp/>+<sp/>(6U<sp/>*<sp/>ic));</highlight></codeline>
<codeline lineno="1174"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/><sp/>Butterfly<sp/>process<sp/>for<sp/>the<sp/>i0+3fftLen/4<sp/>sample<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1175"><highlight class="normal"></highlight></codeline>
<codeline lineno="1176"><highlight class="normal"></highlight><highlight class="preprocessor">#ifndef<sp/>RISCV_MATH_BIG_ENDIAN</highlight></codeline>
<codeline lineno="1177"><highlight class="preprocessor"></highlight><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>xd&apos;<sp/>=<sp/>(xa-yb-xc+yd)*<sp/>co3<sp/>+<sp/>(ya+xb-yc-xd)*<sp/>(si3)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1178"><highlight class="normal"><sp/><sp/><sp/><sp/>out1<sp/>=<sp/>__SMUSD(C3,<sp/>R)<sp/>&gt;&gt;<sp/>16U;</highlight></codeline>
<codeline lineno="1179"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>yd&apos;<sp/>=<sp/>(ya+xb-yc-xd)*<sp/>co3<sp/>-<sp/>(xa-yb-xc+yd)*<sp/>(si3)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1180"><highlight class="normal"><sp/><sp/><sp/><sp/>out2<sp/>=<sp/>__SMUADX(C3,<sp/>R);</highlight></codeline>
<codeline lineno="1181"><highlight class="normal"></highlight><highlight class="preprocessor">#else</highlight></codeline>
<codeline lineno="1182"><highlight class="preprocessor"></highlight><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>xd&apos;<sp/>=<sp/>(ya+xb-yc-xd)*<sp/>co3<sp/>-<sp/>(xa-yb-xc+yd)*<sp/>(si3)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1183"><highlight class="normal"><sp/><sp/><sp/><sp/>out1<sp/>=<sp/>__SMUADX(C3,<sp/>R)<sp/>&gt;&gt;<sp/>16U;</highlight></codeline>
<codeline lineno="1184"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>yd&apos;<sp/>=<sp/>(xa-yb-xc+yd)*<sp/>co3<sp/>+<sp/>(ya+xb-yc-xd)*<sp/>(si3)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1185"><highlight class="normal"><sp/><sp/><sp/><sp/>out2<sp/>=<sp/>__SMUSD(__QSUB16(0,<sp/>C3),<sp/>R);</highlight></codeline>
<codeline lineno="1186"><highlight class="normal"></highlight><highlight class="preprocessor">#endif<sp/></highlight><highlight class="comment">/*<sp/>#ifndef<sp/>RISCV_MATH_BIG_ENDIAN<sp/>*/</highlight><highlight class="preprocessor"></highlight></codeline>
<codeline lineno="1187"><highlight class="preprocessor"></highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1188"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>writing<sp/>output(xd&apos;,<sp/>yd&apos;)<sp/>in<sp/>little<sp/>endian<sp/>format<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1189"><highlight class="normal"><sp/><sp/><sp/><sp/>write_q15x2_ia<sp/>(&amp;pSi3,<sp/>((out2)<sp/>&amp;<sp/>0xFFFF0000)<sp/>|<sp/>(out1<sp/>&amp;<sp/>0x0000FFFF));</highlight></codeline>
<codeline lineno="1190"><highlight class="normal"></highlight></codeline>
<codeline lineno="1191"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/><sp/>Twiddle<sp/>coefficients<sp/>index<sp/>modifier<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1192"><highlight class="normal"><sp/><sp/><sp/><sp/>ic<sp/>=<sp/>ic<sp/>+<sp/>twidCoefModifier;</highlight></codeline>
<codeline lineno="1193"><highlight class="normal"></highlight></codeline>
<codeline lineno="1194"><highlight class="normal"><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">while</highlight><highlight class="normal"><sp/>(--j);</highlight></codeline>
<codeline lineno="1195"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>data<sp/>is<sp/>in<sp/>4.11(q11)<sp/>format<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1196"><highlight class="normal"></highlight></codeline>
<codeline lineno="1197"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>end<sp/>of<sp/>first<sp/>stage<sp/>process<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1198"><highlight class="normal"></highlight></codeline>
<codeline lineno="1199"><highlight class="normal"></highlight></codeline>
<codeline lineno="1200"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>start<sp/>of<sp/>middle<sp/>stage<sp/>process<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1201"><highlight class="normal"></highlight></codeline>
<codeline lineno="1202"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/><sp/>Twiddle<sp/>coefficients<sp/>index<sp/>modifier<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1203"><highlight class="normal"><sp/><sp/>twidCoefModifier<sp/>&lt;&lt;=<sp/>2U;</highlight></codeline>
<codeline lineno="1204"><highlight class="normal"></highlight></codeline>
<codeline lineno="1205"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/><sp/>Calculation<sp/>of<sp/>Middle<sp/>stage<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1206"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(k<sp/>=<sp/>fftLen<sp/>/<sp/>4U;<sp/>k<sp/>&gt;<sp/>4U;<sp/>k<sp/>&gt;&gt;=<sp/>2U)</highlight></codeline>
<codeline lineno="1207"><highlight class="normal"><sp/><sp/>{</highlight></codeline>
<codeline lineno="1208"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/><sp/>Initializations<sp/>for<sp/>the<sp/>middle<sp/>stage<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1209"><highlight class="normal"><sp/><sp/><sp/><sp/>n1<sp/>=<sp/>n2;</highlight></codeline>
<codeline lineno="1210"><highlight class="normal"><sp/><sp/><sp/><sp/>n2<sp/>&gt;&gt;=<sp/>2U;</highlight></codeline>
<codeline lineno="1211"><highlight class="normal"><sp/><sp/><sp/><sp/>ic<sp/>=<sp/>0U;</highlight></codeline>
<codeline lineno="1212"><highlight class="normal"></highlight></codeline>
<codeline lineno="1213"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(j<sp/>=<sp/>0U;<sp/>j<sp/>&lt;=<sp/>(n2<sp/>-<sp/>1U);<sp/>j++)</highlight></codeline>
<codeline lineno="1214"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1215"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/><sp/>index<sp/>calculation<sp/>for<sp/>the<sp/>coefficients<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1216"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>C1<sp/>=<sp/>read_q15x2<sp/>((q15_t<sp/>*)<sp/>pCoef16<sp/>+<sp/>(2U<sp/>*<sp/>ic));</highlight></codeline>
<codeline lineno="1217"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>C2<sp/>=<sp/>read_q15x2<sp/>((q15_t<sp/>*)<sp/>pCoef16<sp/>+<sp/>(4U<sp/>*<sp/>ic));</highlight></codeline>
<codeline lineno="1218"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>C3<sp/>=<sp/>read_q15x2<sp/>((q15_t<sp/>*)<sp/>pCoef16<sp/>+<sp/>(6U<sp/>*<sp/>ic));</highlight></codeline>
<codeline lineno="1219"><highlight class="normal"></highlight></codeline>
<codeline lineno="1220"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/><sp/>Twiddle<sp/>coefficients<sp/>index<sp/>modifier<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1221"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>ic<sp/>=<sp/>ic<sp/>+<sp/>twidCoefModifier;</highlight></codeline>
<codeline lineno="1222"><highlight class="normal"></highlight></codeline>
<codeline lineno="1223"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>pSi0<sp/>=<sp/>pSrc16<sp/>+<sp/>2<sp/>*<sp/>j;</highlight></codeline>
<codeline lineno="1224"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>pSi1<sp/>=<sp/>pSi0<sp/>+<sp/>2<sp/>*<sp/>n2;</highlight></codeline>
<codeline lineno="1225"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>pSi2<sp/>=<sp/>pSi1<sp/>+<sp/>2<sp/>*<sp/>n2;</highlight></codeline>
<codeline lineno="1226"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>pSi3<sp/>=<sp/>pSi2<sp/>+<sp/>2<sp/>*<sp/>n2;</highlight></codeline>
<codeline lineno="1227"><highlight class="normal"></highlight></codeline>
<codeline lineno="1228"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/><sp/>Butterfly<sp/>implementation<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1229"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(i0<sp/>=<sp/>j;<sp/>i0<sp/>&lt;<sp/>fftLen;<sp/>i0<sp/>+=<sp/>n1)</highlight></codeline>
<codeline lineno="1230"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1231"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/><sp/>Reading<sp/>i0,<sp/>i0+fftLen/2<sp/>inputs<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1232"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Read<sp/>ya<sp/>(real),<sp/>xa(imag)<sp/>input<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1233"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>T<sp/>=<sp/>read_q15x2<sp/>(pSi0);</highlight></codeline>
<codeline lineno="1234"><highlight class="normal"></highlight></codeline>
<codeline lineno="1235"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Read<sp/>yc<sp/>(real),<sp/>xc(imag)<sp/>input<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1236"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>S<sp/>=<sp/>read_q15x2<sp/>(pSi2);</highlight></codeline>
<codeline lineno="1237"><highlight class="normal"></highlight></codeline>
<codeline lineno="1238"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>R<sp/>=<sp/>packed(<sp/>(ya<sp/>+<sp/>yc),<sp/>(xa<sp/>+<sp/>xc))<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1239"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>R<sp/>=<sp/>__QADD16(T,<sp/>S);</highlight></codeline>
<codeline lineno="1240"><highlight class="normal"></highlight></codeline>
<codeline lineno="1241"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>S<sp/>=<sp/>packed((ya<sp/>-<sp/>yc),<sp/>(xa<sp/>-<sp/>xc))<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1242"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>S<sp/>=<sp/>__QSUB16(T,<sp/>S);</highlight></codeline>
<codeline lineno="1243"><highlight class="normal"></highlight></codeline>
<codeline lineno="1244"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/><sp/>Reading<sp/>i0+fftLen/4<sp/>,<sp/>i0+3fftLen/4<sp/>inputs<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1245"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Read<sp/>yb<sp/>(real),<sp/>xb(imag)<sp/>input<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1246"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>T<sp/>=<sp/>read_q15x2<sp/>(pSi1);</highlight></codeline>
<codeline lineno="1247"><highlight class="normal"></highlight></codeline>
<codeline lineno="1248"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Read<sp/>yd<sp/>(real),<sp/>xd(imag)<sp/>input<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1249"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>U<sp/>=<sp/>read_q15x2<sp/>(pSi3);</highlight></codeline>
<codeline lineno="1250"><highlight class="normal"></highlight></codeline>
<codeline lineno="1251"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>T<sp/>=<sp/>packed(<sp/>(yb<sp/>+<sp/>yd),<sp/>(xb<sp/>+<sp/>xd))<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1252"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>T<sp/>=<sp/>__QADD16(T,<sp/>U);</highlight></codeline>
<codeline lineno="1253"><highlight class="normal"></highlight></codeline>
<codeline lineno="1254"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/><sp/>writing<sp/>the<sp/>butterfly<sp/>processed<sp/>i0<sp/>sample<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1255"><highlight class="normal"></highlight></codeline>
<codeline lineno="1256"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>xa&apos;<sp/>=<sp/>xa<sp/>+<sp/>xb<sp/>+<sp/>xc<sp/>+<sp/>xd<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1257"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>ya&apos;<sp/>=<sp/>ya<sp/>+<sp/>yb<sp/>+<sp/>yc<sp/>+<sp/>yd<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1258"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>out1<sp/>=<sp/>__SHADD16(R,<sp/>T);</highlight></codeline>
<codeline lineno="1259"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>out1<sp/>=<sp/>__SHADD16(out1,<sp/>0);</highlight></codeline>
<codeline lineno="1260"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>write_q15x2<sp/>(pSi0,<sp/>out1);</highlight></codeline>
<codeline lineno="1261"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pSi0<sp/>+=<sp/>2<sp/>*<sp/>n1;</highlight></codeline>
<codeline lineno="1262"><highlight class="normal"></highlight></codeline>
<codeline lineno="1263"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>R<sp/>=<sp/>packed(<sp/>(ya<sp/>+<sp/>yc)<sp/>-<sp/>(yb<sp/>+<sp/>yd),<sp/>(xa<sp/>+<sp/>xc)<sp/>-<sp/>(xb<sp/>+<sp/>xd))<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1264"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>R<sp/>=<sp/>__SHSUB16(R,<sp/>T);</highlight></codeline>
<codeline lineno="1265"><highlight class="normal"></highlight></codeline>
<codeline lineno="1266"><highlight class="normal"></highlight><highlight class="preprocessor">#ifndef<sp/>RISCV_MATH_BIG_ENDIAN</highlight></codeline>
<codeline lineno="1267"><highlight class="preprocessor"></highlight><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>(ya-yb+yc-yd)*<sp/>(si2)<sp/>+<sp/>(xa-xb+xc-xd)*<sp/>co2<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1268"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>out1<sp/>=<sp/>__SMUSD(C2,<sp/>R)<sp/>&gt;&gt;<sp/>16U;</highlight></codeline>
<codeline lineno="1269"><highlight class="normal"></highlight></codeline>
<codeline lineno="1270"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>(ya-yb+yc-yd)*<sp/>co2<sp/>-<sp/>(xa-xb+xc-xd)*<sp/>(si2)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1271"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>out2<sp/>=<sp/>__SMUADX(C2,<sp/>R);</highlight></codeline>
<codeline lineno="1272"><highlight class="normal"></highlight><highlight class="preprocessor">#else</highlight></codeline>
<codeline lineno="1273"><highlight class="preprocessor"></highlight><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>(ya-yb+yc-yd)*<sp/>co2<sp/>-<sp/>(xa-xb+xc-xd)*<sp/>(si2)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1274"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>out1<sp/>=<sp/>__SMUADX(R,<sp/>C2)<sp/>&gt;&gt;<sp/>16U;</highlight></codeline>
<codeline lineno="1275"><highlight class="normal"></highlight></codeline>
<codeline lineno="1276"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>(ya-yb+yc-yd)*<sp/>(si2)<sp/>+<sp/>(xa-xb+xc-xd)*<sp/>co2<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1277"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>out2<sp/>=<sp/>__SMUSD(__QSUB16(0,<sp/>C2),<sp/>R);</highlight></codeline>
<codeline lineno="1278"><highlight class="normal"></highlight><highlight class="preprocessor">#endif<sp/></highlight><highlight class="comment">/*<sp/>#ifndef<sp/>RISCV_MATH_BIG_ENDIAN<sp/>*/</highlight><highlight class="preprocessor"></highlight></codeline>
<codeline lineno="1279"><highlight class="preprocessor"></highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1280"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/><sp/>Reading<sp/>i0+3fftLen/4<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1281"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Read<sp/>yb<sp/>(real),<sp/>xb(imag)<sp/>input<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1282"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>T<sp/>=<sp/>read_q15x2<sp/>(pSi1);</highlight></codeline>
<codeline lineno="1283"><highlight class="normal"></highlight></codeline>
<codeline lineno="1284"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/><sp/>writing<sp/>the<sp/>butterfly<sp/>processed<sp/>i0<sp/>+<sp/>fftLen/4<sp/>sample<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1285"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>xc&apos;<sp/>=<sp/>(xa-xb+xc-xd)*<sp/>co2<sp/>+<sp/>(ya-yb+yc-yd)*<sp/>(si2)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1286"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>yc&apos;<sp/>=<sp/>(ya-yb+yc-yd)*<sp/>co2<sp/>-<sp/>(xa-xb+xc-xd)*<sp/>(si2)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1287"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>write_q15x2<sp/>(pSi1,<sp/>((out2)<sp/>&amp;<sp/>0xFFFF0000)<sp/>|<sp/>(out1<sp/>&amp;<sp/>0x0000FFFF));</highlight></codeline>
<codeline lineno="1288"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pSi1<sp/>+=<sp/>2<sp/>*<sp/>n1;</highlight></codeline>
<codeline lineno="1289"><highlight class="normal"></highlight></codeline>
<codeline lineno="1290"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/><sp/>Butterfly<sp/>calculations<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1291"><highlight class="normal"></highlight></codeline>
<codeline lineno="1292"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Read<sp/>yd<sp/>(real),<sp/>xd(imag)<sp/>input<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1293"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>U<sp/>=<sp/>read_q15x2<sp/>(pSi3);</highlight></codeline>
<codeline lineno="1294"><highlight class="normal"></highlight></codeline>
<codeline lineno="1295"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>T<sp/>=<sp/>packed(yb-yd,<sp/>xb-xd)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1296"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>T<sp/>=<sp/>__QSUB16(T,<sp/>U);</highlight></codeline>
<codeline lineno="1297"><highlight class="normal"></highlight></codeline>
<codeline lineno="1298"><highlight class="normal"></highlight><highlight class="preprocessor">#ifndef<sp/>RISCV_MATH_BIG_ENDIAN</highlight></codeline>
<codeline lineno="1299"><highlight class="preprocessor"></highlight><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>R<sp/>=<sp/>packed((ya-yc)<sp/>+<sp/>(xb-<sp/>xd)<sp/>,<sp/>(xa-xc)<sp/>-<sp/>(yb-yd))<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1300"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>R<sp/>=<sp/>__SHSAX(S,<sp/>T);</highlight></codeline>
<codeline lineno="1301"><highlight class="normal"></highlight></codeline>
<codeline lineno="1302"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>S<sp/>=<sp/>packed((ya-yc)<sp/>-<sp/>(xb-<sp/>xd),<sp/><sp/>(xa-xc)<sp/>+<sp/>(yb-yd))<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1303"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>S<sp/>=<sp/>__SHASX(S,<sp/>T);</highlight></codeline>
<codeline lineno="1304"><highlight class="normal"></highlight></codeline>
<codeline lineno="1305"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/><sp/>Butterfly<sp/>process<sp/>for<sp/>the<sp/>i0+fftLen/2<sp/>sample<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1306"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>out1<sp/>=<sp/>__SMUSD(C1,<sp/>S)<sp/>&gt;&gt;<sp/>16U;</highlight></codeline>
<codeline lineno="1307"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>out2<sp/>=<sp/>__SMUADX(C1,<sp/>S);</highlight></codeline>
<codeline lineno="1308"><highlight class="normal"></highlight><highlight class="preprocessor">#else</highlight></codeline>
<codeline lineno="1309"><highlight class="preprocessor"></highlight><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>R<sp/>=<sp/>packed((ya-yc)<sp/>+<sp/>(xb-<sp/>xd)<sp/>,<sp/>(xa-xc)<sp/>-<sp/>(yb-yd))<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1310"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>R<sp/>=<sp/>__SHASX(S,<sp/>T);</highlight></codeline>
<codeline lineno="1311"><highlight class="normal"></highlight></codeline>
<codeline lineno="1312"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>S<sp/>=<sp/>packed((ya-yc)<sp/>-<sp/>(xb-<sp/>xd),<sp/><sp/>(xa-xc)<sp/>+<sp/>(yb-yd))<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1313"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>S<sp/>=<sp/>__SHSAX(S,<sp/>T);</highlight></codeline>
<codeline lineno="1314"><highlight class="normal"></highlight></codeline>
<codeline lineno="1315"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/><sp/>Butterfly<sp/>process<sp/>for<sp/>the<sp/>i0+fftLen/2<sp/>sample<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1316"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>out1<sp/>=<sp/>__SMUADX(S,<sp/>C1)<sp/>&gt;&gt;<sp/>16U;</highlight></codeline>
<codeline lineno="1317"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>out2<sp/>=<sp/>__SMUSD(__QSUB16(0,<sp/>C1),<sp/>S);</highlight></codeline>
<codeline lineno="1318"><highlight class="normal"></highlight><highlight class="preprocessor">#endif<sp/></highlight><highlight class="comment">/*<sp/>#ifndef<sp/>RISCV_MATH_BIG_ENDIAN<sp/>*/</highlight><highlight class="preprocessor"></highlight></codeline>
<codeline lineno="1319"><highlight class="preprocessor"></highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1320"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>xb&apos;<sp/>=<sp/>(xa+yb-xc-yd)*<sp/>co1<sp/>+<sp/>(ya-xb-yc+xd)*<sp/>(si1)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1321"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>yb&apos;<sp/>=<sp/>(ya-xb-yc+xd)*<sp/>co1<sp/>-<sp/>(xa+yb-xc-yd)*<sp/>(si1)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1322"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>write_q15x2<sp/>(pSi2,<sp/>((out2)<sp/>&amp;<sp/>0xFFFF0000)<sp/>|<sp/>(out1<sp/>&amp;<sp/>0x0000FFFF));</highlight></codeline>
<codeline lineno="1323"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pSi2<sp/>+=<sp/>2<sp/>*<sp/>n1;</highlight></codeline>
<codeline lineno="1324"><highlight class="normal"></highlight></codeline>
<codeline lineno="1325"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/><sp/>Butterfly<sp/>process<sp/>for<sp/>the<sp/>i0+3fftLen/4<sp/>sample<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1326"><highlight class="normal"></highlight></codeline>
<codeline lineno="1327"><highlight class="normal"></highlight><highlight class="preprocessor">#ifndef<sp/>RISCV_MATH_BIG_ENDIAN</highlight></codeline>
<codeline lineno="1328"><highlight class="preprocessor"></highlight><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>out1<sp/>=<sp/>__SMUSD(C3,<sp/>R)<sp/>&gt;&gt;<sp/>16U;</highlight></codeline>
<codeline lineno="1329"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>out2<sp/>=<sp/>__SMUADX(C3,<sp/>R);</highlight></codeline>
<codeline lineno="1330"><highlight class="normal"></highlight><highlight class="preprocessor">#else</highlight></codeline>
<codeline lineno="1331"><highlight class="preprocessor"></highlight><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>out1<sp/>=<sp/>__SMUADX(C3,<sp/>R)<sp/>&gt;&gt;<sp/>16U;</highlight></codeline>
<codeline lineno="1332"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>out2<sp/>=<sp/>__SMUSD(__QSUB16(0,<sp/>C3),<sp/>R);</highlight></codeline>
<codeline lineno="1333"><highlight class="normal"></highlight><highlight class="preprocessor">#endif<sp/></highlight><highlight class="comment">/*<sp/>#ifndef<sp/>RISCV_MATH_BIG_ENDIAN<sp/>*/</highlight><highlight class="preprocessor"></highlight></codeline>
<codeline lineno="1334"><highlight class="preprocessor"></highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1335"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>xd&apos;<sp/>=<sp/>(xa-yb-xc+yd)*<sp/>co3<sp/>+<sp/>(ya+xb-yc-xd)*<sp/>(si3)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1336"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>yd&apos;<sp/>=<sp/>(ya+xb-yc-xd)*<sp/>co3<sp/>-<sp/>(xa-yb-xc+yd)*<sp/>(si3)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1337"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>write_q15x2<sp/>(pSi3,<sp/>((out2)<sp/>&amp;<sp/>0xFFFF0000)<sp/>|<sp/>(out1<sp/>&amp;<sp/>0x0000FFFF));</highlight></codeline>
<codeline lineno="1338"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pSi3<sp/>+=<sp/>2<sp/>*<sp/>n1;</highlight></codeline>
<codeline lineno="1339"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1340"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1341"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/><sp/>Twiddle<sp/>coefficients<sp/>index<sp/>modifier<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1342"><highlight class="normal"><sp/><sp/><sp/><sp/>twidCoefModifier<sp/>&lt;&lt;=<sp/>2U;</highlight></codeline>
<codeline lineno="1343"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="1344"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>end<sp/>of<sp/>middle<sp/>stage<sp/>process<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1345"><highlight class="normal"></highlight></codeline>
<codeline lineno="1346"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>data<sp/>is<sp/>in<sp/>10.6(q6)<sp/>format<sp/>for<sp/>the<sp/>1024<sp/>point<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1347"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>data<sp/>is<sp/>in<sp/>8.8(q8)<sp/>format<sp/>for<sp/>the<sp/>256<sp/>point<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1348"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>data<sp/>is<sp/>in<sp/>6.10(q10)<sp/>format<sp/>for<sp/>the<sp/>64<sp/>point<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1349"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>data<sp/>is<sp/>in<sp/>4.12(q12)<sp/>format<sp/>for<sp/>the<sp/>16<sp/>point<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1350"><highlight class="normal"></highlight></codeline>
<codeline lineno="1351"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/><sp/>Initializations<sp/>for<sp/>the<sp/>last<sp/>stage<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1352"><highlight class="normal"><sp/><sp/>j<sp/>=<sp/>fftLen<sp/>&gt;&gt;<sp/>2;</highlight></codeline>
<codeline lineno="1353"><highlight class="normal"></highlight></codeline>
<codeline lineno="1354"><highlight class="normal"><sp/><sp/>ptr1<sp/>=<sp/>&amp;pSrc16[0];</highlight></codeline>
<codeline lineno="1355"><highlight class="normal"></highlight></codeline>
<codeline lineno="1356"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>start<sp/>of<sp/>last<sp/>stage<sp/>process<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1357"><highlight class="normal"></highlight></codeline>
<codeline lineno="1358"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/><sp/>Butterfly<sp/>implementation<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1359"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">do</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1360"><highlight class="normal"><sp/><sp/>{</highlight></codeline>
<codeline lineno="1361"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Read<sp/>xa<sp/>(real),<sp/>ya(imag)<sp/>input<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1362"><highlight class="normal"><sp/><sp/><sp/><sp/>xaya<sp/>=<sp/>read_q15x2_ia<sp/>((q15_t<sp/>**)<sp/>&amp;ptr1);</highlight></codeline>
<codeline lineno="1363"><highlight class="normal"></highlight></codeline>
<codeline lineno="1364"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Read<sp/>xb<sp/>(real),<sp/>yb(imag)<sp/>input<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1365"><highlight class="normal"><sp/><sp/><sp/><sp/>xbyb<sp/>=<sp/>read_q15x2_ia<sp/>((q15_t<sp/>**)<sp/>&amp;ptr1);</highlight></codeline>
<codeline lineno="1366"><highlight class="normal"></highlight></codeline>
<codeline lineno="1367"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Read<sp/>xc<sp/>(real),<sp/>yc(imag)<sp/>input<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1368"><highlight class="normal"><sp/><sp/><sp/><sp/>xcyc<sp/>=<sp/>read_q15x2_ia<sp/>((q15_t<sp/>**)<sp/>&amp;ptr1);</highlight></codeline>
<codeline lineno="1369"><highlight class="normal"></highlight></codeline>
<codeline lineno="1370"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Read<sp/>xd<sp/>(real),<sp/>yd(imag)<sp/>input<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1371"><highlight class="normal"><sp/><sp/><sp/><sp/>xdyd<sp/>=<sp/>read_q15x2_ia<sp/>((q15_t<sp/>**)<sp/>&amp;ptr1);</highlight></codeline>
<codeline lineno="1372"><highlight class="normal"></highlight></codeline>
<codeline lineno="1373"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>R<sp/>=<sp/>packed((ya<sp/>+<sp/>yc),<sp/>(xa<sp/>+<sp/>xc))<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1374"><highlight class="normal"><sp/><sp/><sp/><sp/>R<sp/>=<sp/>__QADD16(xaya,<sp/>xcyc);</highlight></codeline>
<codeline lineno="1375"><highlight class="normal"></highlight></codeline>
<codeline lineno="1376"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>T<sp/>=<sp/>packed((yb<sp/>+<sp/>yd),<sp/>(xb<sp/>+<sp/>xd))<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1377"><highlight class="normal"><sp/><sp/><sp/><sp/>T<sp/>=<sp/>__QADD16(xbyb,<sp/>xdyd);</highlight></codeline>
<codeline lineno="1378"><highlight class="normal"></highlight></codeline>
<codeline lineno="1379"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>pointer<sp/>updation<sp/>for<sp/>writing<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1380"><highlight class="normal"><sp/><sp/><sp/><sp/>ptr1<sp/>=<sp/>ptr1<sp/>-<sp/>8U;</highlight></codeline>
<codeline lineno="1381"><highlight class="normal"></highlight></codeline>
<codeline lineno="1382"><highlight class="normal"></highlight></codeline>
<codeline lineno="1383"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>xa&apos;<sp/>=<sp/>xa<sp/>+<sp/>xb<sp/>+<sp/>xc<sp/>+<sp/>xd<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1384"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>ya&apos;<sp/>=<sp/>ya<sp/>+<sp/>yb<sp/>+<sp/>yc<sp/>+<sp/>yd<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1385"><highlight class="normal"><sp/><sp/><sp/><sp/>write_q15x2_ia<sp/>(&amp;ptr1,<sp/>__SHADD16(R,<sp/>T));</highlight></codeline>
<codeline lineno="1386"><highlight class="normal"></highlight></codeline>
<codeline lineno="1387"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>T<sp/>=<sp/>packed((yb<sp/>+<sp/>yd),<sp/>(xb<sp/>+<sp/>xd))<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1388"><highlight class="normal"><sp/><sp/><sp/><sp/>T<sp/>=<sp/>__QADD16(xbyb,<sp/>xdyd);</highlight></codeline>
<codeline lineno="1389"><highlight class="normal"></highlight></codeline>
<codeline lineno="1390"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>xc&apos;<sp/>=<sp/>(xa-xb+xc-xd)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1391"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>yc&apos;<sp/>=<sp/>(ya-yb+yc-yd)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1392"><highlight class="normal"><sp/><sp/><sp/><sp/>write_q15x2_ia<sp/>(&amp;ptr1,<sp/>__SHSUB16(R,<sp/>T));</highlight></codeline>
<codeline lineno="1393"><highlight class="normal"></highlight></codeline>
<codeline lineno="1394"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>S<sp/>=<sp/>packed((ya<sp/>-<sp/>yc),<sp/>(xa<sp/>-<sp/>xc))<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1395"><highlight class="normal"><sp/><sp/><sp/><sp/>S<sp/>=<sp/>__QSUB16(xaya,<sp/>xcyc);</highlight></codeline>
<codeline lineno="1396"><highlight class="normal"></highlight></codeline>
<codeline lineno="1397"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Read<sp/>yd<sp/>(real),<sp/>xd(imag)<sp/>input<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1398"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>T<sp/>=<sp/>packed(<sp/>(yb<sp/>-<sp/>yd),<sp/>(xb<sp/>-<sp/>xd))<sp/><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1399"><highlight class="normal"><sp/><sp/><sp/><sp/>U<sp/>=<sp/>__QSUB16(xbyb,<sp/>xdyd);</highlight></codeline>
<codeline lineno="1400"><highlight class="normal"></highlight></codeline>
<codeline lineno="1401"><highlight class="normal"></highlight><highlight class="preprocessor">#ifndef<sp/>RISCV_MATH_BIG_ENDIAN</highlight></codeline>
<codeline lineno="1402"><highlight class="preprocessor"></highlight><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>xb&apos;<sp/>=<sp/>(xa+yb-xc-yd)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1403"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>yb&apos;<sp/>=<sp/>(ya-xb-yc+xd)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1404"><highlight class="normal"><sp/><sp/><sp/><sp/>write_q15x2_ia<sp/>(&amp;ptr1,<sp/>__SHASX(S,<sp/>U));</highlight></codeline>
<codeline lineno="1405"><highlight class="normal"></highlight></codeline>
<codeline lineno="1406"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>xd&apos;<sp/>=<sp/>(xa-yb-xc+yd)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1407"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>yd&apos;<sp/>=<sp/>(ya+xb-yc-xd)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1408"><highlight class="normal"><sp/><sp/><sp/><sp/>write_q15x2_ia<sp/>(&amp;ptr1,<sp/>__SHSAX(S,<sp/>U));</highlight></codeline>
<codeline lineno="1409"><highlight class="normal"></highlight><highlight class="preprocessor">#else</highlight></codeline>
<codeline lineno="1410"><highlight class="preprocessor"></highlight><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>xb&apos;<sp/>=<sp/>(xa+yb-xc-yd)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1411"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>yb&apos;<sp/>=<sp/>(ya-xb-yc+xd)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1412"><highlight class="normal"><sp/><sp/><sp/><sp/>write_q15x2_ia<sp/>(&amp;ptr1,<sp/>__SHSAX(S,<sp/>U));</highlight></codeline>
<codeline lineno="1413"><highlight class="normal"></highlight></codeline>
<codeline lineno="1414"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>xd&apos;<sp/>=<sp/>(xa-yb-xc+yd)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1415"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>yd&apos;<sp/>=<sp/>(ya+xb-yc-xd)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1416"><highlight class="normal"><sp/><sp/><sp/><sp/>write_q15x2_ia<sp/>(&amp;ptr1,<sp/>__SHASX(S,<sp/>U));</highlight></codeline>
<codeline lineno="1417"><highlight class="normal"></highlight><highlight class="preprocessor">#endif<sp/></highlight><highlight class="comment">/*<sp/>#ifndef<sp/>RISCV_MATH_BIG_ENDIAN<sp/>*/</highlight><highlight class="preprocessor"></highlight></codeline>
<codeline lineno="1418"><highlight class="preprocessor"></highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1419"><highlight class="normal"><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">while</highlight><highlight class="normal"><sp/>(--j);</highlight></codeline>
<codeline lineno="1420"><highlight class="normal"></highlight></codeline>
<codeline lineno="1421"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>end<sp/>of<sp/>last<sp/>stage<sp/><sp/>process<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1422"><highlight class="normal"></highlight></codeline>
<codeline lineno="1423"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>output<sp/>is<sp/>in<sp/>11.5(q5)<sp/>format<sp/>for<sp/>the<sp/>1024<sp/>point<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1424"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>output<sp/>is<sp/>in<sp/>9.7(q7)<sp/>format<sp/>for<sp/>the<sp/>256<sp/>point<sp/><sp/><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1425"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>output<sp/>is<sp/>in<sp/>7.9(q9)<sp/>format<sp/>for<sp/>the<sp/>64<sp/>point<sp/><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1426"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>output<sp/>is<sp/>in<sp/>5.11(q11)<sp/>format<sp/>for<sp/>the<sp/>16<sp/>point<sp/><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1427"><highlight class="normal"></highlight></codeline>
<codeline lineno="1428"><highlight class="normal"></highlight></codeline>
<codeline lineno="1429"><highlight class="normal"></highlight><highlight class="preprocessor">#else<sp/></highlight><highlight class="comment">/*<sp/>riscv_radix4_butterfly_inverse_q15<sp/>*/</highlight><highlight class="preprocessor"></highlight></codeline>
<codeline lineno="1430"><highlight class="preprocessor"></highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1431"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>q15_t<sp/>R0,<sp/>R1,<sp/>S0,<sp/>S1,<sp/>T0,<sp/>T1,<sp/>U0,<sp/>U1;</highlight></codeline>
<codeline lineno="1432"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>q15_t<sp/>Co1,<sp/>Si1,<sp/>Co2,<sp/>Si2,<sp/>Co3,<sp/>Si3,<sp/>out1,<sp/>out2;</highlight></codeline>
<codeline lineno="1433"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>uint32_t<sp/>n1,<sp/>n2,<sp/>ic,<sp/>i0,<sp/>i1,<sp/>i2,<sp/>i3,<sp/>j,<sp/>k;</highlight></codeline>
<codeline lineno="1434"><highlight class="normal"></highlight></codeline>
<codeline lineno="1435"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>Total<sp/>process<sp/>is<sp/>divided<sp/>into<sp/>three<sp/>stages<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1436"><highlight class="normal"></highlight></codeline>
<codeline lineno="1437"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>process<sp/>first<sp/>stage,<sp/>middle<sp/>stages,<sp/>&amp;<sp/>last<sp/>stage<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1438"><highlight class="normal"></highlight></codeline>
<codeline lineno="1439"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/><sp/>Initializations<sp/>for<sp/>the<sp/>first<sp/>stage<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1440"><highlight class="normal"><sp/><sp/>n2<sp/>=<sp/>fftLen;</highlight></codeline>
<codeline lineno="1441"><highlight class="normal"><sp/><sp/>n1<sp/>=<sp/>n2;</highlight></codeline>
<codeline lineno="1442"><highlight class="normal"></highlight></codeline>
<codeline lineno="1443"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>n2<sp/>=<sp/>fftLen/4<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1444"><highlight class="normal"><sp/><sp/>n2<sp/>&gt;&gt;=<sp/>2U;</highlight></codeline>
<codeline lineno="1445"><highlight class="normal"></highlight></codeline>
<codeline lineno="1446"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>Index<sp/>for<sp/>twiddle<sp/>coefficient<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1447"><highlight class="normal"><sp/><sp/>ic<sp/>=<sp/>0U;</highlight></codeline>
<codeline lineno="1448"><highlight class="normal"></highlight></codeline>
<codeline lineno="1449"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>Index<sp/>for<sp/>input<sp/>read<sp/>and<sp/>output<sp/>write<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1450"><highlight class="normal"><sp/><sp/>i0<sp/>=<sp/>0U;</highlight></codeline>
<codeline lineno="1451"><highlight class="normal"></highlight></codeline>
<codeline lineno="1452"><highlight class="normal"><sp/><sp/>j<sp/>=<sp/>n2;</highlight></codeline>
<codeline lineno="1453"><highlight class="normal"></highlight></codeline>
<codeline lineno="1454"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>Input<sp/>is<sp/>in<sp/>1.15(q15)<sp/>format<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1455"><highlight class="normal"></highlight></codeline>
<codeline lineno="1456"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/><sp/>Start<sp/>of<sp/>first<sp/>stage<sp/>process<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1457"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">do</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1458"><highlight class="normal"><sp/><sp/>{</highlight></codeline>
<codeline lineno="1459"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/><sp/>Butterfly<sp/>implementation<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1460"><highlight class="normal"></highlight></codeline>
<codeline lineno="1461"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/><sp/>index<sp/>calculation<sp/>for<sp/>the<sp/>input<sp/>as,<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1462"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/><sp/>pSrc16[i0<sp/>+<sp/>0],<sp/>pSrc16[i0<sp/>+<sp/>fftLen/4],<sp/>pSrc16[i0<sp/>+<sp/>fftLen/2],<sp/>pSrc16[i0<sp/>+<sp/>3fftLen/4]<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1463"><highlight class="normal"><sp/><sp/><sp/><sp/>i1<sp/>=<sp/>i0<sp/>+<sp/>n2;</highlight></codeline>
<codeline lineno="1464"><highlight class="normal"><sp/><sp/><sp/><sp/>i2<sp/>=<sp/>i1<sp/>+<sp/>n2;</highlight></codeline>
<codeline lineno="1465"><highlight class="normal"><sp/><sp/><sp/><sp/>i3<sp/>=<sp/>i2<sp/>+<sp/>n2;</highlight></codeline>
<codeline lineno="1466"><highlight class="normal"></highlight></codeline>
<codeline lineno="1467"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/><sp/>Reading<sp/>i0,<sp/>i0+fftLen/2<sp/>inputs<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1468"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>input<sp/>is<sp/>down<sp/>scale<sp/>by<sp/>4<sp/>to<sp/>avoid<sp/>overflow<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1469"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Read<sp/>ya<sp/>(real),<sp/>xa(imag)<sp/>input<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1470"><highlight class="normal"><sp/><sp/><sp/><sp/>T0<sp/>=<sp/>pSrc16[i0<sp/>*<sp/>2U]<sp/>&gt;&gt;<sp/>2U;</highlight></codeline>
<codeline lineno="1471"><highlight class="normal"><sp/><sp/><sp/><sp/>T1<sp/>=<sp/>pSrc16[(i0<sp/>*<sp/>2U)<sp/>+<sp/>1U]<sp/>&gt;&gt;<sp/>2U;</highlight></codeline>
<codeline lineno="1472"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>input<sp/>is<sp/>down<sp/>scale<sp/>by<sp/>4<sp/>to<sp/>avoid<sp/>overflow<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1473"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Read<sp/>yc<sp/>(real),<sp/>xc(imag)<sp/>input<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1474"><highlight class="normal"><sp/><sp/><sp/><sp/>S0<sp/>=<sp/>pSrc16[i2<sp/>*<sp/>2U]<sp/>&gt;&gt;<sp/>2U;</highlight></codeline>
<codeline lineno="1475"><highlight class="normal"><sp/><sp/><sp/><sp/>S1<sp/>=<sp/>pSrc16[(i2<sp/>*<sp/>2U)<sp/>+<sp/>1U]<sp/>&gt;&gt;<sp/>2U;</highlight></codeline>
<codeline lineno="1476"><highlight class="normal"></highlight></codeline>
<codeline lineno="1477"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>R0<sp/>=<sp/>(ya<sp/>+<sp/>yc),<sp/>R1<sp/>=<sp/>(xa<sp/>+<sp/>xc)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1478"><highlight class="normal"><sp/><sp/><sp/><sp/>R0<sp/>=<sp/>__SSAT(T0<sp/>+<sp/>S0,<sp/>16U);</highlight></codeline>
<codeline lineno="1479"><highlight class="normal"><sp/><sp/><sp/><sp/>R1<sp/>=<sp/>__SSAT(T1<sp/>+<sp/>S1,<sp/>16U);</highlight></codeline>
<codeline lineno="1480"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>S0<sp/>=<sp/>(ya<sp/>-<sp/>yc),<sp/>S1<sp/>=<sp/>(xa<sp/>-<sp/>xc)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1481"><highlight class="normal"><sp/><sp/><sp/><sp/>S0<sp/>=<sp/>__SSAT(T0<sp/>-<sp/>S0,<sp/>16U);</highlight></codeline>
<codeline lineno="1482"><highlight class="normal"><sp/><sp/><sp/><sp/>S1<sp/>=<sp/>__SSAT(T1<sp/>-<sp/>S1,<sp/>16U);</highlight></codeline>
<codeline lineno="1483"><highlight class="normal"></highlight></codeline>
<codeline lineno="1484"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/><sp/>Reading<sp/>i0+fftLen/4<sp/>,<sp/>i0+3fftLen/4<sp/>inputs<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1485"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>input<sp/>is<sp/>down<sp/>scale<sp/>by<sp/>4<sp/>to<sp/>avoid<sp/>overflow<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1486"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Read<sp/>yb<sp/>(real),<sp/>xb(imag)<sp/>input<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1487"><highlight class="normal"><sp/><sp/><sp/><sp/>T0<sp/>=<sp/>pSrc16[i1<sp/>*<sp/>2U]<sp/>&gt;&gt;<sp/>2U;</highlight></codeline>
<codeline lineno="1488"><highlight class="normal"><sp/><sp/><sp/><sp/>T1<sp/>=<sp/>pSrc16[(i1<sp/>*<sp/>2U)<sp/>+<sp/>1U]<sp/>&gt;&gt;<sp/>2U;</highlight></codeline>
<codeline lineno="1489"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Read<sp/>yd<sp/>(real),<sp/>xd(imag)<sp/>input<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1490"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>input<sp/>is<sp/>down<sp/>scale<sp/>by<sp/>4<sp/>to<sp/>avoid<sp/>overflow<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1491"><highlight class="normal"><sp/><sp/><sp/><sp/>U0<sp/>=<sp/>pSrc16[i3<sp/>*<sp/>2U]<sp/>&gt;&gt;<sp/>2U;</highlight></codeline>
<codeline lineno="1492"><highlight class="normal"><sp/><sp/><sp/><sp/>U1<sp/>=<sp/>pSrc16[(i3<sp/>*<sp/>2U)<sp/>+<sp/>1U]<sp/>&gt;&gt;<sp/>2U;</highlight></codeline>
<codeline lineno="1493"><highlight class="normal"></highlight></codeline>
<codeline lineno="1494"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>T0<sp/>=<sp/>(yb<sp/>+<sp/>yd),<sp/>T1<sp/>=<sp/>(xb<sp/>+<sp/>xd)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1495"><highlight class="normal"><sp/><sp/><sp/><sp/>T0<sp/>=<sp/>__SSAT(T0<sp/>+<sp/>U0,<sp/>16U);</highlight></codeline>
<codeline lineno="1496"><highlight class="normal"><sp/><sp/><sp/><sp/>T1<sp/>=<sp/>__SSAT(T1<sp/>+<sp/>U1,<sp/>16U);</highlight></codeline>
<codeline lineno="1497"><highlight class="normal"></highlight></codeline>
<codeline lineno="1498"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/><sp/>writing<sp/>the<sp/>butterfly<sp/>processed<sp/>i0<sp/>sample<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1499"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>xa&apos;<sp/>=<sp/>xa<sp/>+<sp/>xb<sp/>+<sp/>xc<sp/>+<sp/>xd<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1500"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>ya&apos;<sp/>=<sp/>ya<sp/>+<sp/>yb<sp/>+<sp/>yc<sp/>+<sp/>yd<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1501"><highlight class="normal"><sp/><sp/><sp/><sp/>pSrc16[i0<sp/>*<sp/>2U]<sp/>=<sp/>(R0<sp/>&gt;&gt;<sp/>1U)<sp/>+<sp/>(T0<sp/>&gt;&gt;<sp/>1U);</highlight></codeline>
<codeline lineno="1502"><highlight class="normal"><sp/><sp/><sp/><sp/>pSrc16[(i0<sp/>*<sp/>2U)<sp/>+<sp/>1U]<sp/>=<sp/>(R1<sp/>&gt;&gt;<sp/>1U)<sp/>+<sp/>(T1<sp/>&gt;&gt;<sp/>1U);</highlight></codeline>
<codeline lineno="1503"><highlight class="normal"></highlight></codeline>
<codeline lineno="1504"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>R0<sp/>=<sp/>(ya<sp/>+<sp/>yc)<sp/>-<sp/>(yb<sp/>+<sp/>yd),<sp/>R1<sp/>=<sp/>(xa<sp/>+<sp/>xc)-<sp/>(xb<sp/>+<sp/>xd)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1505"><highlight class="normal"><sp/><sp/><sp/><sp/>R0<sp/>=<sp/>__SSAT(R0<sp/>-<sp/>T0,<sp/>16U);</highlight></codeline>
<codeline lineno="1506"><highlight class="normal"><sp/><sp/><sp/><sp/>R1<sp/>=<sp/>__SSAT(R1<sp/>-<sp/>T1,<sp/>16U);</highlight></codeline>
<codeline lineno="1507"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>co2<sp/>&amp;<sp/>si2<sp/>are<sp/>read<sp/>from<sp/>Coefficient<sp/>pointer<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1508"><highlight class="normal"><sp/><sp/><sp/><sp/>Co2<sp/>=<sp/>pCoef16[2U<sp/>*<sp/>ic<sp/>*<sp/>2U];</highlight></codeline>
<codeline lineno="1509"><highlight class="normal"><sp/><sp/><sp/><sp/>Si2<sp/>=<sp/>pCoef16[(2U<sp/>*<sp/>ic<sp/>*<sp/>2U)<sp/>+<sp/>1U];</highlight></codeline>
<codeline lineno="1510"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>xc&apos;<sp/>=<sp/>(xa-xb+xc-xd)*<sp/>co2<sp/>-<sp/>(ya-yb+yc-yd)*<sp/>(si2)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1511"><highlight class="normal"><sp/><sp/><sp/><sp/>out1<sp/>=<sp/>(q15_t)<sp/>((Co2<sp/>*<sp/>R0<sp/>-<sp/>Si2<sp/>*<sp/>R1)<sp/>&gt;&gt;<sp/>16U);</highlight></codeline>
<codeline lineno="1512"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>yc&apos;<sp/>=<sp/>(ya-yb+yc-yd)*<sp/>co2<sp/>+<sp/>(xa-xb+xc-xd)*<sp/>(si2)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1513"><highlight class="normal"><sp/><sp/><sp/><sp/>out2<sp/>=<sp/>(q15_t)<sp/>((Si2<sp/>*<sp/>R0<sp/>+<sp/>Co2<sp/>*<sp/>R1)<sp/>&gt;&gt;<sp/>16U);</highlight></codeline>
<codeline lineno="1514"><highlight class="normal"></highlight></codeline>
<codeline lineno="1515"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/><sp/>Reading<sp/>i0+fftLen/4<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1516"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>input<sp/>is<sp/>down<sp/>scale<sp/>by<sp/>4<sp/>to<sp/>avoid<sp/>overflow<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1517"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>T0<sp/>=<sp/>yb,<sp/>T1<sp/>=<sp/>xb<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1518"><highlight class="normal"><sp/><sp/><sp/><sp/>T0<sp/>=<sp/>pSrc16[i1<sp/>*<sp/>2U]<sp/>&gt;&gt;<sp/>2U;</highlight></codeline>
<codeline lineno="1519"><highlight class="normal"><sp/><sp/><sp/><sp/>T1<sp/>=<sp/>pSrc16[(i1<sp/>*<sp/>2U)<sp/>+<sp/>1U]<sp/>&gt;&gt;<sp/>2U;</highlight></codeline>
<codeline lineno="1520"><highlight class="normal"></highlight></codeline>
<codeline lineno="1521"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>writing<sp/>the<sp/>butterfly<sp/>processed<sp/>i0<sp/>+<sp/>fftLen/4<sp/>sample<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1522"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>writing<sp/>output(xc&apos;,<sp/>yc&apos;)<sp/>in<sp/>little<sp/>endian<sp/>format<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1523"><highlight class="normal"><sp/><sp/><sp/><sp/>pSrc16[i1<sp/>*<sp/>2U]<sp/>=<sp/>out1;</highlight></codeline>
<codeline lineno="1524"><highlight class="normal"><sp/><sp/><sp/><sp/>pSrc16[(i1<sp/>*<sp/>2U)<sp/>+<sp/>1U]<sp/>=<sp/>out2;</highlight></codeline>
<codeline lineno="1525"><highlight class="normal"></highlight></codeline>
<codeline lineno="1526"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/><sp/>Butterfly<sp/>calculations<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1527"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>input<sp/>is<sp/>down<sp/>scale<sp/>by<sp/>4<sp/>to<sp/>avoid<sp/>overflow<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1528"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>U0<sp/>=<sp/>yd,<sp/>U1<sp/>=<sp/>xd)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1529"><highlight class="normal"><sp/><sp/><sp/><sp/>U0<sp/>=<sp/>pSrc16[i3<sp/>*<sp/>2U]<sp/>&gt;&gt;<sp/>2U;</highlight></codeline>
<codeline lineno="1530"><highlight class="normal"><sp/><sp/><sp/><sp/>U1<sp/>=<sp/>pSrc16[(i3<sp/>*<sp/>2U)<sp/>+<sp/>1U]<sp/>&gt;&gt;<sp/>2U;</highlight></codeline>
<codeline lineno="1531"><highlight class="normal"></highlight></codeline>
<codeline lineno="1532"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>T0<sp/>=<sp/>yb-yd,<sp/>T1<sp/>=<sp/>xb-xd)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1533"><highlight class="normal"><sp/><sp/><sp/><sp/>T0<sp/>=<sp/>__SSAT(T0<sp/>-<sp/>U0,<sp/>16U);</highlight></codeline>
<codeline lineno="1534"><highlight class="normal"><sp/><sp/><sp/><sp/>T1<sp/>=<sp/>__SSAT(T1<sp/>-<sp/>U1,<sp/>16U);</highlight></codeline>
<codeline lineno="1535"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>R0<sp/>=<sp/>(ya-yc)<sp/>-<sp/>(xb-<sp/>xd)<sp/>,<sp/>R1<sp/>=<sp/>(xa-xc)<sp/>+<sp/>(yb-yd)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1536"><highlight class="normal"><sp/><sp/><sp/><sp/>R0<sp/>=<sp/>(q15_t)<sp/>__SSAT((q31_t)<sp/>(S0<sp/>+<sp/>T1),<sp/>16);</highlight></codeline>
<codeline lineno="1537"><highlight class="normal"><sp/><sp/><sp/><sp/>R1<sp/>=<sp/>(q15_t)<sp/>__SSAT((q31_t)<sp/>(S1<sp/>-<sp/>T0),<sp/>16);</highlight></codeline>
<codeline lineno="1538"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>S<sp/>=<sp/>(ya-yc)<sp/>+<sp/>(xb-<sp/>xd),<sp/>S1<sp/>=<sp/>(xa-xc)<sp/>-<sp/>(yb-yd)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1539"><highlight class="normal"><sp/><sp/><sp/><sp/>S0<sp/>=<sp/>(q15_t)<sp/>__SSAT((q31_t)<sp/>(S0<sp/>-<sp/>T1),<sp/>16);</highlight></codeline>
<codeline lineno="1540"><highlight class="normal"><sp/><sp/><sp/><sp/>S1<sp/>=<sp/>(q15_t)<sp/>__SSAT((q31_t)<sp/>(S1<sp/>+<sp/>T0),<sp/>16);</highlight></codeline>
<codeline lineno="1541"><highlight class="normal"></highlight></codeline>
<codeline lineno="1542"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>co1<sp/>&amp;<sp/>si1<sp/>are<sp/>read<sp/>from<sp/>Coefficient<sp/>pointer<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1543"><highlight class="normal"><sp/><sp/><sp/><sp/>Co1<sp/>=<sp/>pCoef16[ic<sp/>*<sp/>2U];</highlight></codeline>
<codeline lineno="1544"><highlight class="normal"><sp/><sp/><sp/><sp/>Si1<sp/>=<sp/>pCoef16[(ic<sp/>*<sp/>2U)<sp/>+<sp/>1U];</highlight></codeline>
<codeline lineno="1545"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/><sp/>Butterfly<sp/>process<sp/>for<sp/>the<sp/>i0+fftLen/2<sp/>sample<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1546"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>xb&apos;<sp/>=<sp/>(xa-yb-xc+yd)*<sp/>co1<sp/>-<sp/>(ya+xb-yc-xd)*<sp/>(si1)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1547"><highlight class="normal"><sp/><sp/><sp/><sp/>out1<sp/>=<sp/>(q15_t)<sp/>((Co1<sp/>*<sp/>S0<sp/>-<sp/>Si1<sp/>*<sp/>S1)<sp/>&gt;&gt;<sp/>16U);</highlight></codeline>
<codeline lineno="1548"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>yb&apos;<sp/>=<sp/>(ya+xb-yc-xd)*<sp/>co1<sp/>+<sp/>(xa-yb-xc+yd)*<sp/>(si1)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1549"><highlight class="normal"><sp/><sp/><sp/><sp/>out2<sp/>=<sp/>(q15_t)<sp/>((Si1<sp/>*<sp/>S0<sp/>+<sp/>Co1<sp/>*<sp/>S1)<sp/>&gt;&gt;<sp/>16U);</highlight></codeline>
<codeline lineno="1550"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>writing<sp/>output(xb&apos;,<sp/>yb&apos;)<sp/>in<sp/>little<sp/>endian<sp/>format<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1551"><highlight class="normal"><sp/><sp/><sp/><sp/>pSrc16[i2<sp/>*<sp/>2U]<sp/>=<sp/>out1;</highlight></codeline>
<codeline lineno="1552"><highlight class="normal"><sp/><sp/><sp/><sp/>pSrc16[(i2<sp/>*<sp/>2U)<sp/>+<sp/>1U]<sp/>=<sp/>out2;</highlight></codeline>
<codeline lineno="1553"><highlight class="normal"></highlight></codeline>
<codeline lineno="1554"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Co3<sp/>&amp;<sp/>si3<sp/>are<sp/>read<sp/>from<sp/>Coefficient<sp/>pointer<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1555"><highlight class="normal"><sp/><sp/><sp/><sp/>Co3<sp/>=<sp/>pCoef16[3U<sp/>*<sp/>ic<sp/>*<sp/>2U];</highlight></codeline>
<codeline lineno="1556"><highlight class="normal"><sp/><sp/><sp/><sp/>Si3<sp/>=<sp/>pCoef16[(3U<sp/>*<sp/>ic<sp/>*<sp/>2U)<sp/>+<sp/>1U];</highlight></codeline>
<codeline lineno="1557"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/><sp/>Butterfly<sp/>process<sp/>for<sp/>the<sp/>i0+3fftLen/4<sp/>sample<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1558"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>xd&apos;<sp/>=<sp/>(xa+yb-xc-yd)*<sp/>Co3<sp/>-<sp/>(ya-xb-yc+xd)*<sp/>(si3)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1559"><highlight class="normal"><sp/><sp/><sp/><sp/>out1<sp/>=<sp/>(q15_t)<sp/>((Co3<sp/>*<sp/>R0<sp/>-<sp/>Si3<sp/>*<sp/>R1)<sp/>&gt;&gt;<sp/>16U);</highlight></codeline>
<codeline lineno="1560"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>yd&apos;<sp/>=<sp/>(ya-xb-yc+xd)*<sp/>Co3<sp/>+<sp/>(xa+yb-xc-yd)*<sp/>(si3)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1561"><highlight class="normal"><sp/><sp/><sp/><sp/>out2<sp/>=<sp/>(q15_t)<sp/>((Si3<sp/>*<sp/>R0<sp/>+<sp/>Co3<sp/>*<sp/>R1)<sp/>&gt;&gt;<sp/>16U);</highlight></codeline>
<codeline lineno="1562"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>writing<sp/>output(xd&apos;,<sp/>yd&apos;)<sp/>in<sp/>little<sp/>endian<sp/>format<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1563"><highlight class="normal"><sp/><sp/><sp/><sp/>pSrc16[i3<sp/>*<sp/>2U]<sp/>=<sp/>out1;</highlight></codeline>
<codeline lineno="1564"><highlight class="normal"><sp/><sp/><sp/><sp/>pSrc16[(i3<sp/>*<sp/>2U)<sp/>+<sp/>1U]<sp/>=<sp/>out2;</highlight></codeline>
<codeline lineno="1565"><highlight class="normal"></highlight></codeline>
<codeline lineno="1566"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/><sp/>Twiddle<sp/>coefficients<sp/>index<sp/>modifier<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1567"><highlight class="normal"><sp/><sp/><sp/><sp/>ic<sp/>=<sp/>ic<sp/>+<sp/>twidCoefModifier;</highlight></codeline>
<codeline lineno="1568"><highlight class="normal"></highlight></codeline>
<codeline lineno="1569"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/><sp/>Updating<sp/>input<sp/>index<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1570"><highlight class="normal"><sp/><sp/><sp/><sp/>i0<sp/>=<sp/>i0<sp/>+<sp/>1U;</highlight></codeline>
<codeline lineno="1571"><highlight class="normal"></highlight></codeline>
<codeline lineno="1572"><highlight class="normal"><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">while</highlight><highlight class="normal"><sp/>(--j);</highlight></codeline>
<codeline lineno="1573"><highlight class="normal"></highlight></codeline>
<codeline lineno="1574"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/><sp/>End<sp/>of<sp/>first<sp/>stage<sp/>process<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1575"><highlight class="normal"></highlight></codeline>
<codeline lineno="1576"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>data<sp/>is<sp/>in<sp/>4.11(q11)<sp/>format<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1577"><highlight class="normal"></highlight></codeline>
<codeline lineno="1578"><highlight class="normal"></highlight></codeline>
<codeline lineno="1579"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/><sp/>Start<sp/>of<sp/>Middle<sp/>stage<sp/>process<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1580"><highlight class="normal"></highlight></codeline>
<codeline lineno="1581"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/><sp/>Twiddle<sp/>coefficients<sp/>index<sp/>modifier<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1582"><highlight class="normal"><sp/><sp/>twidCoefModifier<sp/>&lt;&lt;=<sp/>2U;</highlight></codeline>
<codeline lineno="1583"><highlight class="normal"></highlight></codeline>
<codeline lineno="1584"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/><sp/>Calculation<sp/>of<sp/>Middle<sp/>stage<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1585"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(k<sp/>=<sp/>fftLen<sp/>/<sp/>4U;<sp/>k<sp/>&gt;<sp/>4U;<sp/>k<sp/>&gt;&gt;=<sp/>2U)</highlight></codeline>
<codeline lineno="1586"><highlight class="normal"><sp/><sp/>{</highlight></codeline>
<codeline lineno="1587"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/><sp/>Initializations<sp/>for<sp/>the<sp/>middle<sp/>stage<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1588"><highlight class="normal"><sp/><sp/><sp/><sp/>n1<sp/>=<sp/>n2;</highlight></codeline>
<codeline lineno="1589"><highlight class="normal"><sp/><sp/><sp/><sp/>n2<sp/>&gt;&gt;=<sp/>2U;</highlight></codeline>
<codeline lineno="1590"><highlight class="normal"><sp/><sp/><sp/><sp/>ic<sp/>=<sp/>0U;</highlight></codeline>
<codeline lineno="1591"><highlight class="normal"></highlight></codeline>
<codeline lineno="1592"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(j<sp/>=<sp/>0U;<sp/>j<sp/>&lt;=<sp/>(n2<sp/>-<sp/>1U);<sp/>j++)</highlight></codeline>
<codeline lineno="1593"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1594"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/><sp/>index<sp/>calculation<sp/>for<sp/>the<sp/>coefficients<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1595"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>Co1<sp/>=<sp/>pCoef16[ic<sp/>*<sp/>2U];</highlight></codeline>
<codeline lineno="1596"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>Si1<sp/>=<sp/>pCoef16[(ic<sp/>*<sp/>2U)<sp/>+<sp/>1U];</highlight></codeline>
<codeline lineno="1597"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>Co2<sp/>=<sp/>pCoef16[2U<sp/>*<sp/>ic<sp/>*<sp/>2U];</highlight></codeline>
<codeline lineno="1598"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>Si2<sp/>=<sp/>pCoef16[2U<sp/>*<sp/>ic<sp/>*<sp/>2U<sp/>+<sp/>1U];</highlight></codeline>
<codeline lineno="1599"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>Co3<sp/>=<sp/>pCoef16[3U<sp/>*<sp/>ic<sp/>*<sp/>2U];</highlight></codeline>
<codeline lineno="1600"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>Si3<sp/>=<sp/>pCoef16[(3U<sp/>*<sp/>ic<sp/>*<sp/>2U)<sp/>+<sp/>1U];</highlight></codeline>
<codeline lineno="1601"><highlight class="normal"></highlight></codeline>
<codeline lineno="1602"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/><sp/>Twiddle<sp/>coefficients<sp/>index<sp/>modifier<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1603"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>ic<sp/>=<sp/>ic<sp/>+<sp/>twidCoefModifier;</highlight></codeline>
<codeline lineno="1604"><highlight class="normal"></highlight></codeline>
<codeline lineno="1605"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/><sp/>Butterfly<sp/>implementation<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1606"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(i0<sp/>=<sp/>j;<sp/>i0<sp/>&lt;<sp/>fftLen;<sp/>i0<sp/>+=<sp/>n1)</highlight></codeline>
<codeline lineno="1607"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1608"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/><sp/>index<sp/>calculation<sp/>for<sp/>the<sp/>input<sp/>as,<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1609"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/><sp/>pSrc16[i0<sp/>+<sp/>0],<sp/>pSrc16[i0<sp/>+<sp/>fftLen/4],<sp/>pSrc16[i0<sp/>+<sp/>fftLen/2],<sp/>pSrc16[i0<sp/>+<sp/>3fftLen/4]<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1610"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>i1<sp/>=<sp/>i0<sp/>+<sp/>n2;</highlight></codeline>
<codeline lineno="1611"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>i2<sp/>=<sp/>i1<sp/>+<sp/>n2;</highlight></codeline>
<codeline lineno="1612"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>i3<sp/>=<sp/>i2<sp/>+<sp/>n2;</highlight></codeline>
<codeline lineno="1613"><highlight class="normal"></highlight></codeline>
<codeline lineno="1614"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/><sp/>Reading<sp/>i0,<sp/>i0+fftLen/2<sp/>inputs<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1615"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Read<sp/>ya<sp/>(real),<sp/>xa(imag)<sp/>input<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1616"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>T0<sp/>=<sp/>pSrc16[i0<sp/>*<sp/>2U];</highlight></codeline>
<codeline lineno="1617"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>T1<sp/>=<sp/>pSrc16[(i0<sp/>*<sp/>2U)<sp/>+<sp/>1U];</highlight></codeline>
<codeline lineno="1618"><highlight class="normal"></highlight></codeline>
<codeline lineno="1619"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Read<sp/>yc<sp/>(real),<sp/>xc(imag)<sp/>input<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1620"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>S0<sp/>=<sp/>pSrc16[i2<sp/>*<sp/>2U];</highlight></codeline>
<codeline lineno="1621"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>S1<sp/>=<sp/>pSrc16[(i2<sp/>*<sp/>2U)<sp/>+<sp/>1U];</highlight></codeline>
<codeline lineno="1622"><highlight class="normal"></highlight></codeline>
<codeline lineno="1623"><highlight class="normal"></highlight></codeline>
<codeline lineno="1624"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>R0<sp/>=<sp/>(ya<sp/>+<sp/>yc),<sp/>R1<sp/>=<sp/>(xa<sp/>+<sp/>xc)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1625"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>R0<sp/>=<sp/>__SSAT(T0<sp/>+<sp/>S0,<sp/>16U);</highlight></codeline>
<codeline lineno="1626"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>R1<sp/>=<sp/>__SSAT(T1<sp/>+<sp/>S1,<sp/>16U);</highlight></codeline>
<codeline lineno="1627"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>S0<sp/>=<sp/>(ya<sp/>-<sp/>yc),<sp/>S1<sp/>=<sp/>(xa<sp/>-<sp/>xc)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1628"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>S0<sp/>=<sp/>__SSAT(T0<sp/>-<sp/>S0,<sp/>16U);</highlight></codeline>
<codeline lineno="1629"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>S1<sp/>=<sp/>__SSAT(T1<sp/>-<sp/>S1,<sp/>16U);</highlight></codeline>
<codeline lineno="1630"><highlight class="normal"></highlight></codeline>
<codeline lineno="1631"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/><sp/>Reading<sp/>i0+fftLen/4<sp/>,<sp/>i0+3fftLen/4<sp/>inputs<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1632"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Read<sp/>yb<sp/>(real),<sp/>xb(imag)<sp/>input<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1633"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>T0<sp/>=<sp/>pSrc16[i1<sp/>*<sp/>2U];</highlight></codeline>
<codeline lineno="1634"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>T1<sp/>=<sp/>pSrc16[(i1<sp/>*<sp/>2U)<sp/>+<sp/>1U];</highlight></codeline>
<codeline lineno="1635"><highlight class="normal"></highlight></codeline>
<codeline lineno="1636"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Read<sp/>yd<sp/>(real),<sp/>xd(imag)<sp/>input<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1637"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>U0<sp/>=<sp/>pSrc16[i3<sp/>*<sp/>2U];</highlight></codeline>
<codeline lineno="1638"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>U1<sp/>=<sp/>pSrc16[(i3<sp/>*<sp/>2U)<sp/>+<sp/>1U];</highlight></codeline>
<codeline lineno="1639"><highlight class="normal"></highlight></codeline>
<codeline lineno="1640"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>T0<sp/>=<sp/>(yb<sp/>+<sp/>yd),<sp/>T1<sp/>=<sp/>(xb<sp/>+<sp/>xd)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1641"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>T0<sp/>=<sp/>__SSAT(T0<sp/>+<sp/>U0,<sp/>16U);</highlight></codeline>
<codeline lineno="1642"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>T1<sp/>=<sp/>__SSAT(T1<sp/>+<sp/>U1,<sp/>16U);</highlight></codeline>
<codeline lineno="1643"><highlight class="normal"></highlight></codeline>
<codeline lineno="1644"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/><sp/>writing<sp/>the<sp/>butterfly<sp/>processed<sp/>i0<sp/>sample<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1645"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>xa&apos;<sp/>=<sp/>xa<sp/>+<sp/>xb<sp/>+<sp/>xc<sp/>+<sp/>xd<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1646"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>ya&apos;<sp/>=<sp/>ya<sp/>+<sp/>yb<sp/>+<sp/>yc<sp/>+<sp/>yd<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1647"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pSrc16[i0<sp/>*<sp/>2U]<sp/>=<sp/>((R0<sp/>&gt;&gt;<sp/>1U)<sp/>+<sp/>(T0<sp/>&gt;&gt;<sp/>1U))<sp/>&gt;&gt;<sp/>1U;</highlight></codeline>
<codeline lineno="1648"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pSrc16[(i0<sp/>*<sp/>2U)<sp/>+<sp/>1U]<sp/>=<sp/>((R1<sp/>&gt;&gt;<sp/>1U)<sp/>+<sp/>(T1<sp/>&gt;&gt;<sp/>1U))<sp/>&gt;&gt;<sp/>1U;</highlight></codeline>
<codeline lineno="1649"><highlight class="normal"></highlight></codeline>
<codeline lineno="1650"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>R0<sp/>=<sp/>(ya<sp/>+<sp/>yc)<sp/>-<sp/>(yb<sp/>+<sp/>yd),<sp/>R1<sp/>=<sp/>(xa<sp/>+<sp/>xc)<sp/>-<sp/>(xb<sp/>+<sp/>xd)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1651"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>R0<sp/>=<sp/>(R0<sp/>&gt;&gt;<sp/>1U)<sp/>-<sp/>(T0<sp/>&gt;&gt;<sp/>1U);</highlight></codeline>
<codeline lineno="1652"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>R1<sp/>=<sp/>(R1<sp/>&gt;&gt;<sp/>1U)<sp/>-<sp/>(T1<sp/>&gt;&gt;<sp/>1U);</highlight></codeline>
<codeline lineno="1653"><highlight class="normal"></highlight></codeline>
<codeline lineno="1654"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>(ya-yb+yc-yd)*<sp/>(si2)<sp/>-<sp/>(xa-xb+xc-xd)*<sp/>co2<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1655"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>out1<sp/>=<sp/>(q15_t)<sp/>((Co2<sp/>*<sp/>R0<sp/>-<sp/>Si2<sp/>*<sp/>R1)<sp/>&gt;&gt;<sp/>16);</highlight></codeline>
<codeline lineno="1656"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>(ya-yb+yc-yd)*<sp/>co2<sp/>+<sp/>(xa-xb+xc-xd)*<sp/>(si2)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1657"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>out2<sp/>=<sp/>(q15_t)<sp/>((Si2<sp/>*<sp/>R0<sp/>+<sp/>Co2<sp/>*<sp/>R1)<sp/>&gt;&gt;<sp/>16);</highlight></codeline>
<codeline lineno="1658"><highlight class="normal"></highlight></codeline>
<codeline lineno="1659"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/><sp/>Reading<sp/>i0+3fftLen/4<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1660"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Read<sp/>yb<sp/>(real),<sp/>xb(imag)<sp/>input<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1661"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>T0<sp/>=<sp/>pSrc16[i1<sp/>*<sp/>2U];</highlight></codeline>
<codeline lineno="1662"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>T1<sp/>=<sp/>pSrc16[(i1<sp/>*<sp/>2U)<sp/>+<sp/>1U];</highlight></codeline>
<codeline lineno="1663"><highlight class="normal"></highlight></codeline>
<codeline lineno="1664"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/><sp/>writing<sp/>the<sp/>butterfly<sp/>processed<sp/>i0<sp/>+<sp/>fftLen/4<sp/>sample<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1665"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>xc&apos;<sp/>=<sp/>(xa-xb+xc-xd)*<sp/>co2<sp/>-<sp/>(ya-yb+yc-yd)*<sp/>(si2)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1666"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>yc&apos;<sp/>=<sp/>(ya-yb+yc-yd)*<sp/>co2<sp/>+<sp/>(xa-xb+xc-xd)*<sp/>(si2)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1667"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pSrc16[i1<sp/>*<sp/>2U]<sp/>=<sp/>out1;</highlight></codeline>
<codeline lineno="1668"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pSrc16[(i1<sp/>*<sp/>2U)<sp/>+<sp/>1U]<sp/>=<sp/>out2;</highlight></codeline>
<codeline lineno="1669"><highlight class="normal"></highlight></codeline>
<codeline lineno="1670"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/><sp/>Butterfly<sp/>calculations<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1671"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Read<sp/>yd<sp/>(real),<sp/>xd(imag)<sp/>input<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1672"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>U0<sp/>=<sp/>pSrc16[i3<sp/>*<sp/>2U];</highlight></codeline>
<codeline lineno="1673"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>U1<sp/>=<sp/>pSrc16[(i3<sp/>*<sp/>2U)<sp/>+<sp/>1U];</highlight></codeline>
<codeline lineno="1674"><highlight class="normal"></highlight></codeline>
<codeline lineno="1675"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>T0<sp/>=<sp/>yb-yd,<sp/>T1<sp/>=<sp/>xb-xd)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1676"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>T0<sp/>=<sp/>__SSAT(T0<sp/>-<sp/>U0,<sp/>16U);</highlight></codeline>
<codeline lineno="1677"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>T1<sp/>=<sp/>__SSAT(T1<sp/>-<sp/>U1,<sp/>16U);</highlight></codeline>
<codeline lineno="1678"><highlight class="normal"></highlight></codeline>
<codeline lineno="1679"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>R0<sp/>=<sp/>(ya-yc)<sp/>-<sp/>(xb-<sp/>xd)<sp/>,<sp/>R1<sp/>=<sp/>(xa-xc)<sp/>+<sp/>(yb-yd)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1680"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>R0<sp/>=<sp/>(S0<sp/>&gt;&gt;<sp/>1U)<sp/>+<sp/>(T1<sp/>&gt;&gt;<sp/>1U);</highlight></codeline>
<codeline lineno="1681"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>R1<sp/>=<sp/>(S1<sp/>&gt;&gt;<sp/>1U)<sp/>-<sp/>(T0<sp/>&gt;&gt;<sp/>1U);</highlight></codeline>
<codeline lineno="1682"><highlight class="normal"></highlight></codeline>
<codeline lineno="1683"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>S1<sp/>=<sp/>(ya-yc)<sp/>+<sp/>(xb-<sp/>xd),<sp/>S1<sp/>=<sp/>(xa-xc)<sp/>-<sp/>(yb-yd)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1684"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>S0<sp/>=<sp/>(S0<sp/>&gt;&gt;<sp/>1U)<sp/>-<sp/>(T1<sp/>&gt;&gt;<sp/>1U);</highlight></codeline>
<codeline lineno="1685"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>S1<sp/>=<sp/>(S1<sp/>&gt;&gt;<sp/>1U)<sp/>+<sp/>(T0<sp/>&gt;&gt;<sp/>1U);</highlight></codeline>
<codeline lineno="1686"><highlight class="normal"></highlight></codeline>
<codeline lineno="1687"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/><sp/>Butterfly<sp/>process<sp/>for<sp/>the<sp/>i0+fftLen/2<sp/>sample<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1688"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>out1<sp/>=<sp/>(q15_t)<sp/>((Co1<sp/>*<sp/>S0<sp/>-<sp/>Si1<sp/>*<sp/>S1)<sp/>&gt;&gt;<sp/>16U);</highlight></codeline>
<codeline lineno="1689"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>out2<sp/>=<sp/>(q15_t)<sp/>((Si1<sp/>*<sp/>S0<sp/>+<sp/>Co1<sp/>*<sp/>S1)<sp/>&gt;&gt;<sp/>16U);</highlight></codeline>
<codeline lineno="1690"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>xb&apos;<sp/>=<sp/>(xa-yb-xc+yd)*<sp/>co1<sp/>-<sp/>(ya+xb-yc-xd)*<sp/>(si1)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1691"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>yb&apos;<sp/>=<sp/>(ya+xb-yc-xd)*<sp/>co1<sp/>+<sp/>(xa-yb-xc+yd)*<sp/>(si1)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1692"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pSrc16[i2<sp/>*<sp/>2U]<sp/>=<sp/>out1;</highlight></codeline>
<codeline lineno="1693"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pSrc16[(i2<sp/>*<sp/>2U)<sp/>+<sp/>1U]<sp/>=<sp/>out2;</highlight></codeline>
<codeline lineno="1694"><highlight class="normal"></highlight></codeline>
<codeline lineno="1695"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/><sp/>Butterfly<sp/>process<sp/>for<sp/>the<sp/>i0+3fftLen/4<sp/>sample<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1696"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>out1<sp/>=<sp/>(q15_t)<sp/>((Co3<sp/>*<sp/>R0<sp/>-<sp/>Si3<sp/>*<sp/>R1)<sp/>&gt;&gt;<sp/>16U);</highlight></codeline>
<codeline lineno="1697"><highlight class="normal"></highlight></codeline>
<codeline lineno="1698"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>out2<sp/>=<sp/>(q15_t)<sp/>((Si3<sp/>*<sp/>R0<sp/>+<sp/>Co3<sp/>*<sp/>R1)<sp/>&gt;&gt;<sp/>16U);</highlight></codeline>
<codeline lineno="1699"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>xd&apos;<sp/>=<sp/>(xa+yb-xc-yd)*<sp/>Co3<sp/>-<sp/>(ya-xb-yc+xd)*<sp/>(si3)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1700"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>yd&apos;<sp/>=<sp/>(ya-xb-yc+xd)*<sp/>Co3<sp/>+<sp/>(xa+yb-xc-yd)*<sp/>(si3)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1701"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pSrc16[i3<sp/>*<sp/>2U]<sp/>=<sp/>out1;</highlight></codeline>
<codeline lineno="1702"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pSrc16[(i3<sp/>*<sp/>2U)<sp/>+<sp/>1U]<sp/>=<sp/>out2;</highlight></codeline>
<codeline lineno="1703"><highlight class="normal"></highlight></codeline>
<codeline lineno="1704"><highlight class="normal"></highlight></codeline>
<codeline lineno="1705"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1706"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1707"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/><sp/>Twiddle<sp/>coefficients<sp/>index<sp/>modifier<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1708"><highlight class="normal"><sp/><sp/><sp/><sp/>twidCoefModifier<sp/>&lt;&lt;=<sp/>2U;</highlight></codeline>
<codeline lineno="1709"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="1710"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/><sp/>End<sp/>of<sp/>Middle<sp/>stages<sp/>process<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1711"><highlight class="normal"></highlight></codeline>
<codeline lineno="1712"><highlight class="normal"></highlight></codeline>
<codeline lineno="1713"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>data<sp/>is<sp/>in<sp/>10.6(q6)<sp/>format<sp/>for<sp/>the<sp/>1024<sp/>point<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1714"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>data<sp/>is<sp/>in<sp/>8.8(q8)<sp/>format<sp/>for<sp/>the<sp/>256<sp/>point<sp/><sp/><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1715"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>data<sp/>is<sp/>in<sp/>6.10(q10)<sp/>format<sp/>for<sp/>the<sp/>64<sp/>point<sp/><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1716"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>data<sp/>is<sp/>in<sp/>4.12(q12)<sp/>format<sp/>for<sp/>the<sp/>16<sp/>point<sp/><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1717"><highlight class="normal"></highlight></codeline>
<codeline lineno="1718"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>start<sp/>of<sp/>last<sp/>stage<sp/>process<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1719"><highlight class="normal"></highlight></codeline>
<codeline lineno="1720"><highlight class="normal"></highlight></codeline>
<codeline lineno="1721"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/><sp/>Initializations<sp/>for<sp/>the<sp/>last<sp/>stage<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1722"><highlight class="normal"><sp/><sp/>n1<sp/>=<sp/>n2;</highlight></codeline>
<codeline lineno="1723"><highlight class="normal"><sp/><sp/>n2<sp/>&gt;&gt;=<sp/>2U;</highlight></codeline>
<codeline lineno="1724"><highlight class="normal"></highlight></codeline>
<codeline lineno="1725"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/><sp/>Butterfly<sp/>implementation<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1726"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(i0<sp/>=<sp/>0U;<sp/>i0<sp/>&lt;=<sp/>(fftLen<sp/>-<sp/>n1);<sp/>i0<sp/>+=<sp/>n1)</highlight></codeline>
<codeline lineno="1727"><highlight class="normal"><sp/><sp/>{</highlight></codeline>
<codeline lineno="1728"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/><sp/>index<sp/>calculation<sp/>for<sp/>the<sp/>input<sp/>as,<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1729"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/><sp/>pSrc16[i0<sp/>+<sp/>0],<sp/>pSrc16[i0<sp/>+<sp/>fftLen/4],<sp/>pSrc16[i0<sp/>+<sp/>fftLen/2],<sp/>pSrc16[i0<sp/>+<sp/>3fftLen/4]<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1730"><highlight class="normal"><sp/><sp/><sp/><sp/>i1<sp/>=<sp/>i0<sp/>+<sp/>n2;</highlight></codeline>
<codeline lineno="1731"><highlight class="normal"><sp/><sp/><sp/><sp/>i2<sp/>=<sp/>i1<sp/>+<sp/>n2;</highlight></codeline>
<codeline lineno="1732"><highlight class="normal"><sp/><sp/><sp/><sp/>i3<sp/>=<sp/>i2<sp/>+<sp/>n2;</highlight></codeline>
<codeline lineno="1733"><highlight class="normal"></highlight></codeline>
<codeline lineno="1734"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/><sp/>Reading<sp/>i0,<sp/>i0+fftLen/2<sp/>inputs<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1735"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Read<sp/>ya<sp/>(real),<sp/>xa(imag)<sp/>input<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1736"><highlight class="normal"><sp/><sp/><sp/><sp/>T0<sp/>=<sp/>pSrc16[i0<sp/>*<sp/>2U];</highlight></codeline>
<codeline lineno="1737"><highlight class="normal"><sp/><sp/><sp/><sp/>T1<sp/>=<sp/>pSrc16[(i0<sp/>*<sp/>2U)<sp/>+<sp/>1U];</highlight></codeline>
<codeline lineno="1738"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Read<sp/>yc<sp/>(real),<sp/>xc(imag)<sp/>input<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1739"><highlight class="normal"><sp/><sp/><sp/><sp/>S0<sp/>=<sp/>pSrc16[i2<sp/>*<sp/>2U];</highlight></codeline>
<codeline lineno="1740"><highlight class="normal"><sp/><sp/><sp/><sp/>S1<sp/>=<sp/>pSrc16[(i2<sp/>*<sp/>2U)<sp/>+<sp/>1U];</highlight></codeline>
<codeline lineno="1741"><highlight class="normal"></highlight></codeline>
<codeline lineno="1742"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>R0<sp/>=<sp/>(ya<sp/>+<sp/>yc),<sp/>R1<sp/>=<sp/>(xa<sp/>+<sp/>xc)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1743"><highlight class="normal"><sp/><sp/><sp/><sp/>R0<sp/>=<sp/>__SSAT(T0<sp/>+<sp/>S0,<sp/>16U);</highlight></codeline>
<codeline lineno="1744"><highlight class="normal"><sp/><sp/><sp/><sp/>R1<sp/>=<sp/>__SSAT(T1<sp/>+<sp/>S1,<sp/>16U);</highlight></codeline>
<codeline lineno="1745"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>S0<sp/>=<sp/>(ya<sp/>-<sp/>yc),<sp/>S1<sp/>=<sp/>(xa<sp/>-<sp/>xc)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1746"><highlight class="normal"><sp/><sp/><sp/><sp/>S0<sp/>=<sp/>__SSAT(T0<sp/>-<sp/>S0,<sp/>16U);</highlight></codeline>
<codeline lineno="1747"><highlight class="normal"><sp/><sp/><sp/><sp/>S1<sp/>=<sp/>__SSAT(T1<sp/>-<sp/>S1,<sp/>16U);</highlight></codeline>
<codeline lineno="1748"><highlight class="normal"></highlight></codeline>
<codeline lineno="1749"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/><sp/>Reading<sp/>i0+fftLen/4<sp/>,<sp/>i0+3fftLen/4<sp/>inputs<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1750"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Read<sp/>yb<sp/>(real),<sp/>xb(imag)<sp/>input<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1751"><highlight class="normal"><sp/><sp/><sp/><sp/>T0<sp/>=<sp/>pSrc16[i1<sp/>*<sp/>2U];</highlight></codeline>
<codeline lineno="1752"><highlight class="normal"><sp/><sp/><sp/><sp/>T1<sp/>=<sp/>pSrc16[(i1<sp/>*<sp/>2U)<sp/>+<sp/>1U];</highlight></codeline>
<codeline lineno="1753"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Read<sp/>yd<sp/>(real),<sp/>xd(imag)<sp/>input<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1754"><highlight class="normal"><sp/><sp/><sp/><sp/>U0<sp/>=<sp/>pSrc16[i3<sp/>*<sp/>2U];</highlight></codeline>
<codeline lineno="1755"><highlight class="normal"><sp/><sp/><sp/><sp/>U1<sp/>=<sp/>pSrc16[(i3<sp/>*<sp/>2U)<sp/>+<sp/>1U];</highlight></codeline>
<codeline lineno="1756"><highlight class="normal"></highlight></codeline>
<codeline lineno="1757"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>T0<sp/>=<sp/>(yb<sp/>+<sp/>yd),<sp/>T1<sp/>=<sp/>(xb<sp/>+<sp/>xd)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1758"><highlight class="normal"><sp/><sp/><sp/><sp/>T0<sp/>=<sp/>__SSAT(T0<sp/>+<sp/>U0,<sp/>16U);</highlight></codeline>
<codeline lineno="1759"><highlight class="normal"><sp/><sp/><sp/><sp/>T1<sp/>=<sp/>__SSAT(T1<sp/>+<sp/>U1,<sp/>16U);</highlight></codeline>
<codeline lineno="1760"><highlight class="normal"></highlight></codeline>
<codeline lineno="1761"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/><sp/>writing<sp/>the<sp/>butterfly<sp/>processed<sp/>i0<sp/>sample<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1762"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>xa&apos;<sp/>=<sp/>xa<sp/>+<sp/>xb<sp/>+<sp/>xc<sp/>+<sp/>xd<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1763"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>ya&apos;<sp/>=<sp/>ya<sp/>+<sp/>yb<sp/>+<sp/>yc<sp/>+<sp/>yd<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1764"><highlight class="normal"><sp/><sp/><sp/><sp/>pSrc16[i0<sp/>*<sp/>2U]<sp/>=<sp/>(R0<sp/>&gt;&gt;<sp/>1U)<sp/>+<sp/>(T0<sp/>&gt;&gt;<sp/>1U);</highlight></codeline>
<codeline lineno="1765"><highlight class="normal"><sp/><sp/><sp/><sp/>pSrc16[(i0<sp/>*<sp/>2U)<sp/>+<sp/>1U]<sp/>=<sp/>(R1<sp/>&gt;&gt;<sp/>1U)<sp/>+<sp/>(T1<sp/>&gt;&gt;<sp/>1U);</highlight></codeline>
<codeline lineno="1766"><highlight class="normal"></highlight></codeline>
<codeline lineno="1767"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>R0<sp/>=<sp/>(ya<sp/>+<sp/>yc)<sp/>-<sp/>(yb<sp/>+<sp/>yd),<sp/>R1<sp/>=<sp/>(xa<sp/>+<sp/>xc)<sp/>-<sp/>(xb<sp/>+<sp/>xd)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1768"><highlight class="normal"><sp/><sp/><sp/><sp/>R0<sp/>=<sp/>(R0<sp/>&gt;&gt;<sp/>1U)<sp/>-<sp/>(T0<sp/>&gt;&gt;<sp/>1U);</highlight></codeline>
<codeline lineno="1769"><highlight class="normal"><sp/><sp/><sp/><sp/>R1<sp/>=<sp/>(R1<sp/>&gt;&gt;<sp/>1U)<sp/>-<sp/>(T1<sp/>&gt;&gt;<sp/>1U);</highlight></codeline>
<codeline lineno="1770"><highlight class="normal"></highlight></codeline>
<codeline lineno="1771"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Read<sp/>yb<sp/>(real),<sp/>xb(imag)<sp/>input<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1772"><highlight class="normal"><sp/><sp/><sp/><sp/>T0<sp/>=<sp/>pSrc16[i1<sp/>*<sp/>2U];</highlight></codeline>
<codeline lineno="1773"><highlight class="normal"><sp/><sp/><sp/><sp/>T1<sp/>=<sp/>pSrc16[(i1<sp/>*<sp/>2U)<sp/>+<sp/>1U];</highlight></codeline>
<codeline lineno="1774"><highlight class="normal"></highlight></codeline>
<codeline lineno="1775"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/><sp/>writing<sp/>the<sp/>butterfly<sp/>processed<sp/>i0<sp/>+<sp/>fftLen/4<sp/>sample<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1776"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>xc&apos;<sp/>=<sp/>(xa-xb+xc-xd)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1777"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>yc&apos;<sp/>=<sp/>(ya-yb+yc-yd)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1778"><highlight class="normal"><sp/><sp/><sp/><sp/>pSrc16[i1<sp/>*<sp/>2U]<sp/>=<sp/>R0;</highlight></codeline>
<codeline lineno="1779"><highlight class="normal"><sp/><sp/><sp/><sp/>pSrc16[(i1<sp/>*<sp/>2U)<sp/>+<sp/>1U]<sp/>=<sp/>R1;</highlight></codeline>
<codeline lineno="1780"><highlight class="normal"></highlight></codeline>
<codeline lineno="1781"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Read<sp/>yd<sp/>(real),<sp/>xd(imag)<sp/>input<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1782"><highlight class="normal"><sp/><sp/><sp/><sp/>U0<sp/>=<sp/>pSrc16[i3<sp/>*<sp/>2U];</highlight></codeline>
<codeline lineno="1783"><highlight class="normal"><sp/><sp/><sp/><sp/>U1<sp/>=<sp/>pSrc16[(i3<sp/>*<sp/>2U)<sp/>+<sp/>1U];</highlight></codeline>
<codeline lineno="1784"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>T0<sp/>=<sp/>(yb<sp/>-<sp/>yd),<sp/>T1<sp/>=<sp/>(xb<sp/>-<sp/>xd)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1785"><highlight class="normal"><sp/><sp/><sp/><sp/>T0<sp/>=<sp/>__SSAT(T0<sp/>-<sp/>U0,<sp/>16U);</highlight></codeline>
<codeline lineno="1786"><highlight class="normal"><sp/><sp/><sp/><sp/>T1<sp/>=<sp/>__SSAT(T1<sp/>-<sp/>U1,<sp/>16U);</highlight></codeline>
<codeline lineno="1787"><highlight class="normal"></highlight></codeline>
<codeline lineno="1788"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/><sp/>writing<sp/>the<sp/>butterfly<sp/>processed<sp/>i0<sp/>+<sp/>fftLen/2<sp/>sample<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1789"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>xb&apos;<sp/>=<sp/>(xa-yb-xc+yd)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1790"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>yb&apos;<sp/>=<sp/>(ya+xb-yc-xd)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1791"><highlight class="normal"><sp/><sp/><sp/><sp/>pSrc16[i2<sp/>*<sp/>2U]<sp/>=<sp/>(S0<sp/>&gt;&gt;<sp/>1U)<sp/>-<sp/>(T1<sp/>&gt;&gt;<sp/>1U);</highlight></codeline>
<codeline lineno="1792"><highlight class="normal"><sp/><sp/><sp/><sp/>pSrc16[(i2<sp/>*<sp/>2U)<sp/>+<sp/>1U]<sp/>=<sp/>(S1<sp/>&gt;&gt;<sp/>1U)<sp/>+<sp/>(T0<sp/>&gt;&gt;<sp/>1U);</highlight></codeline>
<codeline lineno="1793"><highlight class="normal"></highlight></codeline>
<codeline lineno="1794"><highlight class="normal"></highlight></codeline>
<codeline lineno="1795"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/><sp/>writing<sp/>the<sp/>butterfly<sp/>processed<sp/>i0<sp/>+<sp/>3fftLen/4<sp/>sample<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1796"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>xd&apos;<sp/>=<sp/>(xa+yb-xc-yd)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1797"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>yd&apos;<sp/>=<sp/>(ya-xb-yc+xd)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1798"><highlight class="normal"><sp/><sp/><sp/><sp/>pSrc16[i3<sp/>*<sp/>2U]<sp/>=<sp/>(S0<sp/>&gt;&gt;<sp/>1U)<sp/>+<sp/>(T1<sp/>&gt;&gt;<sp/>1U);</highlight></codeline>
<codeline lineno="1799"><highlight class="normal"><sp/><sp/><sp/><sp/>pSrc16[(i3<sp/>*<sp/>2U)<sp/>+<sp/>1U]<sp/>=<sp/>(S1<sp/>&gt;&gt;<sp/>1U)<sp/>-<sp/>(T0<sp/>&gt;&gt;<sp/>1U);</highlight></codeline>
<codeline lineno="1800"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="1801"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>end<sp/>of<sp/>last<sp/>stage<sp/><sp/>process<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1802"><highlight class="normal"></highlight></codeline>
<codeline lineno="1803"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>output<sp/>is<sp/>in<sp/>11.5(q5)<sp/>format<sp/>for<sp/>the<sp/>1024<sp/>point<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1804"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>output<sp/>is<sp/>in<sp/>9.7(q7)<sp/>format<sp/>for<sp/>the<sp/>256<sp/>point<sp/><sp/><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1805"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>output<sp/>is<sp/>in<sp/>7.9(q9)<sp/>format<sp/>for<sp/>the<sp/>64<sp/>point<sp/><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1806"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>output<sp/>is<sp/>in<sp/>5.11(q11)<sp/>format<sp/>for<sp/>the<sp/>16<sp/>point<sp/><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1807"><highlight class="normal"></highlight></codeline>
<codeline lineno="1808"><highlight class="normal"></highlight><highlight class="preprocessor">#endif<sp/></highlight><highlight class="comment">/*<sp/>#if<sp/>defined<sp/>(RISCV_MATH_DSP)<sp/>*/</highlight><highlight class="preprocessor"></highlight></codeline>
<codeline lineno="1809"><highlight class="preprocessor"></highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1810"><highlight class="normal">}</highlight></codeline>
    </programlisting>
    <location file="/home/travis/build/Nuclei-Software/NMSIS/NMSIS/DSP/Source/TransformFunctions/riscv_cfft_radix4_q15.c"/>
  </compounddef>
</doxygen>
